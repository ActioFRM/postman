{
	"info": {
		"_postman_id": "7a9dc8fe-7856-4c0f-bab3-e21f80fde4d6",
		"name": "Rule018Tests",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "e2e pacs 002 Copy 2",
			"item": [
				{
					"name": "transaction 1",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const jsonData = pm.response.json();",
									"var req = JSON.parse(request.data);",
									"",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"should not have errors\", function () {",
									"    pm.expect(jsonData).not.to.have.property('errors')",
									"});",
									"",
									"pm.test(\"should be a valid transaction\", function () {",
									"    pm.expect(jsonData.message).to.eql(\"Transaction is valid\");",
									"});",
									"",
									"pm.test(\"should send to data preparation successfully\", function () {",
									"    pm.expect(jsonData.sent).to.eql(true);",
									"});",
									"",
									"pm.test(\"should have the same outgoing and incoming json\", function () {",
									"    pm.expect(jsonData.data).to.eql(req);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"\r",
									"var uuid = require('uuid');\r",
									"var myUUID = uuid.v4();\r",
									"pm.collectionVariables.set(\"transactionID\", myUUID.slice(-32));\r",
									"\r",
									"const msgId = pm.collectionVariables.get(\"transactionID\");\r",
									"const arangourl = pm.environment.get('arangourl');\r",
									"\r",
									"pm.sendRequest({\r",
									"    url: `${arangourl}/_db/networkmap/_api/cursor`,\r",
									"    method: 'POST',\r",
									"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },\r",
									"    body: {\r",
									"        mode: 'raw',\r",
									"        raw: JSON.stringify({\r",
									"            query: `FOR doc IN networkConfiguration\r",
									"                    FILTER doc.active == true\r",
									"                    UPDATE doc WITH { active: false } IN networkConfiguration`\r",
									"        })\r",
									"    }\r",
									"});\r",
									"\r",
									"const ruleConfig = [\r",
									"     {\r",
									"  \"id\": \"018@1.0.0\",\r",
									"  \"cfg\": \"1.0.0\",\r",
									"  \"config\": {\r",
									"    \"timeframes\": [\r",
									"      {\r",
									"        \"threshold\": 7889229000\r",
									"      }\r",
									"    ],\r",
									"    \"bands\": [\r",
									"      {\r",
									"        \"subRuleRef\": \".00\",\r",
									"        \"outcome\": false,\r",
									"        \"reason\": \"Insufficient transaction history\"\r",
									"      },\r",
									"      {\r",
									"        \"subRuleRef\": \".01\",\r",
									"        \"lowerLimit\": 0,\r",
									"        \"upperLimit\": 1.5,\r",
									"        \"outcome\": true,\r",
									"        \"reason\": \"Exceptionally large outgoing transfer detected\"\r",
									"      },\r",
									"      {\r",
									"        \"subRuleRef\": \".02\",\r",
									"        \"lowerLimit\": 1.5,\r",
									"        \"outcome\": false,\r",
									"        \"reason\": \"Outgoing transfer within historical limits\"\r",
									"      }\r",
									"    ]\r",
									"  }\r",
									"}\r",
									"]\r",
									"\r",
									"let e2eID = JSON.stringify(msgId);\r",
									"e2eID = e2eID.replace(\"\\\"\", \"'\")\r",
									"e2eID = e2eID.replace(\"\\\"\", \"'\")\r",
									"pm.collectionVariables.set(\"EndToEndId\", e2eID);\r",
									"\r",
									"const networkMaps = [\r",
									"{   \"key\": \"016\",\r",
									"    \"active\":true,\r",
									"    \"cfg\": \"1.0.0\",\r",
									"    \"messages\": [\r",
									"       {\r",
									"            \"id\": \"004_018@1.0.0\",\r",
									"            \"host\": \"http://gateway.openfaas:8080/function/off-transaction-aggregation-decisioning-processor-rel-1-0-0\",\r",
									"            \"cfg\": \"1.0.0\",\r",
									"            \"txTp\": \"pacs.002.001.12\",\r",
									"            \"channels\": [\r",
									"                {\r",
									"                    \"id\": \"001@1.0.0\",\r",
									"                    \"host\": \"http://gateway.openfaas:8080/function/off-channel-aggregation-decisioning-processor-rel-1-0-0\",\r",
									"                    \"cfg\": \"1.0.0\",\r",
									"                    \"typologies\": [\r",
									"                        {\r",
									"                            \"id\": \"999_018@1.0.0\",\r",
									"                            \"host\": \"http://gateway.openfaas:8080/function/off-typology-processor-rel-1-0-0\",\r",
									"                            \"cfg\": \"1.0.0\",\r",
									"                            \"rules\": [\r",
									"                                {\r",
									"                                    \"id\": \"018@1.0.0\",\r",
									"                                    \"host\": \"http://gateway.openfaas:8080/function/off-rule-018-rel-1-0-0\",\r",
									"                                    \"cfg\": \"1.0.0\"\r",
									"                                }\r",
									"                            ]\r",
									"                        }\r",
									"                    ]\r",
									"                }\r",
									"            ]\r",
									"        }\r",
									"        \r",
									"      ]\r",
									"    }\r",
									"]\r",
									"\r",
									"setTimeout(checkStatusCode, 2000);\r",
									"\r",
									"    function checkStatusCode() {\r",
									"\r",
									"       pm.sendRequest({\r",
									"    url: `${arangourl}/_db/networkmap/_api/cursor`,\r",
									"    method: 'POST',\r",
									"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },\r",
									"    body: {\r",
									"        mode: 'raw',\r",
									"        raw: JSON.stringify({\r",
									"            query: `FOR networkmap IN ${JSON.stringify(networkMaps)}\r",
									"                    INSERT {_id: networkmap._id, _key: networkmap.key, active: networkmap.active, cfg: networkmap.cfg, messages: networkmap.messages} INTO networkConfiguration\r",
									"                    OPTIONS { overwrite: true }`\r",
									"        })\r",
									"    }\r",
									"});\r",
									"    }\r",
									"\r",
									"pm.sendRequest({\r",
									"    url: `${arangourl}/_db/Configuration/_api/cursor`,\r",
									"    method: 'POST',\r",
									"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },\r",
									"    body: {\r",
									"        mode: 'raw',\r",
									"        raw: JSON.stringify({\r",
									"            query: `FOR config IN ${JSON.stringify(ruleConfig)}\r",
									"                    INSERT {_key: \"016\", id: config.id, cfg: config.cfg, config: config.config} INTO configuration\r",
									"                    OPTIONS { overwrite: true }`\r",
									"        })\r",
									"    }\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"TxTp\": \"pacs.002.001.12\",\n  \"FIToFIPmtSts\": {\n    \"GrpHdr\": {\n      \"MsgId\": \"{{transactionID}}\",\n      \"CreDtTm\": \"2021-11-03T07:24:48.000Z\"\n    },\n    \"TxInfAndSts\": {\n      \"OrgnlInstrId\": \"2f68ae16-467a-4ac4-ba32-eb5\",\n      \"OrgnlEndToEndId\": \"5cb8a2db-5c32-41bb-ac27\",\n      \"TxSts\": \"ACCC\",\n      \"ChrgsInf\": [\n        {\n          \"Amt\": {\n            \"Amt\": 157605510200862,\n            \"Ccy\": \"USD\"\n          },\n          \"Agt\": {\n            \"FinInstnId\": {\n              \"ClrSysMmbId\": {\n                \"MmbId\": \"dfsp001\"\n              }\n            }\n          }\n        },\n        {\n          \"Amt\": {\n            \"Amt\": 15918156530287100,\n            \"Ccy\": \"USD\"\n          },\n          \"Agt\": {\n            \"FinInstnId\": {\n              \"ClrSysMmbId\": {\n                \"MmbId\": \"dfsp001\"\n              }\n            }\n          }\n        },\n        {\n          \"Amt\": {\n            \"Amt\": 15918156530287100,\n            \"Ccy\": \"USD\"\n          },\n          \"Agt\": {\n            \"FinInstnId\": {\n              \"ClrSysMmbId\": {\n                \"MmbId\": \"dfsp002\"\n              }\n            }\n          }\n        }\n      ],\n      \"AccptncDtTm\": \"2021-11-03T07:24:47.000Z\",\n      \"InstgAgt\": {\n        \"FinInstnId\": {\n          \"ClrSysMmbId\": {\n            \"MmbId\": \"dfsp001\"\n          }\n        }\n      },\n      \"InstdAgt\": {\n        \"FinInstnId\": {\n          \"ClrSysMmbId\": {\n            \"MmbId\": \"dfsp002\"\n          }\n        }\n      }\n    }\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/function/off-transaction-monitoring-service-rel-1-0-0/transfer-response",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"function",
								"off-transaction-monitoring-service-rel-1-0-0",
								"transfer-response"
							]
						}
					},
					"response": []
				},
				{
					"name": "Arango db check transaction 1",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"\r",
									"setTimeout(checkStatusCode, 5000);\r",
									"\r",
									"    function checkStatusCode() {\r",
									"\r",
									"        pm.sendRequest('https://postman-echo.com/get', function (err, res) {\r",
									"\r",
									"            tests['status code should be 200']= res.code ===200;\r",
									"\r",
									"        });\r",
									"    }var Header = require('postman-collection').Header;\r",
									"pm.request.headers.append(Header.create(`Bearer ${pm.globals.get(\"arangoToken\")}`, 'Authorization'));\r",
									"console.log(\"received end to end id for above request \",pm.collectionVariables.get(\"EndToEndId\")); \r",
									"\r",
									"pm.environment.set(\"query\", JSON.stringify(\r",
									"      `\r",
									"      for transaction In transactions\r",
									"       FILTER transaction.transaction.FIToFIPmtSts.GrpHdr.MsgId == \r",
									"       `+pm.collectionVariables.get(\"EndToEndId\")+`\r",
									"       return transaction ` \r",
									"));\r",
									"\r",
									"console.log(pm.environment.get(\"query\"))\r",
									" "
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();\r",
									"var req = JSON.parse(request.data);\r",
									"\r",
									"\r",
									"pm.test(\"Status code is 201\", function () {\r",
									"    pm.response.to.have.status(201);\r",
									"});\r",
									"\r",
									"pm.test(\"check that there is actual data received back \", function () {\r",
									"    pm.expect(jsonData.result).to.not.eql([]);\r",
									"    pm.expect(jsonData.result[0].networkMap.cfg).to.eql('1.0.0');\r",
									"});\r",
									"\r",
									"pm.test(\"check that the report status is NALT \", function () {\r",
									"    pm.expect(jsonData.result[0].report.status).to.eql(\"NALT\")\r",
									"    pm.expect(jsonData.result[0].report.tadpResult.channelResult[0].typologyResult[0].ruleResults[0].result).to.eql(false);\r",
									"    pm.expect(jsonData.result[0].report.tadpResult.channelResult[0].typologyResult[0].ruleResults[0].subRuleRef).to.eql(\".00\");\r",
									"    pm.expect(jsonData.result[0].report.tadpResult.channelResult[0].typologyResult[0].ruleResults[0].reason).to.eql(\"Insufficient transaction history\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"query\": \"for transaction In transactions FILTER transaction.transaction.FIToFIPmtSts.GrpHdr.MsgId ==  {{EndToEndId}} return transaction \"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{arangourl}}/_db/transactionHistory/_api/cursor",
							"host": [
								"{{arangourl}}"
							],
							"path": [
								"_db",
								"transactionHistory",
								"_api",
								"cursor"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Test scenario 1",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const jsonData = pm.response.json();",
							"const req = JSON.parse(request.data);",
							"",
							"pm.test(\"should have status code of 200 \", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"should have rule result of false\", function () {",
							"    pm.expect(jsonData.ruleResult.result).to.be.eql(false);",
							"});",
							"",
							"pm.test(\"should have rule result with reason of Outgoing transfer within historical limits\", function () {",
							"    pm.expect(jsonData.ruleResult.reason).to.be.eql('Outgoing transfer within historical limits');",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"const arangourl = pm.environment.get('arangourl');",
							"",
							"const transactions = [",
							"  {",
							"    \"TxTp\": \"pacs.008.001.10\",",
							"    \"FIToFICstmrCdt\": {",
							"      \"GrpHdr\": {",
							"        \"MsgId\": \"5e74d27d-02ce-4db3-8254-e0161b8258f6\",",
							"        \"CreDtTm\": \"2021-12-02T10:05:09.000Z\",",
							"        \"NbOfTxs\": 1,",
							"        \"SttlmInf\": {",
							"          \"SttlmMtd\": \"CLRG\"",
							"        }",
							"      },",
							"      \"CdtTrfTxInf\": {",
							"        \"PmtId\": {",
							"          \"InstrId\": \"fa2ed11e-7a2b-4fc6-a3b6-9338b6c0a503\",",
							"          \"EndToEndId\": \"5036fa4f-0cb1-442c-b1a8-be0a3ce66365\"",
							"        },",
							"        \"IntrBkSttlmAmt\": {",
							"          \"Amt\": {",
							"            \"Amt\": 74371.24,",
							"            \"Ccy\": \"USD\"",
							"          }",
							"        },",
							"        \"InstdAmt\": {",
							"          \"Amt\": {",
							"            \"Amt\": 74371.24,",
							"            \"Ccy\": \"USD\"",
							"          }",
							"        },",
							"        \"ChrgBr\": \"DEBT\",",
							"        \"ChrgsInf\": {",
							"          \"Amt\": {",
							"            \"Amt\": 736.35,",
							"            \"Ccy\": \"USD\"",
							"          },",
							"          \"Agt\": {",
							"            \"FinInstnId\": {",
							"              \"ClrSysMmbId\": {",
							"                \"MmbId\": \"dfsp001\"",
							"              }",
							"            }",
							"          }",
							"        },",
							"        \"InitgPty\": {",
							"          \"Nm\": \"Hilda Glen Grant\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1929-06-02\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27765784647\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-765784647\"",
							"          }",
							"        },",
							"        \"Dbtr\": {",
							"          \"Nm\": \"Hilda Glen Grant\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1929-06-02\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27765784647\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-765784647\"",
							"          }",
							"        },",
							"        \"DbtrAcct\": {",
							"          \"Id\": {",
							"            \"Othr\": {",
							"              \"Id\": \"+27765784647\",",
							"              \"SchmeNm\": {",
							"                \"Prtry\": \"MSISDN\"",
							"              }",
							"            }",
							"          },",
							"          \"Nm\": \"Hilda Grant\"",
							"        },",
							"        \"DbtrAgt\": {",
							"          \"FinInstnId\": {",
							"            \"ClrSysMmbId\": {",
							"              \"MmbId\": \"dfsp001\"",
							"            }",
							"          }",
							"        },",
							"        \"CdtrAgt\": {",
							"          \"FinInstnId\": {",
							"            \"ClrSysMmbId\": {",
							"              \"MmbId\": \"dfsp002\"",
							"            }",
							"          }",
							"        },",
							"        \"Cdtr\": {",
							"          \"Nm\": \"Felicia Manfrey\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1965-07-04\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27827537492\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-827537492\"",
							"          }",
							"        },",
							"        \"CdtrAcct\": {",
							"          \"Id\": {",
							"            \"Othr\": {",
							"              \"Id\": \"+27827537492\",",
							"              \"SchmeNm\": {",
							"                \"Prtry\": \"MSISDN\"",
							"              }",
							"            }",
							"          },",
							"          \"Nm\": \"Felicia Manfrey\"",
							"        },",
							"        \"Purp\": {",
							"          \"Cd\": \"MP2P\"",
							"        }",
							"      },",
							"      \"RgltryRptg\": {",
							"        \"Dtls\": {",
							"          \"Tp\": \"BALANCE OF PAYMENTS\",",
							"          \"Cd\": \"100\"",
							"        }",
							"      },",
							"      \"RmtInf\": {",
							"        \"Ustrd\": \"Payment of USD 73634.89 from Hilda to Felicia\"",
							"      },",
							"      \"SplmtryData\": {",
							"        \"Envlp\": {",
							"          \"Doc\": {",
							"            \"Xprtn\": \"2021-12-02T10:10:05.000Z\"",
							"          }",
							"        }",
							"      }",
							"    }",
							"  },",
							"  {",
							"    \"TxTp\": \"pacs.008.001.10\",",
							"    \"FIToFICstmrCdt\": {",
							"      \"GrpHdr\": {",
							"        \"MsgId\": \"5cb8a2db-5c32-41bb-ac27-2597125d50fd\",",
							"        \"CreDtTm\": \"2021-11-18T16:47:23.000Z\",",
							"        \"NbOfTxs\": 1,",
							"        \"SttlmInf\": {",
							"          \"SttlmMtd\": \"CLRG\"",
							"        }",
							"      },",
							"      \"CdtTrfTxInf\": {",
							"        \"PmtId\": {",
							"          \"InstrId\": \"5cb8a2db-5c32-41bb-ac27-2597125d50fd\",",
							"          \"EndToEndId\": \"5cb8a2db-5c32-41bb-ac27-2597125d50fd\"",
							"        },",
							"        \"IntrBkSttlmAmt\": {",
							"          \"Amt\": {",
							"            \"Amt\": 95715423688371100,",
							"            \"Ccy\": \"USD\"",
							"          }",
							"        },",
							"        \"InstdAmt\": {",
							"          \"Amt\": {",
							"            \"Amt\": 95715423688371100,",
							"            \"Ccy\": \"USD\"",
							"          }",
							"        },",
							"        \"ChrgBr\": \"DEBT\",",
							"        \"ChrgsInf\": {",
							"          \"Amt\": {",
							"            \"Amt\": 947677462261100,",
							"            \"Ccy\": \"USD\"",
							"          },",
							"          \"Agt\": {",
							"            \"FinInstnId\": {",
							"              \"ClrSysMmbId\": {",
							"                \"MmbId\": \"dfsp001\"",
							"              }",
							"            }",
							"          }",
							"        },",
							"        \"InitgPty\": {",
							"          \"Nm\": \"Bruce Drew Summers\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1942-01-24\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27757347775\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-757347775\"",
							"          }",
							"        },",
							"        \"Dbtr\": {",
							"          \"Nm\": \"Bruce Drew Summers\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1942-01-24\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27757347775\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-757347775\"",
							"          }",
							"        },",
							"        \"DbtrAcct\": {",
							"          \"Id\": {",
							"            \"Othr\": {",
							"              \"Id\": \"+27765784647\",",
							"              \"SchmeNm\": {",
							"                \"Prtry\": \"MSISDN\"",
							"              }",
							"            }",
							"          },",
							"          \"Nm\": \"Bruce Summers\"",
							"        },",
							"        \"DbtrAgt\": {",
							"          \"FinInstnId\": {",
							"            \"ClrSysMmbId\": {",
							"              \"MmbId\": \"dfsp001\"",
							"            }",
							"          }",
							"        },",
							"        \"CdtrAgt\": {",
							"          \"FinInstnId\": {",
							"            \"ClrSysMmbId\": {",
							"              \"MmbId\": \"dfsp002\"",
							"            }",
							"          }",
							"        },",
							"        \"Cdtr\": {",
							"          \"Nm\": \"Geoffrey Piper Grant\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1926-09-18\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27880358989\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-880358989\"",
							"          }",
							"        },",
							"        \"CdtrAcct\": {",
							"          \"Id\": {",
							"            \"Othr\": {",
							"              \"Id\": \"+27880358989\",",
							"              \"SchmeNm\": {",
							"                \"Prtry\": \"MSISDN\"",
							"              }",
							"            }",
							"          },",
							"          \"Nm\": \"Geoffrey Grant\"",
							"        },",
							"        \"Purp\": {",
							"          \"Cd\": \"MP2P\"",
							"        }",
							"      },",
							"      \"RgltryRptg\": {",
							"        \"Dtls\": {",
							"          \"Tp\": \"BALANCE OF PAYMENTS\",",
							"          \"Cd\": \"100\"",
							"        }",
							"      },",
							"      \"RmtInf\": {",
							"        \"Ustrd\": \"Payment of USD 94767746226110000.62 from Bruce to Geoffrey\"",
							"      },",
							"      \"SplmtryData\": {",
							"        \"Envlp\": {",
							"          \"Doc\": {",
							"            \"Xprtn\": \"2021-11-18T16:52:19.000Z\"",
							"          }",
							"        }",
							"      }",
							"    }",
							"  },",
							"  {",
							"    \"TxTp\": \"pacs.008.001.10\",",
							"    \"FIToFICstmrCdt\": {",
							"      \"GrpHdr\": {",
							"        \"MsgId\": \"4dc9b98d-394b-4b0e-b038-0022ccdbca55\",",
							"        \"CreDtTm\": \"2021-11-02T23:45:10.000Z\",",
							"        \"NbOfTxs\": 1,",
							"        \"SttlmInf\": {",
							"          \"SttlmMtd\": \"CLRG\"",
							"        }",
							"      },",
							"      \"CdtTrfTxInf\": {",
							"        \"PmtId\": {",
							"          \"InstrId\": \"65b1547f-6fc1-4a5a-93c4-d1652df2da55\",",
							"          \"EndToEndId\": \"9eed1a3c-b407-45c8-9b97-e85571b1e1b4\"",
							"        },",
							"        \"IntrBkSttlmAmt\": {",
							"          \"Amt\": {",
							"            \"Amt\": 94205.08,",
							"            \"Ccy\": \"USD\"",
							"          }",
							"        },",
							"        \"InstdAmt\": {",
							"          \"Amt\": {",
							"            \"Amt\": 942.08,",
							"            \"Ccy\": \"USD\"",
							"          }",
							"        },",
							"        \"ChrgBr\": \"DEBT\",",
							"        \"ChrgsInf\": {",
							"          \"Amt\": {",
							"            \"Amt\": 932.72,",
							"            \"Ccy\": \"USD\"",
							"          },",
							"          \"Agt\": {",
							"            \"FinInstnId\": {",
							"              \"ClrSysMmbId\": {",
							"                \"MmbId\": \"dfsp001\"",
							"              }",
							"            }",
							"          }",
							"        },",
							"        \"InitgPty\": {",
							"          \"Nm\": \"April Owen Russel-Klein\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1965-12-21\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27834619240\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-834619240\"",
							"          }",
							"        },",
							"        \"Dbtr\": {",
							"          \"Nm\": \"April Owen Russel-Klein\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1965-12-21\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27834619240\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-834619240\"",
							"          }",
							"        },",
							"        \"DbtrAcct\": {",
							"          \"Id\": {",
							"            \"Othr\": {",
							"              \"Id\": \"+27834619240\",",
							"              \"SchmeNm\": {",
							"                \"Prtry\": \"MSISDN\"",
							"              }",
							"            }",
							"          },",
							"          \"Nm\": \"April Russel-Klein\"",
							"        },",
							"        \"DbtrAgt\": {",
							"          \"FinInstnId\": {",
							"            \"ClrSysMmbId\": {",
							"              \"MmbId\": \"dfsp001\"",
							"            }",
							"          }",
							"        },",
							"        \"CdtrAgt\": {",
							"          \"FinInstnId\": {",
							"            \"ClrSysMmbId\": {",
							"              \"MmbId\": \"dfsp002\"",
							"            }",
							"          }",
							"        },",
							"        \"Cdtr\": {",
							"          \"Nm\": \"Erica Drew Nadir\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1940-11-12\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27728170977\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-728170977\"",
							"          }",
							"        },",
							"        \"CdtrAcct\": {",
							"          \"Id\": {",
							"            \"Othr\": {",
							"              \"Id\": \"+27728170977\",",
							"              \"SchmeNm\": {",
							"                \"Prtry\": \"MSISDN\"",
							"              }",
							"            }",
							"          },",
							"          \"Nm\": \"Erica Nadir\"",
							"        },",
							"        \"Purp\": {",
							"          \"Cd\": \"MP2P\"",
							"        }",
							"      },",
							"      \"RgltryRptg\": {",
							"        \"Dtls\": {",
							"          \"Tp\": \"BALANCE OF PAYMENTS\",",
							"          \"Cd\": \"100\"",
							"        }",
							"      },",
							"      \"RmtInf\": {",
							"        \"Ustrd\": \"Payment of USD 93272.36 from April to Erica\"",
							"      },",
							"      \"SplmtryData\": {",
							"        \"Envlp\": {",
							"          \"Doc\": {",
							"            \"Xprtn\": \"2021-12-02T23:50:06.000Z\"",
							"          }",
							"        }",
							"      }",
							"    }",
							"  },",
							"  {",
							"    \"TxTp\": \"pacs.008.001.10\",",
							"    \"FIToFICstmrCdt\": {",
							"      \"GrpHdr\": {",
							"        \"MsgId\": \"c98221a3-730c-4dce-bbb0-4d8e97fe3ed8\",",
							"        \"CreDtTm\": \"2021-12-02T23:45:10.000Z\",",
							"        \"NbOfTxs\": 1,",
							"        \"SttlmInf\": {",
							"          \"SttlmMtd\": \"CLRG\"",
							"        }",
							"      },",
							"      \"CdtTrfTxInf\": {",
							"        \"PmtId\": {",
							"          \"InstrId\": \"50002528-965f-457a-8a18-0b0497bbb9e9\",",
							"          \"EndToEndId\": \"c1441420-f170-4e20-baa2-0bee974b9438\"",
							"        },",
							"        \"IntrBkSttlmAmt\": {",
							"          \"Amt\": {",
							"            \"Amt\": 27388.51,",
							"            \"Ccy\": \"USD\"",
							"          }",
							"        },",
							"        \"InstdAmt\": {",
							"          \"Amt\": {",
							"            \"Amt\": 27388.51,",
							"            \"Ccy\": \"USD\"",
							"          }",
							"        },",
							"        \"ChrgBr\": \"DEBT\",",
							"        \"ChrgsInf\": {",
							"          \"Amt\": {",
							"            \"Amt\": 271.17,",
							"            \"Ccy\": \"USD\"",
							"          },",
							"          \"Agt\": {",
							"            \"FinInstnId\": {",
							"              \"ClrSysMmbId\": {",
							"                \"MmbId\": \"dfsp001\"",
							"              }",
							"            }",
							"          }",
							"        },",
							"        \"InitgPty\": {",
							"          \"Nm\": \"April Indigo Adamson\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"2003-09-28\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27774878492\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-774878492\"",
							"          }",
							"        },",
							"        \"Dbtr\": {",
							"          \"Nm\": \"April Indigo Adamson\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"2003-09-28\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27774878492\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-774878492\"",
							"          }",
							"        },",
							"        \"DbtrAcct\": {",
							"          \"Id\": {",
							"            \"Othr\": {",
							"              \"Id\": \"+27834619240\",",
							"              \"SchmeNm\": {",
							"                \"Prtry\": \"MSISDN\"",
							"              }",
							"            }",
							"          },",
							"          \"Nm\": \"April Adamson\"",
							"        },",
							"        \"DbtrAgt\": {",
							"          \"FinInstnId\": {",
							"            \"ClrSysMmbId\": {",
							"              \"MmbId\": \"dfsp001\"",
							"            }",
							"          }",
							"        },",
							"        \"CdtrAgt\": {",
							"          \"FinInstnId\": {",
							"            \"ClrSysMmbId\": {",
							"              \"MmbId\": \"dfsp002\"",
							"            }",
							"          }",
							"        },",
							"        \"Cdtr\": {",
							"          \"Nm\": \"Bruce Piper Ford\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1942-05-26\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27798604844\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-798604844\"",
							"          }",
							"        },",
							"        \"CdtrAcct\": {",
							"          \"Id\": {",
							"            \"Othr\": {",
							"              \"Id\": \"+27798604844\",",
							"              \"SchmeNm\": {",
							"                \"Prtry\": \"MSISDN\"",
							"              }",
							"            }",
							"          },",
							"          \"Nm\": \"Bruce Ford\"",
							"        },",
							"        \"Purp\": {",
							"          \"Cd\": \"MP2P\"",
							"        }",
							"      },",
							"      \"RgltryRptg\": {",
							"        \"Dtls\": {",
							"          \"Tp\": \"BALANCE OF PAYMENTS\",",
							"          \"Cd\": \"100\"",
							"        }",
							"      },",
							"      \"RmtInf\": {",
							"        \"Ustrd\": \"Payment of USD 27117.34 from April to Bruce\"",
							"      },",
							"      \"SplmtryData\": {",
							"        \"Envlp\": {",
							"          \"Doc\": {",
							"            \"Xprtn\": \"2021-12-02T23:50:06.000Z\"",
							"          }",
							"        }",
							"      }",
							"    }",
							"  }",
							"];",
							"",
							"const ruleConfig = [",
							"    {",
							"  \"id\": \"018@1.0.0\",",
							"  \"cfg\": \"1.0.0\",",
							"  \"config\": {",
							"    \"timeframes\": [",
							"      {",
							"        \"threshold\": 7889229000",
							"      }",
							"    ],",
							"    \"bands\": [",
							"      {",
							"        \"subRuleRef\": \".00\",",
							"        \"outcome\": false,",
							"        \"reason\": \"Insufficient transaction history\"",
							"      },",
							"      {",
							"        \"subRuleRef\": \".01\",",
							"        \"lowerLimit\": 0,",
							"        \"upperLimit\": 1.5,",
							"        \"outcome\": true,",
							"        \"reason\": \"Exceptionally large outgoing transfer detected\"",
							"      },",
							"      {",
							"        \"subRuleRef\": \".02\",",
							"        \"lowerLimit\": 1.5,",
							"        \"outcome\": false,",
							"        \"reason\": \"Outgoing transfer within historical limits\"",
							"      }",
							"    ]",
							"  }",
							"}",
							"]",
							"",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(transactions)}",
							"                    INSERT {_key: transaction.FIToFICstmrCdt.GrpHdr.MsgId, TxTp: transaction.TxTp, FIToFICstmrCdt: transaction.FIToFICstmrCdt} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/Configuration/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR config IN ${JSON.stringify(ruleConfig)}",
							"                    INSERT {_key: \"018\", id: config.id, cfg: config.cfg, config: config.config} INTO configuration",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"",
							"",
							"",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"transaction\": {\n    \"TxTp\": \"pacs.002.001.12\",\n    \"FIToFIPmtSts\": {\n      \"GrpHdr\": {\n        \"MsgID\": \"ec3a6a10-0c31-4564-94f6-ed1d79fed91f\",\n        \"CreDtTm\": \"2021-11-03T07:24:48.000Z\"\n      },\n      \"TxInfAndSts\": {\n        \"OrgnlInstrId\": \"2f68ae16-467a-4ac4-ba32-eb518646aa1d\",\n        \"OrgnlEndToEndId\": \"5036fa4f-0cb1-442c-b1a8-be0a3ce66365\",\n        \"TxSts\": \"ACSC\",\n        \"ChrgsInf\": [\n          {\n            \"Amt\": {\n              \"Amt\": \"157605510200862\",\n              \"Ccy\": \"USD\"\n            },\n            \"Agt\": {\n              \"FinInstnId\": {\n                \"ClrSysMmbId\": {\n                  \"MmbId\": \"dfsp001\"\n                }\n              }\n            }\n          },\n          {\n            \"Amt\": {\n              \"Amt\": \"15918156530287100\",\n              \"Ccy\": \"USD\"\n            },\n            \"Agt\": {\n              \"FinInstnId\": {\n                \"ClrSysMmbId\": {\n                  \"MmbId\": \"dfsp001\"\n                }\n              }\n            }\n          },\n          {\n            \"Amt\": {\n              \"Amt\": \"15918156530287100\",\n              \"Ccy\": \"USD\"\n            },\n            \"Agt\": {\n              \"FinInstnId\": {\n                \"ClrSysMmbId\": {\n                  \"MmbId\": \"dfsp002\"\n                }\n              }\n            }\n          }\n        ],\n        \"AccptncDtTm\": \"2021-11-03T07:24:47.000Z\",\n        \"InstgAgt\": {\n          \"FinInstnId\": {\n            \"ClrSysMmbId\": {\n              \"MmbId\": \"dfsp001\"\n            }\n          }\n        },\n        \"InstdAgt\": {\n          \"FinInstnId\": {\n            \"ClrSysMmbId\": {\n              \"MmbId\": \"dfsp002\"\n            }\n          }\n        }\n      }\n    }\n  },\n  \"networkMap\": {\n    \"_key\": \"26345403\",\n    \"_id\": \"networkConfiguration/26345403\",\n    \"_rev\": \"_cxc-1vO---\",\n    \"messages\": [\n       {\n            \"id\": \"004_018@1.0.0\",\n            \"host\": \"http://gateway.openfaas:8080/function/off-transaction-aggregation-decisioning-processor-rel-1-0-0\",\n            \"cfg\": \"1.0.0\",\n            \"txTp\": \"pacs.002.001.12\",\n            \"channels\": [\n                {\n                    \"id\": \"001@1.0.0\",\n                    \"host\": \"http://gateway.openfaas:8080/function/off-channel-aggregation-decisioning-processor-rel-1-0-0\",\n                    \"cfg\": \"1.0.0\",\n                    \"typologies\": [\n                        {\n                            \"id\": \"999_018@1.0.0\",\n                            \"host\": \"http://gateway.openfaas:8080/function/off-typology-processor-rel-1-0-0\",\n                            \"cfg\": \"1.0.0\",\n                            \"rules\": [\n                                {\n                                    \"id\": \"018@1.0.0\",\n                                    \"host\": \"http://gateway.openfaas:8080/function/off-rule-018-rel-1-0-0\",\n                                    \"cfg\": \"1.0.0\"\n                                }\n                            ]\n                        }\n                    ]\n                }\n            ]\n        }\n    ]\n  }\n}\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{baseUrl}}/function/off-rule-018-rel-1-0-0/execute",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"function",
						"off-rule-018-rel-1-0-0",
						"execute"
					]
				}
			},
			"response": []
		},
		{
			"name": "Test scenario 2",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const jsonData = pm.response.json();",
							"const req = JSON.parse(request.data);",
							"",
							"pm.test(\"should have status code of 200 \", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"should have rule result of true\", function () {",
							"    pm.expect(jsonData.ruleResult.result).to.be.eql(false);",
							"});",
							"",
							"pm.test(\"should have rule result with Insufficient transaction history reason\", function () {",
							"    pm.expect(jsonData.ruleResult.reason).to.be.eql('Insufficient transaction history');",
							"});",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"transaction\": {\n  \"TxTp\": \"pacs.002.001.12\",\n  \"FIToFIPmtSts\": {\n    \"GrpHdr\": {\n      \"MsgId\": \"28b768aa-e239-4199-abab-7e5e8c95deb4\",\n      \"CreDtTm\": \"2021-12-02T23:45:12.000Z\"\n    },\n    \"TxInfAndSts\": {\n      \"OrgnlInstrId\": \"50002528-965f-457a-8a18-0b0497bbb9e9\",\n      \"OrgnlEndToEndId\": \"c1441420-f170-4e20-baa2-0bee974b9438\",\n      \"TxSts\": \"ACCC\",\n      \"ChrgsInf\": [\n        {\n          \"Amt\": {\n            \"Amt\": 271.17,\n            \"Ccy\": \"USD\"\n          },\n          \"Agt\": {\n            \"FinInstnId\": {\n              \"ClrSysMmbId\": {\n                \"MmbId\": \"dfsp001\"\n              }\n            }\n          }\n        },\n        {\n          \"Amt\": {\n            \"Amt\": 135.59,\n            \"Ccy\": \"USD\"\n          },\n          \"Agt\": {\n            \"FinInstnId\": {\n              \"ClrSysMmbId\": {\n                \"MmbId\": \"dfsp001\"\n              }\n            }\n          }\n        },\n        {\n          \"Amt\": {\n            \"Amt\": 27.12,\n            \"Ccy\": \"USD\"\n          },\n          \"Agt\": {\n            \"FinInstnId\": {\n              \"ClrSysMmbId\": {\n                \"MmbId\": \"dfsp002\"\n              }\n            }\n          }\n        }\n      ],\n      \"AccptncDtTm\": \"2021-12-02T23:45:11.000Z\",\n      \"InstgAgt\": {\n        \"FinInstnId\": {\n          \"ClrSysMmbId\": {\n            \"MmbId\": \"dfsp001\"\n          }\n        }\n      },\n      \"InstdAgt\": {\n        \"FinInstnId\": {\n          \"ClrSysMmbId\": {\n            \"MmbId\": \"dfsp002\"\n          }\n        }\n      }\n    }\n  }\n},\n  \"networkMap\": {\n    \"_key\": \"26345403\",\n    \"_id\": \"networkConfiguration/26345403\",\n    \"_rev\": \"_cxc-1vO---\",\n    \"messages\": [\n       {\n            \"id\": \"004_018@1.0.0\",\n            \"host\": \"http://gateway.openfaas:8080/function/off-transaction-aggregation-decisioning-processor-rel-1-0-0\",\n            \"cfg\": \"1.0.0\",\n            \"txTp\": \"pacs.002.001.12\",\n            \"channels\": [\n                {\n                    \"id\": \"001@1.0.0\",\n                    \"host\": \"http://gateway.openfaas:8080/function/off-channel-aggregation-decisioning-processor-rel-1-0-0\",\n                    \"cfg\": \"1.0.0\",\n                    \"typologies\": [\n                        {\n                            \"id\": \"999_018@1.0.0\",\n                            \"host\": \"http://gateway.openfaas:8080/function/off-typology-processor-rel-1-0-0\",\n                            \"cfg\": \"1.0.0\",\n                            \"rules\": [\n                                {\n                                    \"id\": \"018@1.0.0\",\n                                    \"host\": \"http://gateway.openfaas:8080/function/off-rule-018-rel-1-0-0\",\n                                    \"cfg\": \"1.0.0\"\n                                }\n                            ]\n                        }\n                    ]\n                }\n            ]\n        }\n    ]\n  }\n}\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{baseUrl}}/function/off-rule-018-rel-1-0-0/execute",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"function",
						"off-rule-018-rel-1-0-0",
						"execute"
					]
				}
			},
			"response": []
		},
		{
			"name": "Test scenario 3",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const jsonData = pm.response.json();",
							"const req = JSON.parse(request.data);",
							"const arangourl = pm.environment.get('arangourl');",
							"const config = [\"018\"]",
							"const transactions = [\"4d4567-02ce-4db3-8254-e0161bytgfc6\", \"jhgfde4567-5c32-41bb-ac27-8765jhgff\", \"876543eh-394b-4b0e-b038-0zxcvbhjoiuytr\", \"66698065119746c5be7dfb55hgfdr56v\", \"34544-73b7-11ec-90d6-0765rtfgh\"]",
							"",
							"pm.test(\"should have status code of 200 \", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"should have rule result of false\", function () {",
							"    pm.expect(jsonData.ruleResult.result).to.be.eql(false);",
							"});",
							"",
							"pm.test(\"should have rule result with reason of Outgoing transfer within historical limits\", function () {",
							"    pm.expect(jsonData.ruleResult.reason).to.be.eql('Outgoing transfer within historical limits');",
							"});",
							"",
							"pm.test(\"Remove Seed Data from DB\", function () {",
							"    pm.sendRequest({",
							"        url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"        method: 'POST',",
							"        header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"        body: {",
							"            mode: 'raw',",
							"            raw: JSON.stringify({",
							"                query: `FOR transaction IN ${JSON.stringify(transactions)}",
							"                        REMOVE { _key: transaction } IN transactionHistory",
							"                        OPTIONS { ignoreErrors: true }`",
							"            })",
							"        }",
							"    })",
							"});",
							"pm.test(\"Remove Seed Data from DB\", function () {",
							"    pm.sendRequest({",
							"        url: `${arangourl}/_db/Configuration/_api/cursor`,",
							"        method: 'POST',",
							"        header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"        body: {",
							"            mode: 'raw',",
							"            raw: JSON.stringify({",
							"                query: `FOR config IN ${JSON.stringify(config)}",
							"                        REMOVE { _key: config } IN configuration",
							"                        OPTIONS { ignoreErrors: true }`",
							"            })",
							"        }",
							"    })",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"const arangourl = pm.environment.get('arangourl');",
							"const now = new Date().getTime();",
							"",
							"pm.globals.set(\"now\", new Date().toISOString());",
							"const ruleConfig = [",
							"    {",
							"    \"id\": \"018@1.0.0\",",
							"    \"cfg\": \"1.0.1\",",
							"    \"config\": {",
							"        \"timeframes\": [",
							"            {",
							"                \"threshold\": 10518972000",
							"            }",
							"        ],",
							"        \"bands\": [",
							"            {",
							"                \"subRuleRef\": \".00\",",
							"                \"outcome\": false,",
							"                \"reason\": \"Insufficient transaction history\"",
							"            },",
							"            {",
							"                \"subRuleRef\": \".01\",",
							"                \"lowerLimit\": 0,",
							"                \"upperLimit\": 1.5,",
							"                \"outcome\": true,",
							"                \"reason\": \"Exceptionally large outgoing transfer detected\"",
							"            },",
							"            {",
							"                \"subRuleRef\": \".02\",",
							"                \"lowerLimit\": 1.5,",
							"                \"outcome\": false,",
							"                \"reason\": \"Outgoing transfer within historical limits\"",
							"            }",
							"        ]",
							"    }",
							"}",
							"]",
							"",
							"const transactions = [",
							"  {",
							"    \"TxTp\": \"pacs.008.001.10\",",
							"    \"FIToFICstmrCdt\": {",
							"      \"GrpHdr\": {",
							"        \"MsgId\": \"4d4567-02ce-4db3-8254-e0161bytgfc6\",",
							"        \"CreDtTm\": new Date(now - 8889230000).toISOString(),",
							"        \"NbOfTxs\": 1,",
							"        \"SttlmInf\": {",
							"          \"SttlmMtd\": \"CLRG\"",
							"        }",
							"      },",
							"      \"CdtTrfTxInf\": {",
							"        \"PmtId\": {",
							"          \"InstrId\": \"fa2ed11e-7a2b-4fc6-a3b6-9338b6c0a503\",",
							"          \"EndToEndId\": \"5036fa4f-0cb1-442c-b1a8-be0a3ce66365\"",
							"        },",
							"        \"IntrBkSttlmAmt\": {",
							"          \"Amt\": {",
							"            \"Amt\": 74371.24,",
							"            \"Ccy\": \"USD\"",
							"          }",
							"        },",
							"        \"InstdAmt\": {",
							"          \"Amt\": {",
							"            \"Amt\": 20000,",
							"            \"Ccy\": \"ZAR\"",
							"          }",
							"        },",
							"        \"ChrgBr\": \"DEBT\",",
							"        \"ChrgsInf\": {",
							"          \"Amt\": {",
							"            \"Amt\": 736.35,",
							"            \"Ccy\": \"USD\"",
							"          },",
							"          \"Agt\": {",
							"            \"FinInstnId\": {",
							"              \"ClrSysMmbId\": {",
							"                \"MmbId\": \"dfsp001\"",
							"              }",
							"            }",
							"          }",
							"        },",
							"        \"InitgPty\": {",
							"          \"Nm\": \"Hilda Glen Grant\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1929-06-02\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27765784647\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-765784647\"",
							"          }",
							"        },",
							"        \"Dbtr\": {",
							"          \"Nm\": \"Hilda Glen Grant\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1929-06-02\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27765784647\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-765784647\"",
							"          }",
							"        },",
							"        \"DbtrAcct\": {",
							"          \"Id\": {",
							"            \"Othr\": {",
							"              \"Id\": \"345678909876567890yhnjnj\",",
							"              \"SchmeNm\": {",
							"                \"Prtry\": \"MSISDN\"",
							"              }",
							"            }",
							"          },",
							"          \"Nm\": \"Hilda Grant\"",
							"        },",
							"        \"DbtrAgt\": {",
							"          \"FinInstnId\": {",
							"            \"ClrSysMmbId\": {",
							"              \"MmbId\": \"dfsp001\"",
							"            }",
							"          }",
							"        },",
							"        \"CdtrAgt\": {",
							"          \"FinInstnId\": {",
							"            \"ClrSysMmbId\": {",
							"              \"MmbId\": \"dfsp002\"",
							"            }",
							"          }",
							"        },",
							"        \"Cdtr\": {",
							"          \"Nm\": \"Felicia Manfrey\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1965-07-04\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27827537492\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-827537492\"",
							"          }",
							"        },",
							"        \"CdtrAcct\": {",
							"          \"Id\": {",
							"            \"Othr\": {",
							"              \"Id\": \"+27827537492\",",
							"              \"SchmeNm\": {",
							"                \"Prtry\": \"MSISDN\"",
							"              }",
							"            }",
							"          },",
							"          \"Nm\": \"Felicia Manfrey\"",
							"        },",
							"        \"Purp\": {",
							"          \"Cd\": \"MP2P\"",
							"        }",
							"      },",
							"      \"RgltryRptg\": {",
							"        \"Dtls\": {",
							"          \"Tp\": \"BALANCE OF PAYMENTS\",",
							"          \"Cd\": \"100\"",
							"        }",
							"      },",
							"      \"RmtInf\": {",
							"        \"Ustrd\": \"Payment of USD 73634.89 from Hilda to Felicia\"",
							"      },",
							"      \"SplmtryData\": {",
							"        \"Envlp\": {",
							"          \"Doc\": {",
							"            \"Xprtn\": \"2021-12-02T10:10:05.000Z\"",
							"          }",
							"        }",
							"      }",
							"    }",
							"  },",
							"  {",
							"    \"TxTp\": \"pacs.008.001.10\",",
							"    \"FIToFICstmrCdt\": {",
							"      \"GrpHdr\": {",
							"        \"MsgId\": \"jhgfde4567-5c32-41bb-ac27-8765jhgff\",",
							"        \"CreDtTm\": new Date(now - 500000).toISOString(),",
							"        \"NbOfTxs\": 1,",
							"        \"SttlmInf\": {",
							"          \"SttlmMtd\": \"CLRG\"",
							"        }",
							"      },",
							"      \"CdtTrfTxInf\": {",
							"        \"PmtId\": {",
							"          \"InstrId\": \"5cb8a2db-5c32-41bb-ac27-2597125d50fd\",",
							"          \"EndToEndId\": \"5cb8a2db-5c32-41bb-ac27-2597125d50fd\"",
							"        },",
							"        \"IntrBkSttlmAmt\": {",
							"          \"Amt\": {",
							"            \"Amt\": 95715423688371100,",
							"            \"Ccy\": \"USD\"",
							"          }",
							"        },",
							"        \"InstdAmt\": {",
							"          \"Amt\": {",
							"            \"Amt\": 10000,",
							"            \"Ccy\": \"ZAR\"",
							"          }",
							"        },",
							"        \"ChrgBr\": \"DEBT\",",
							"        \"ChrgsInf\": {",
							"          \"Amt\": {",
							"            \"Amt\": 947677462261100,",
							"            \"Ccy\": \"USD\"",
							"          },",
							"          \"Agt\": {",
							"            \"FinInstnId\": {",
							"              \"ClrSysMmbId\": {",
							"                \"MmbId\": \"dfsp001\"",
							"              }",
							"            }",
							"          }",
							"        },",
							"        \"InitgPty\": {",
							"          \"Nm\": \"Bruce Drew Summers\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1942-01-24\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27757347775\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-757347775\"",
							"          }",
							"        },",
							"        \"Dbtr\": {",
							"          \"Nm\": \"Bruce Drew Summers\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1942-01-24\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27757347775\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-757347775\"",
							"          }",
							"        },",
							"        \"DbtrAcct\": {",
							"          \"Id\": {",
							"            \"Othr\": {",
							"              \"Id\": \"345678909876567890yhnjnj\",",
							"              \"SchmeNm\": {",
							"                \"Prtry\": \"MSISDN\"",
							"              }",
							"            }",
							"          },",
							"          \"Nm\": \"Bruce Summers\"",
							"        },",
							"        \"DbtrAgt\": {",
							"          \"FinInstnId\": {",
							"            \"ClrSysMmbId\": {",
							"              \"MmbId\": \"dfsp001\"",
							"            }",
							"          }",
							"        },",
							"        \"CdtrAgt\": {",
							"          \"FinInstnId\": {",
							"            \"ClrSysMmbId\": {",
							"              \"MmbId\": \"dfsp002\"",
							"            }",
							"          }",
							"        },",
							"        \"Cdtr\": {",
							"          \"Nm\": \"Geoffrey Piper Grant\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1926-09-18\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27880358989\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-880358989\"",
							"          }",
							"        },",
							"        \"CdtrAcct\": {",
							"          \"Id\": {",
							"            \"Othr\": {",
							"              \"Id\": \"+27880358989\",",
							"              \"SchmeNm\": {",
							"                \"Prtry\": \"MSISDN\"",
							"              }",
							"            }",
							"          },",
							"          \"Nm\": \"Geoffrey Grant\"",
							"        },",
							"        \"Purp\": {",
							"          \"Cd\": \"MP2P\"",
							"        }",
							"      },",
							"      \"RgltryRptg\": {",
							"        \"Dtls\": {",
							"          \"Tp\": \"BALANCE OF PAYMENTS\",",
							"          \"Cd\": \"100\"",
							"        }",
							"      },",
							"      \"RmtInf\": {",
							"        \"Ustrd\": \"Payment of USD 94767746226110000.62 from Bruce to Geoffrey\"",
							"      },",
							"      \"SplmtryData\": {",
							"        \"Envlp\": {",
							"          \"Doc\": {",
							"            \"Xprtn\": \"2021-11-18T16:52:19.000Z\"",
							"          }",
							"        }",
							"      }",
							"    }",
							"  },",
							"  {",
							"    \"TxTp\": \"pacs.008.001.10\",",
							"    \"FIToFICstmrCdt\": {",
							"      \"GrpHdr\": {",
							"        \"MsgId\": \"876543eh-394b-4b0e-b038-0zxcvbhjoiuytr\",",
							"        \"CreDtTm\": new Date(now - 10000).toISOString(),",
							"        \"NbOfTxs\": 1,",
							"        \"SttlmInf\": {",
							"          \"SttlmMtd\": \"CLRG\"",
							"        }",
							"      },",
							"      \"CdtTrfTxInf\": {",
							"        \"PmtId\": {",
							"          \"InstrId\": \"65b1547f-6fc1-4a5a-93c4-d1652df2da55\",",
							"          \"EndToEndId\": \"9eed1a3c-b407-45c8-9b97-e85571b1e1b4\"",
							"        },",
							"        \"IntrBkSttlmAmt\": {",
							"          \"Amt\": {",
							"            \"Amt\": 94205.08,",
							"            \"Ccy\": \"USD\"",
							"          }",
							"        },",
							"        \"InstdAmt\": {",
							"          \"Amt\": {",
							"            \"Amt\": 29999,",
							"            \"Ccy\": \"ZAR\"",
							"          }",
							"        },",
							"        \"ChrgBr\": \"DEBT\",",
							"        \"ChrgsInf\": {",
							"          \"Amt\": {",
							"            \"Amt\": 932.72,",
							"            \"Ccy\": \"USD\"",
							"          },",
							"          \"Agt\": {",
							"            \"FinInstnId\": {",
							"              \"ClrSysMmbId\": {",
							"                \"MmbId\": \"dfsp001\"",
							"              }",
							"            }",
							"          }",
							"        },",
							"        \"InitgPty\": {",
							"          \"Nm\": \"April Owen Russel-Klein\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1965-12-21\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27834619240\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-834619240\"",
							"          }",
							"        },",
							"        \"Dbtr\": {",
							"          \"Nm\": \"April Owen Russel-Klein\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1965-12-21\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27834619240\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-834619240\"",
							"          }",
							"        },",
							"        \"DbtrAcct\": {",
							"          \"Id\": {",
							"            \"Othr\": {",
							"              \"Id\": \"345678909876567890yhnjnj\",",
							"              \"SchmeNm\": {",
							"                \"Prtry\": \"MSISDN\"",
							"              }",
							"            }",
							"          },",
							"          \"Nm\": \"April Russel-Klein\"",
							"        },",
							"        \"DbtrAgt\": {",
							"          \"FinInstnId\": {",
							"            \"ClrSysMmbId\": {",
							"              \"MmbId\": \"dfsp001\"",
							"            }",
							"          }",
							"        },",
							"        \"CdtrAgt\": {",
							"          \"FinInstnId\": {",
							"            \"ClrSysMmbId\": {",
							"              \"MmbId\": \"dfsp002\"",
							"            }",
							"          }",
							"        },",
							"        \"Cdtr\": {",
							"          \"Nm\": \"Erica Drew Nadir\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1940-11-12\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27728170977\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-728170977\"",
							"          }",
							"        },",
							"        \"CdtrAcct\": {",
							"          \"Id\": {",
							"            \"Othr\": {",
							"              \"Id\": \"+27728170977\",",
							"              \"SchmeNm\": {",
							"                \"Prtry\": \"MSISDN\"",
							"              }",
							"            }",
							"          },",
							"          \"Nm\": \"Erica Nadir\"",
							"        },",
							"        \"Purp\": {",
							"          \"Cd\": \"MP2P\"",
							"        }",
							"      },",
							"      \"RgltryRptg\": {",
							"        \"Dtls\": {",
							"          \"Tp\": \"BALANCE OF PAYMENTS\",",
							"          \"Cd\": \"100\"",
							"        }",
							"      },",
							"      \"RmtInf\": {",
							"        \"Ustrd\": \"Payment of USD 93272.36 from April to Erica\"",
							"      },",
							"      \"SplmtryData\": {",
							"        \"Envlp\": {",
							"          \"Doc\": {",
							"            \"Xprtn\": \"2021-12-02T23:50:06.000Z\"",
							"          }",
							"        }",
							"      }",
							"    }",
							"  }",
							"];",
							"",
							"const pacs002Transactions = [{",
							"    \"TxTp\": \"pacs.002.001.12\",",
							"    \"FIToFIPmtSts\": {",
							"        \"GrpHdr\": {",
							"            \"MsgId\": \"66698065119746c5be7dfb55hgfdr56v\",",
							"            \"CreDtTm\": new Date(new Date(now - 8889220000).getTime()).toISOString()",
							"        },",
							"        \"TxInfAndSts\": {",
							"            \"OrgnlInstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",",
							"            \"OrgnlEndToEndId\": \"345678909876567890yhnjnj\",",
							"            \"TxSts\": \"ACCC\",",
							"            \"ChrgsInf\": [",
							"                {",
							"                    \"Amt\": {",
							"                        \"Amt\": 307.14,",
							"                        \"Ccy\": \"USD\"",
							"                    },",
							"                    \"Agt\": {",
							"                        \"FinInstnId\": {",
							"                            \"ClrSysMmbId\": {",
							"                                \"MmbId\": \"dfsp001\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                {",
							"                    \"Amt\": {",
							"                        \"Amt\": 153.57,",
							"                        \"Ccy\": \"USD\"",
							"                    },",
							"                    \"Agt\": {",
							"                        \"FinInstnId\": {",
							"                            \"ClrSysMmbId\": {",
							"                                \"MmbId\": \"dfsp001\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                {",
							"                    \"Amt\": {",
							"                        \"Amt\": 30.71,",
							"                        \"Ccy\": \"USD\"",
							"                    },",
							"                    \"Agt\": {",
							"                        \"FinInstnId\": {",
							"                            \"ClrSysMmbId\": {",
							"                                \"MmbId\": \"dfsp002\"",
							"                            }",
							"                        }",
							"                    }",
							"                }",
							"            ],",
							"            \"AccptncDtTm\": \"2021-12-03T15:36:16.000Z\",",
							"            \"InstgAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp001\"",
							"                    }",
							"                }",
							"            },",
							"            \"InstdAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp002\"",
							"                    }",
							"                }",
							"            }",
							"        }",
							"    }",
							"}, {",
							"    \"TxTp\": \"pacs.002.001.12\",",
							"    \"FIToFIPmtSts\": {",
							"        \"GrpHdr\": {",
							"            \"MsgId\": \"34544-73b7-11ec-90d6-0765rtfgh\",",
							"            \"CreDtTm\": new Date(new Date(now - 4900000).getTime()).toISOString()",
							"        },",
							"        \"TxInfAndSts\": {",
							"            \"OrgnlInstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",",
							"            \"OrgnlEndToEndId\": \"345678909876567890yhnjnj\",",
							"            \"TxSts\": \"ACCC\",",
							"            \"ChrgsInf\": [",
							"                {",
							"                    \"Amt\": {",
							"                        \"Amt\": 307.14,",
							"                        \"Ccy\": \"USD\"",
							"                    },",
							"                    \"Agt\": {",
							"                        \"FinInstnId\": {",
							"                            \"ClrSysMmbId\": {",
							"                                \"MmbId\": \"dfsp001\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                {",
							"                    \"Amt\": {",
							"                        \"Amt\": 153.57,",
							"                        \"Ccy\": \"USD\"",
							"                    },",
							"                    \"Agt\": {",
							"                        \"FinInstnId\": {",
							"                            \"ClrSysMmbId\": {",
							"                                \"MmbId\": \"dfsp001\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                {",
							"                    \"Amt\": {",
							"                        \"Amt\": 30.71,",
							"                        \"Ccy\": \"USD\"",
							"                    },",
							"                    \"Agt\": {",
							"                        \"FinInstnId\": {",
							"                            \"ClrSysMmbId\": {",
							"                                \"MmbId\": \"dfsp002\"",
							"                            }",
							"                        }",
							"                    }",
							"                }",
							"            ],",
							"            \"AccptncDtTm\": \"2021-12-03T15:36:16.000Z\",",
							"            \"InstgAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp001\"",
							"                    }",
							"                }",
							"            },",
							"            \"InstdAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp002\"",
							"                    }",
							"                }",
							"            }",
							"        }",
							"    }",
							"}]",
							"",
							"",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(transactions)}",
							"                    INSERT {_key: transaction.FIToFICstmrCdt.GrpHdr.MsgId, TxTp: transaction.TxTp, FIToFICstmrCdt: transaction.FIToFICstmrCdt} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/Configuration/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR config IN ${JSON.stringify(ruleConfig)}",
							"                    INSERT {_key: \"018\", id: config.id, cfg: config.cfg, config: config.config} INTO configuration",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pacs002Transactions)}",
							"                    INSERT {_key: transaction.FIToFIPmtSts.GrpHdr.MsgId, TxTp: transaction.TxTp, FIToFIPmtSts: transaction.FIToFIPmtSts} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"",
							"",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"transaction\": {\n    \"TxTp\": \"pacs.002.001.12\",\n    \"FIToFIPmtSts\": {\n      \"GrpHdr\": {\n        \"MsgID\": \"ec3a6a10-0c31-4564-94f6-ed1d79fed91f\",\n        \"CreDtTm\": \"2021-11-03T07:24:48.000Z\"\n      },\n      \"TxInfAndSts\": {\n        \"OrgnlInstrId\": \"2f68ae16-467a-4ac4-ba32-eb518646aa1d\",\n        \"OrgnlEndToEndId\": \"5036fa4f-0cb1-442c-b1a8-be0a3ce66365\",\n        \"TxSts\": \"ACSC\",\n        \"ChrgsInf\": [\n          {\n            \"Amt\": {\n              \"Amt\": \"157605510200862\",\n              \"Ccy\": \"USD\"\n            },\n            \"Agt\": {\n              \"FinInstnId\": {\n                \"ClrSysMmbId\": {\n                  \"MmbId\": \"dfsp001\"\n                }\n              }\n            }\n          },\n          {\n            \"Amt\": {\n              \"Amt\": \"15918156530287100\",\n              \"Ccy\": \"USD\"\n            },\n            \"Agt\": {\n              \"FinInstnId\": {\n                \"ClrSysMmbId\": {\n                  \"MmbId\": \"dfsp001\"\n                }\n              }\n            }\n          },\n          {\n            \"Amt\": {\n              \"Amt\": \"15918156530287100\",\n              \"Ccy\": \"USD\"\n            },\n            \"Agt\": {\n              \"FinInstnId\": {\n                \"ClrSysMmbId\": {\n                  \"MmbId\": \"dfsp002\"\n                }\n              }\n            }\n          }\n        ],\n        \"AccptncDtTm\": \"2021-11-03T07:24:47.000Z\",\n        \"InstgAgt\": {\n          \"FinInstnId\": {\n            \"ClrSysMmbId\": {\n              \"MmbId\": \"dfsp001\"\n            }\n          }\n        },\n        \"InstdAgt\": {\n          \"FinInstnId\": {\n            \"ClrSysMmbId\": {\n              \"MmbId\": \"dfsp002\"\n            }\n          }\n        }\n      }\n    }\n  },\n  \"networkMap\": {\n    \"_key\": \"26345403\",\n    \"_id\": \"networkConfiguration/26345403\",\n    \"_rev\": \"_cxc-1vO---\",\n    \"messages\": [\n       {\n            \"id\": \"004_018@1.0.0\",\n            \"host\": \"http://gateway.openfaas:8080/function/off-transaction-aggregation-decisioning-processor-rel-1-0-0\",\n            \"cfg\": \"1.0.0\",\n            \"txTp\": \"pacs.002.001.12\",\n            \"channels\": [\n                {\n                    \"id\": \"001@1.0.0\",\n                    \"host\": \"http://gateway.openfaas:8080/function/off-channel-aggregation-decisioning-processor-rel-1-0-0\",\n                    \"cfg\": \"1.0.0\",\n                    \"typologies\": [\n                        {\n                            \"id\": \"999_018@1.0.0\",\n                            \"host\": \"http://gateway.openfaas:8080/function/off-typology-processor-rel-1-0-0\",\n                            \"cfg\": \"1.0.0\",\n                            \"rules\": [\n                                {\n                                    \"id\": \"018@1.0.0\",\n                                    \"host\": \"http://gateway.openfaas:8080/function/off-rule-018-rel-1-0-0\",\n                                    \"cfg\": \"1.0.1\"\n                                }\n                            ]\n                        }\n                    ]\n                }\n            ]\n        }\n    ]\n  }\n}\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{baseUrl}}/function/off-rule-018-rel-1-0-0/execute",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"function",
						"off-rule-018-rel-1-0-0",
						"execute"
					]
				}
			},
			"response": []
		},
		{
			"name": "Test scenario 4",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const jsonData = pm.response.json();",
							"const req = JSON.parse(request.data);",
							"const arangourl = pm.environment.get('arangourl');",
							"const config = [\"018\"]",
							"const transactions = [\"4d4567-02ce-4db3-8254-e0161bytgfc6\", \"jhgfde4567-5c32-41bb-ac27-8765jhgff\", \"876543eh-394b-4b0e-b038-0zxcvbhjoiuytr\", \"66698065119746c5be7dfb55hgfdr56v\", \"34544-73b7-11ec-90d6-0765rtfgh\"]",
							"",
							"pm.test(\"should have status code of 200 \", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"should have rule result of false\", function () {",
							"    pm.expect(jsonData.ruleResult.result).to.be.eql(false);",
							"});",
							"",
							"pm.test(\"should have rule result with reason of Outgoing transfer within historical limits\", function () {",
							"    pm.expect(jsonData.ruleResult.reason).to.be.eql('Outgoing transfer within historical limits');",
							"});",
							"",
							"pm.test(\"Remove Seed Data from DB\", function () {",
							"    pm.sendRequest({",
							"        url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"        method: 'POST',",
							"        header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"        body: {",
							"            mode: 'raw',",
							"            raw: JSON.stringify({",
							"                query: `FOR transaction IN ${JSON.stringify(transactions)}",
							"                        REMOVE { _key: transaction } IN transactionHistory",
							"                        OPTIONS { ignoreErrors: true }`",
							"            })",
							"        }",
							"    })",
							"});",
							"pm.test(\"Remove Seed Data from DB\", function () {",
							"    pm.sendRequest({",
							"        url: `${arangourl}/_db/Configuration/_api/cursor`,",
							"        method: 'POST',",
							"        header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"        body: {",
							"            mode: 'raw',",
							"            raw: JSON.stringify({",
							"                query: `FOR config IN ${JSON.stringify(config)}",
							"                        REMOVE { _key: config } IN configuration",
							"                        OPTIONS { ignoreErrors: true }`",
							"            })",
							"        }",
							"    })",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"const arangourl = pm.environment.get('arangourl');",
							"const now = new Date().getTime();",
							"",
							"pm.globals.set(\"now\", new Date().toISOString());",
							"const ruleConfig = [",
							"    {",
							"    \"id\": \"018@1.0.0\",",
							"    \"cfg\": \"1.0.2\",",
							"    \"config\": {",
							"        \"timeframes\": [",
							"            {",
							"                \"threshold\": 10518972000",
							"            }",
							"        ],",
							"        \"bands\": [",
							"            {",
							"                \"subRuleRef\": \".00\",",
							"                \"outcome\": false,",
							"                \"reason\": \"Insufficient transaction history\"",
							"            },",
							"            {",
							"                \"subRuleRef\": \".01\",",
							"                \"lowerLimit\": 0,",
							"                \"upperLimit\": 2,",
							"                \"outcome\": true,",
							"                \"reason\": \"Exceptionally large outgoing transfer detected\"",
							"            },",
							"            {",
							"                \"subRuleRef\": \".02\",",
							"                \"lowerLimit\": 2,",
							"                \"outcome\": false,",
							"                \"reason\": \"Outgoing transfer within historical limits\"",
							"            }",
							"        ]",
							"    }",
							"}",
							"]",
							"",
							"const transactions = [",
							"  {",
							"    \"TxTp\": \"pacs.008.001.10\",",
							"    \"FIToFICstmrCdt\": {",
							"      \"GrpHdr\": {",
							"        \"MsgId\": \"4d4567-02ce-4db3-8254-e0161bytgfc6\",",
							"        \"CreDtTm\": new Date(now - 8889230000).toISOString(),",
							"        \"NbOfTxs\": 1,",
							"        \"SttlmInf\": {",
							"          \"SttlmMtd\": \"CLRG\"",
							"        }",
							"      },",
							"      \"CdtTrfTxInf\": {",
							"        \"PmtId\": {",
							"          \"InstrId\": \"fa2ed11e-7a2b-4fc6-a3b6-9338b6c0a503\",",
							"          \"EndToEndId\": \"5036fa4f-0cb1-442c-b1a8-be0a3ce66365\"",
							"        },",
							"        \"IntrBkSttlmAmt\": {",
							"          \"Amt\": {",
							"            \"Amt\": 74371.24,",
							"            \"Ccy\": \"USD\"",
							"          }",
							"        },",
							"        \"InstdAmt\": {",
							"          \"Amt\": {",
							"            \"Amt\": 20000,",
							"            \"Ccy\": \"ZAR\"",
							"          }",
							"        },",
							"        \"ChrgBr\": \"DEBT\",",
							"        \"ChrgsInf\": {",
							"          \"Amt\": {",
							"            \"Amt\": 736.35,",
							"            \"Ccy\": \"USD\"",
							"          },",
							"          \"Agt\": {",
							"            \"FinInstnId\": {",
							"              \"ClrSysMmbId\": {",
							"                \"MmbId\": \"dfsp001\"",
							"              }",
							"            }",
							"          }",
							"        },",
							"        \"InitgPty\": {",
							"          \"Nm\": \"Hilda Glen Grant\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1929-06-02\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27765784647\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-765784647\"",
							"          }",
							"        },",
							"        \"Dbtr\": {",
							"          \"Nm\": \"Hilda Glen Grant\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1929-06-02\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27765784647\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-765784647\"",
							"          }",
							"        },",
							"        \"DbtrAcct\": {",
							"          \"Id\": {",
							"            \"Othr\": {",
							"              \"Id\": \"345678909876567890yhnjnj\",",
							"              \"SchmeNm\": {",
							"                \"Prtry\": \"MSISDN\"",
							"              }",
							"            }",
							"          },",
							"          \"Nm\": \"Hilda Grant\"",
							"        },",
							"        \"DbtrAgt\": {",
							"          \"FinInstnId\": {",
							"            \"ClrSysMmbId\": {",
							"              \"MmbId\": \"dfsp001\"",
							"            }",
							"          }",
							"        },",
							"        \"CdtrAgt\": {",
							"          \"FinInstnId\": {",
							"            \"ClrSysMmbId\": {",
							"              \"MmbId\": \"dfsp002\"",
							"            }",
							"          }",
							"        },",
							"        \"Cdtr\": {",
							"          \"Nm\": \"Felicia Manfrey\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1965-07-04\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27827537492\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-827537492\"",
							"          }",
							"        },",
							"        \"CdtrAcct\": {",
							"          \"Id\": {",
							"            \"Othr\": {",
							"              \"Id\": \"+27827537492\",",
							"              \"SchmeNm\": {",
							"                \"Prtry\": \"MSISDN\"",
							"              }",
							"            }",
							"          },",
							"          \"Nm\": \"Felicia Manfrey\"",
							"        },",
							"        \"Purp\": {",
							"          \"Cd\": \"MP2P\"",
							"        }",
							"      },",
							"      \"RgltryRptg\": {",
							"        \"Dtls\": {",
							"          \"Tp\": \"BALANCE OF PAYMENTS\",",
							"          \"Cd\": \"100\"",
							"        }",
							"      },",
							"      \"RmtInf\": {",
							"        \"Ustrd\": \"Payment of USD 73634.89 from Hilda to Felicia\"",
							"      },",
							"      \"SplmtryData\": {",
							"        \"Envlp\": {",
							"          \"Doc\": {",
							"            \"Xprtn\": \"2021-12-02T10:10:05.000Z\"",
							"          }",
							"        }",
							"      }",
							"    }",
							"  },",
							"  {",
							"    \"TxTp\": \"pacs.008.001.10\",",
							"    \"FIToFICstmrCdt\": {",
							"      \"GrpHdr\": {",
							"        \"MsgId\": \"jhgfde4567-5c32-41bb-ac27-8765jhgff\",",
							"        \"CreDtTm\": new Date(now - 500000).toISOString(),",
							"        \"NbOfTxs\": 1,",
							"        \"SttlmInf\": {",
							"          \"SttlmMtd\": \"CLRG\"",
							"        }",
							"      },",
							"      \"CdtTrfTxInf\": {",
							"        \"PmtId\": {",
							"          \"InstrId\": \"5cb8a2db-5c32-41bb-ac27-2597125d50fd\",",
							"          \"EndToEndId\": \"5cb8a2db-5c32-41bb-ac27-2597125d50fd\"",
							"        },",
							"        \"IntrBkSttlmAmt\": {",
							"          \"Amt\": {",
							"            \"Amt\": 95715423688371100,",
							"            \"Ccy\": \"USD\"",
							"          }",
							"        },",
							"        \"InstdAmt\": {",
							"          \"Amt\": {",
							"            \"Amt\": 10000,",
							"            \"Ccy\": \"ZAR\"",
							"          }",
							"        },",
							"        \"ChrgBr\": \"DEBT\",",
							"        \"ChrgsInf\": {",
							"          \"Amt\": {",
							"            \"Amt\": 947677462261100,",
							"            \"Ccy\": \"USD\"",
							"          },",
							"          \"Agt\": {",
							"            \"FinInstnId\": {",
							"              \"ClrSysMmbId\": {",
							"                \"MmbId\": \"dfsp001\"",
							"              }",
							"            }",
							"          }",
							"        },",
							"        \"InitgPty\": {",
							"          \"Nm\": \"Bruce Drew Summers\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1942-01-24\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27757347775\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-757347775\"",
							"          }",
							"        },",
							"        \"Dbtr\": {",
							"          \"Nm\": \"Bruce Drew Summers\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1942-01-24\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27757347775\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-757347775\"",
							"          }",
							"        },",
							"        \"DbtrAcct\": {",
							"          \"Id\": {",
							"            \"Othr\": {",
							"              \"Id\": \"345678909876567890yhnjnj\",",
							"              \"SchmeNm\": {",
							"                \"Prtry\": \"MSISDN\"",
							"              }",
							"            }",
							"          },",
							"          \"Nm\": \"Bruce Summers\"",
							"        },",
							"        \"DbtrAgt\": {",
							"          \"FinInstnId\": {",
							"            \"ClrSysMmbId\": {",
							"              \"MmbId\": \"dfsp001\"",
							"            }",
							"          }",
							"        },",
							"        \"CdtrAgt\": {",
							"          \"FinInstnId\": {",
							"            \"ClrSysMmbId\": {",
							"              \"MmbId\": \"dfsp002\"",
							"            }",
							"          }",
							"        },",
							"        \"Cdtr\": {",
							"          \"Nm\": \"Geoffrey Piper Grant\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1926-09-18\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27880358989\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-880358989\"",
							"          }",
							"        },",
							"        \"CdtrAcct\": {",
							"          \"Id\": {",
							"            \"Othr\": {",
							"              \"Id\": \"+27880358989\",",
							"              \"SchmeNm\": {",
							"                \"Prtry\": \"MSISDN\"",
							"              }",
							"            }",
							"          },",
							"          \"Nm\": \"Geoffrey Grant\"",
							"        },",
							"        \"Purp\": {",
							"          \"Cd\": \"MP2P\"",
							"        }",
							"      },",
							"      \"RgltryRptg\": {",
							"        \"Dtls\": {",
							"          \"Tp\": \"BALANCE OF PAYMENTS\",",
							"          \"Cd\": \"100\"",
							"        }",
							"      },",
							"      \"RmtInf\": {",
							"        \"Ustrd\": \"Payment of USD 94767746226110000.62 from Bruce to Geoffrey\"",
							"      },",
							"      \"SplmtryData\": {",
							"        \"Envlp\": {",
							"          \"Doc\": {",
							"            \"Xprtn\": \"2021-11-18T16:52:19.000Z\"",
							"          }",
							"        }",
							"      }",
							"    }",
							"  },",
							"  {",
							"    \"TxTp\": \"pacs.008.001.10\",",
							"    \"FIToFICstmrCdt\": {",
							"      \"GrpHdr\": {",
							"        \"MsgId\": \"876543eh-394b-4b0e-b038-0zxcvbhjoiuytr\",",
							"        \"CreDtTm\": new Date(now - 10000).toISOString(),",
							"        \"NbOfTxs\": 1,",
							"        \"SttlmInf\": {",
							"          \"SttlmMtd\": \"CLRG\"",
							"        }",
							"      },",
							"      \"CdtTrfTxInf\": {",
							"        \"PmtId\": {",
							"          \"InstrId\": \"65b1547f-6fc1-4a5a-93c4-d1652df2da55\",",
							"          \"EndToEndId\": \"9eed1a3c-b407-45c8-9b97-e85571b1e1b4\"",
							"        },",
							"        \"IntrBkSttlmAmt\": {",
							"          \"Amt\": {",
							"            \"Amt\": 94205.08,",
							"            \"Ccy\": \"USD\"",
							"          }",
							"        },",
							"        \"InstdAmt\": {",
							"          \"Amt\": {",
							"            \"Amt\": 29999,",
							"            \"Ccy\": \"ZAR\"",
							"          }",
							"        },",
							"        \"ChrgBr\": \"DEBT\",",
							"        \"ChrgsInf\": {",
							"          \"Amt\": {",
							"            \"Amt\": 932.72,",
							"            \"Ccy\": \"USD\"",
							"          },",
							"          \"Agt\": {",
							"            \"FinInstnId\": {",
							"              \"ClrSysMmbId\": {",
							"                \"MmbId\": \"dfsp001\"",
							"              }",
							"            }",
							"          }",
							"        },",
							"        \"InitgPty\": {",
							"          \"Nm\": \"April Owen Russel-Klein\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1965-12-21\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27834619240\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-834619240\"",
							"          }",
							"        },",
							"        \"Dbtr\": {",
							"          \"Nm\": \"April Owen Russel-Klein\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1965-12-21\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27834619240\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-834619240\"",
							"          }",
							"        },",
							"        \"DbtrAcct\": {",
							"          \"Id\": {",
							"            \"Othr\": {",
							"              \"Id\": \"345678909876567890yhnjnj\",",
							"              \"SchmeNm\": {",
							"                \"Prtry\": \"MSISDN\"",
							"              }",
							"            }",
							"          },",
							"          \"Nm\": \"April Russel-Klein\"",
							"        },",
							"        \"DbtrAgt\": {",
							"          \"FinInstnId\": {",
							"            \"ClrSysMmbId\": {",
							"              \"MmbId\": \"dfsp001\"",
							"            }",
							"          }",
							"        },",
							"        \"CdtrAgt\": {",
							"          \"FinInstnId\": {",
							"            \"ClrSysMmbId\": {",
							"              \"MmbId\": \"dfsp002\"",
							"            }",
							"          }",
							"        },",
							"        \"Cdtr\": {",
							"          \"Nm\": \"Erica Drew Nadir\",",
							"          \"Id\": {",
							"            \"PrvtId\": {",
							"              \"DtAndPlcOfBirth\": {",
							"                \"BirthDt\": \"1940-11-12\",",
							"                \"CityOfBirth\": \"Unknown\",",
							"                \"CtryOfBirth\": \"ZZ\"",
							"              },",
							"              \"Othr\": {",
							"                \"Id\": \"+27728170977\",",
							"                \"SchmeNm\": {",
							"                  \"Prtry\": \"MSISDN\"",
							"                }",
							"              }",
							"            }",
							"          },",
							"          \"CtctDtls\": {",
							"            \"MobNb\": \"+27-728170977\"",
							"          }",
							"        },",
							"        \"CdtrAcct\": {",
							"          \"Id\": {",
							"            \"Othr\": {",
							"              \"Id\": \"+27728170977\",",
							"              \"SchmeNm\": {",
							"                \"Prtry\": \"MSISDN\"",
							"              }",
							"            }",
							"          },",
							"          \"Nm\": \"Erica Nadir\"",
							"        },",
							"        \"Purp\": {",
							"          \"Cd\": \"MP2P\"",
							"        }",
							"      },",
							"      \"RgltryRptg\": {",
							"        \"Dtls\": {",
							"          \"Tp\": \"BALANCE OF PAYMENTS\",",
							"          \"Cd\": \"100\"",
							"        }",
							"      },",
							"      \"RmtInf\": {",
							"        \"Ustrd\": \"Payment of USD 93272.36 from April to Erica\"",
							"      },",
							"      \"SplmtryData\": {",
							"        \"Envlp\": {",
							"          \"Doc\": {",
							"            \"Xprtn\": \"2021-12-02T23:50:06.000Z\"",
							"          }",
							"        }",
							"      }",
							"    }",
							"  }",
							"];",
							"",
							"const pacs002Transactions = [{",
							"    \"TxTp\": \"pacs.002.001.12\",",
							"    \"FIToFIPmtSts\": {",
							"        \"GrpHdr\": {",
							"            \"MsgId\": \"66698065119746c5be7dfb55hgfdr56v\",",
							"            \"CreDtTm\": new Date(new Date(now - 8889220000).getTime()).toISOString()",
							"        },",
							"        \"TxInfAndSts\": {",
							"            \"OrgnlInstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",",
							"            \"OrgnlEndToEndId\": \"345678909876567890yhnjnj\",",
							"            \"TxSts\": \"ACCC\",",
							"            \"ChrgsInf\": [",
							"                {",
							"                    \"Amt\": {",
							"                        \"Amt\": 307.14,",
							"                        \"Ccy\": \"USD\"",
							"                    },",
							"                    \"Agt\": {",
							"                        \"FinInstnId\": {",
							"                            \"ClrSysMmbId\": {",
							"                                \"MmbId\": \"dfsp001\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                {",
							"                    \"Amt\": {",
							"                        \"Amt\": 153.57,",
							"                        \"Ccy\": \"USD\"",
							"                    },",
							"                    \"Agt\": {",
							"                        \"FinInstnId\": {",
							"                            \"ClrSysMmbId\": {",
							"                                \"MmbId\": \"dfsp001\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                {",
							"                    \"Amt\": {",
							"                        \"Amt\": 30.71,",
							"                        \"Ccy\": \"USD\"",
							"                    },",
							"                    \"Agt\": {",
							"                        \"FinInstnId\": {",
							"                            \"ClrSysMmbId\": {",
							"                                \"MmbId\": \"dfsp002\"",
							"                            }",
							"                        }",
							"                    }",
							"                }",
							"            ],",
							"            \"AccptncDtTm\": \"2021-12-03T15:36:16.000Z\",",
							"            \"InstgAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp001\"",
							"                    }",
							"                }",
							"            },",
							"            \"InstdAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp002\"",
							"                    }",
							"                }",
							"            }",
							"        }",
							"    }",
							"}, {",
							"    \"TxTp\": \"pacs.002.001.12\",",
							"    \"FIToFIPmtSts\": {",
							"        \"GrpHdr\": {",
							"            \"MsgId\": \"34544-73b7-11ec-90d6-0765rtfgh\",",
							"            \"CreDtTm\": new Date(new Date(now - 4900000).getTime()).toISOString()",
							"        },",
							"        \"TxInfAndSts\": {",
							"            \"OrgnlInstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",",
							"            \"OrgnlEndToEndId\": \"345678909876567890yhnjnj\",",
							"            \"TxSts\": \"ACCC\",",
							"            \"ChrgsInf\": [",
							"                {",
							"                    \"Amt\": {",
							"                        \"Amt\": 307.14,",
							"                        \"Ccy\": \"USD\"",
							"                    },",
							"                    \"Agt\": {",
							"                        \"FinInstnId\": {",
							"                            \"ClrSysMmbId\": {",
							"                                \"MmbId\": \"dfsp001\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                {",
							"                    \"Amt\": {",
							"                        \"Amt\": 153.57,",
							"                        \"Ccy\": \"USD\"",
							"                    },",
							"                    \"Agt\": {",
							"                        \"FinInstnId\": {",
							"                            \"ClrSysMmbId\": {",
							"                                \"MmbId\": \"dfsp001\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                {",
							"                    \"Amt\": {",
							"                        \"Amt\": 30.71,",
							"                        \"Ccy\": \"USD\"",
							"                    },",
							"                    \"Agt\": {",
							"                        \"FinInstnId\": {",
							"                            \"ClrSysMmbId\": {",
							"                                \"MmbId\": \"dfsp002\"",
							"                            }",
							"                        }",
							"                    }",
							"                }",
							"            ],",
							"            \"AccptncDtTm\": \"2021-12-03T15:36:16.000Z\",",
							"            \"InstgAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp001\"",
							"                    }",
							"                }",
							"            },",
							"            \"InstdAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp002\"",
							"                    }",
							"                }",
							"            }",
							"        }",
							"    }",
							"}]",
							"",
							"",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(transactions)}",
							"                    INSERT {_key: transaction.FIToFICstmrCdt.GrpHdr.MsgId, TxTp: transaction.TxTp, FIToFICstmrCdt: transaction.FIToFICstmrCdt} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/Configuration/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR config IN ${JSON.stringify(ruleConfig)}",
							"                    INSERT {_key: \"018\", id: config.id, cfg: config.cfg, config: config.config} INTO configuration",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pacs002Transactions)}",
							"                    INSERT {_key: transaction.FIToFIPmtSts.GrpHdr.MsgId, TxTp: transaction.TxTp, FIToFIPmtSts: transaction.FIToFIPmtSts} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"",
							"",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"transaction\": {\n    \"TxTp\": \"pacs.002.001.12\",\n    \"FIToFIPmtSts\": {\n      \"GrpHdr\": {\n        \"MsgID\": \"ec3a6a10-0c31-4564-94f6-ed1d79fed91f\",\n        \"CreDtTm\": \"2021-11-03T07:24:48.000Z\"\n      },\n      \"TxInfAndSts\": {\n        \"OrgnlInstrId\": \"2f68ae16-467a-4ac4-ba32-eb518646aa1d\",\n        \"OrgnlEndToEndId\": \"5036fa4f-0cb1-442c-b1a8-be0a3ce66365\",\n        \"TxSts\": \"ACSC\",\n        \"ChrgsInf\": [\n          {\n            \"Amt\": {\n              \"Amt\": \"157605510200862\",\n              \"Ccy\": \"USD\"\n            },\n            \"Agt\": {\n              \"FinInstnId\": {\n                \"ClrSysMmbId\": {\n                  \"MmbId\": \"dfsp001\"\n                }\n              }\n            }\n          },\n          {\n            \"Amt\": {\n              \"Amt\": \"15918156530287100\",\n              \"Ccy\": \"USD\"\n            },\n            \"Agt\": {\n              \"FinInstnId\": {\n                \"ClrSysMmbId\": {\n                  \"MmbId\": \"dfsp001\"\n                }\n              }\n            }\n          },\n          {\n            \"Amt\": {\n              \"Amt\": \"15918156530287100\",\n              \"Ccy\": \"USD\"\n            },\n            \"Agt\": {\n              \"FinInstnId\": {\n                \"ClrSysMmbId\": {\n                  \"MmbId\": \"dfsp002\"\n                }\n              }\n            }\n          }\n        ],\n        \"AccptncDtTm\": \"2021-11-03T07:24:47.000Z\",\n        \"InstgAgt\": {\n          \"FinInstnId\": {\n            \"ClrSysMmbId\": {\n              \"MmbId\": \"dfsp001\"\n            }\n          }\n        },\n        \"InstdAgt\": {\n          \"FinInstnId\": {\n            \"ClrSysMmbId\": {\n              \"MmbId\": \"dfsp002\"\n            }\n          }\n        }\n      }\n    }\n  },\n  \"networkMap\": {\n    \"_key\": \"26345403\",\n    \"_id\": \"networkConfiguration/26345403\",\n    \"_rev\": \"_cxc-1vO---\",\n    \"messages\": [\n       {\n            \"id\": \"004_018@1.0.0\",\n            \"host\": \"http://gateway.openfaas:8080/function/off-transaction-aggregation-decisioning-processor-rel-1-0-0\",\n            \"cfg\": \"1.0.0\",\n            \"txTp\": \"pacs.002.001.12\",\n            \"channels\": [\n                {\n                    \"id\": \"001@1.0.0\",\n                    \"host\": \"http://gateway.openfaas:8080/function/off-channel-aggregation-decisioning-processor-rel-1-0-0\",\n                    \"cfg\": \"1.0.0\",\n                    \"typologies\": [\n                        {\n                            \"id\": \"999_018@1.0.0\",\n                            \"host\": \"http://gateway.openfaas:8080/function/off-typology-processor-rel-1-0-0\",\n                            \"cfg\": \"1.0.0\",\n                            \"rules\": [\n                                {\n                                    \"id\": \"018@1.0.0\",\n                                    \"host\": \"http://gateway.openfaas:8080/function/off-rule-018-rel-1-0-0\",\n                                    \"cfg\": \"1.0.2\"\n                                }\n                            ]\n                        }\n                    ]\n                }\n            ]\n        }\n    ]\n  }\n}\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{baseUrl}}/function/off-rule-018-rel-1-0-0/execute",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"function",
						"off-rule-018-rel-1-0-0",
						"execute"
					]
				}
			},
			"response": []
		}
	],
	"variable": [
		{
			"key": "transactionID",
			"value": ""
		},
		{
			"key": "EndToEndId",
			"value": ""
		}
	]
}
