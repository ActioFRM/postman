{
	"info": {
		"_postman_id": "2ea71193-a1de-4570-84b5-b10072ad3f17",
		"name": "Rule017 Tests",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "e2e pacs 002",
			"item": [
				{
					"name": "transaction 1",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const jsonData = pm.response.json();",
									"var req = JSON.parse(request.data);",
									"",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"should not have errors\", function () {",
									"    pm.expect(jsonData).not.to.have.property('errors')",
									"});",
									"",
									"pm.test(\"should be a valid transaction\", function () {",
									"    pm.expect(jsonData.message).to.eql(\"Transaction is valid\");",
									"});",
									"",
									"pm.test(\"should send to data preparation successfully\", function () {",
									"    pm.expect(jsonData.sent).to.eql(true);",
									"});",
									"",
									"pm.test(\"should have the same outgoing and incoming json\", function () {",
									"    pm.expect(jsonData.data).to.eql(req);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"\r",
									"var uuid = require('uuid');\r",
									"var myUUID = uuid.v4();\r",
									"pm.collectionVariables.set(\"transactionID\", myUUID.slice(-32));\r",
									"\r",
									"const msgId = pm.collectionVariables.get(\"transactionID\");\r",
									"const arangourl = pm.environment.get('arangourl');\r",
									"\r",
									"pm.sendRequest({\r",
									"    url: `${arangourl}/_db/networkmap/_api/cursor`,\r",
									"    method: 'POST',\r",
									"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },\r",
									"    body: {\r",
									"        mode: 'raw',\r",
									"        raw: JSON.stringify({\r",
									"            query: `FOR doc IN networkConfiguration\r",
									"                    FILTER doc.active == true\r",
									"                    UPDATE doc WITH { active: false } IN networkConfiguration`\r",
									"        })\r",
									"    }\r",
									"});\r",
									"\r",
									"const ruleConfig = [\r",
									"   {\r",
									"    \"id\": \"017@1.0.0\",\r",
									"    \"cfg\": \"1.0.2\",\r",
									"    \"config\": {\r",
									"        \"timeframes\": [\r",
									"            {\r",
									"                \"threshold\": 28800000\r",
									"            }\r",
									"        ],\r",
									"        \"bands\": [\r",
									"            {\r",
									"                \"subRuleRef\": \".01\",\r",
									"                \"lowerLimit\": 6,\r",
									"                \"outcome\": true,\r",
									"                \"reason\": \"Transaction divergence detected on source account\"\r",
									"            },\r",
									"            {\r",
									"                \"subRuleRef\": \".00\",\r",
									"                \"upperLimit\": 6,\r",
									"                \"outcome\": false,\r",
									"                \"reason\": \"No Transaction divergence detected on source account\"\r",
									"            }\r",
									"        ]\r",
									"    }\r",
									"}\r",
									"]\r",
									"\r",
									"let e2eID = JSON.stringify(msgId);\r",
									"e2eID = e2eID.replace(\"\\\"\", \"'\")\r",
									"e2eID = e2eID.replace(\"\\\"\", \"'\")\r",
									"pm.collectionVariables.set(\"EndToEndId\", e2eID);\r",
									"\r",
									"const networkMaps = [\r",
									"{   \"key\": \"017\",\r",
									"    \"active\":true,\r",
									"    \"cfg\": \"1.0.0\",\r",
									"    \"messages\": [\r",
									"       {\r",
									"            \"id\": \"004_017@1.0.0\",\r",
									"            \"host\": \"http://gateway.openfaas:8080/function/off-transaction-aggregation-decisioning-processor-rel-1-0-0\",\r",
									"            \"cfg\": \"1.0.0\",\r",
									"            \"txTp\": \"pacs.002.001.12\",\r",
									"            \"channels\": [\r",
									"                {\r",
									"                    \"id\": \"001@1.0.0\",\r",
									"                    \"host\": \"http://gateway.openfaas:8080/function/off-channel-aggregation-decisioning-processor-rel-1-0-0\",\r",
									"                    \"cfg\": \"1.0.0\",\r",
									"                    \"typologies\": [\r",
									"                        {\r",
									"                            \"id\": \"999_017@1.0.0\",\r",
									"                            \"host\": \"http://gateway.openfaas:8080/function/off-typology-processor-rel-1-0-0\",\r",
									"                            \"cfg\": \"1.0.0\",\r",
									"                            \"rules\": [\r",
									"                                {\r",
									"                                    \"id\": \"017@1.0.0\",\r",
									"                                    \"host\": \"http://gateway.openfaas:8080/function/off-rule-017-rel-1-0-0\",\r",
									"                                    \"cfg\": \"1.0.2\"\r",
									"                                }\r",
									"                            ]\r",
									"                        }\r",
									"                    ]\r",
									"                }\r",
									"            ]\r",
									"        }        \r",
									"      ]\r",
									"    }\r",
									"]\r",
									"\r",
									"setTimeout(checkStatusCode, 2000);\r",
									"\r",
									"    function checkStatusCode() {\r",
									"\r",
									"       pm.sendRequest({\r",
									"    url: `${arangourl}/_db/networkmap/_api/cursor`,\r",
									"    method: 'POST',\r",
									"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },\r",
									"    body: {\r",
									"        mode: 'raw',\r",
									"        raw: JSON.stringify({\r",
									"            query: `FOR networkmap IN ${JSON.stringify(networkMaps)}\r",
									"                    INSERT {_id: networkmap._id, _key: networkmap.key, active: networkmap.active, cfg: networkmap.cfg, messages: networkmap.messages} INTO networkConfiguration\r",
									"                    OPTIONS { overwrite: true }`\r",
									"        })\r",
									"    }\r",
									"});\r",
									"    }\r",
									"\r",
									"pm.sendRequest({\r",
									"    url: `${arangourl}/_db/Configuration/_api/cursor`,\r",
									"    method: 'POST',\r",
									"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },\r",
									"    body: {\r",
									"        mode: 'raw',\r",
									"        raw: JSON.stringify({\r",
									"            query: `FOR config IN ${JSON.stringify(ruleConfig)}\r",
									"                    INSERT {_key: \"016\", id: config.id, cfg: config.cfg, config: config.config} INTO configuration\r",
									"                    OPTIONS { overwrite: true }`\r",
									"        })\r",
									"    }\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"TxTp\": \"pacs.002.001.12\",\n  \"FIToFIPmtSts\": {\n    \"GrpHdr\": {\n      \"MsgId\": \"{{transactionID}}\",\n      \"CreDtTm\": \"2021-11-03T07:24:48.000Z\"\n    },\n    \"TxInfAndSts\": {\n      \"OrgnlInstrId\": \"2f68ae16-467a-4ac4-ba32-eb5\",\n      \"OrgnlEndToEndId\": \"{{transactionID}}\",\n      \"TxSts\": \"ACCC\",\n      \"ChrgsInf\": [\n        {\n          \"Amt\": {\n            \"Amt\": 157605510200862,\n            \"Ccy\": \"USD\"\n          },\n          \"Agt\": {\n            \"FinInstnId\": {\n              \"ClrSysMmbId\": {\n                \"MmbId\": \"dfsp001\"\n              }\n            }\n          }\n        },\n        {\n          \"Amt\": {\n            \"Amt\": 15918156530287100,\n            \"Ccy\": \"USD\"\n          },\n          \"Agt\": {\n            \"FinInstnId\": {\n              \"ClrSysMmbId\": {\n                \"MmbId\": \"dfsp001\"\n              }\n            }\n          }\n        },\n        {\n          \"Amt\": {\n            \"Amt\": 15918156530287100,\n            \"Ccy\": \"USD\"\n          },\n          \"Agt\": {\n            \"FinInstnId\": {\n              \"ClrSysMmbId\": {\n                \"MmbId\": \"dfsp002\"\n              }\n            }\n          }\n        }\n      ],\n      \"AccptncDtTm\": \"2021-11-03T07:24:47.000Z\",\n      \"InstgAgt\": {\n        \"FinInstnId\": {\n          \"ClrSysMmbId\": {\n            \"MmbId\": \"dfsp001\"\n          }\n        }\n      },\n      \"InstdAgt\": {\n        \"FinInstnId\": {\n          \"ClrSysMmbId\": {\n            \"MmbId\": \"dfsp002\"\n          }\n        }\n      }\n    }\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/function/off-transaction-monitoring-service{{version}}/transfer-response",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"function",
								"off-transaction-monitoring-service{{version}}",
								"transfer-response"
							]
						}
					},
					"response": []
				},
				{
					"name": "Arango db check transaction 1",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"\r",
									"setTimeout(checkStatusCode, 5000);\r",
									"\r",
									"    function checkStatusCode() {\r",
									"\r",
									"        pm.sendRequest('https://postman-echo.com/get', function (err, res) {\r",
									"\r",
									"            tests['status code should be 200']= res.code ===200;\r",
									"\r",
									"        });\r",
									"    }var Header = require('postman-collection').Header;\r",
									"pm.request.headers.append(Header.create(`Bearer ${pm.globals.get(\"arangoToken\")}`, 'Authorization'));\r",
									"console.log(\"received end to end id for above request \",pm.collectionVariables.get(\"EndToEndId\")); \r",
									"\r",
									"pm.environment.set(\"query\", JSON.stringify(\r",
									"      `\r",
									"      for transaction In transactions\r",
									"       FILTER transaction.transaction.FIToFIPmtSts.GrpHdr.MsgId == \r",
									"       `+pm.collectionVariables.get(\"EndToEndId\")+`\r",
									"       return transaction ` \r",
									"));\r",
									"\r",
									"console.log(pm.environment.get(\"query\"))\r",
									" "
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();\r",
									"var req = JSON.parse(request.data);\r",
									"\r",
									"\r",
									"pm.test(\"Status code is 201\", function () {\r",
									"    pm.response.to.have.status(201);\r",
									"});\r",
									"\r",
									"pm.test(\"check that there is actual data received back \", function () {\r",
									"    pm.expect(jsonData.result).to.not.eql([]);\r",
									"    pm.expect(jsonData.result[0].networkMap.cfg).to.eql('1.0.0');\r",
									"});\r",
									"\r",
									"pm.test(\"check that the report status is NALT \", function () {\r",
									"    pm.expect(jsonData.result[0].report.status).to.eql(\"NALT\")\r",
									"    pm.expect(jsonData.result[0].report.tadpResult.channelResult[0].typologyResult[0].ruleResults[0].result).to.eql(false);\r",
									"    pm.expect(jsonData.result[0].report.tadpResult.channelResult[0].typologyResult[0].ruleResults[0].subRuleRef).to.eql(\".00\");\r",
									"    pm.expect(jsonData.result[0].report.tadpResult.channelResult[0].typologyResult[0].ruleResults[0].reason).to.eql(\"No Transaction divergence detected on source account\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"query\": \"for transaction In transactions FILTER transaction.transaction.FIToFIPmtSts.GrpHdr.MsgId ==  {{EndToEndId}} return transaction \"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{arangourl}}/_db/transactionHistory/_api/cursor",
							"host": [
								"{{arangourl}}"
							],
							"path": [
								"_db",
								"transactionHistory",
								"_api",
								"cursor"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Test Scenario 1",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"pm.globals.set(\"now\", new Date().toISOString());",
							"",
							"const now = new Date().getTime();",
							"const arangourl = pm.environment.get('arangourl');",
							"",
							"const ruleConfig = [",
							"    {",
							"  \"id\": \"017@1.0.0\",",
							"  \"cfg\": \"1.0.0\",",
							"  \"config\": {",
							"    \"timeframes\": [",
							"      {",
							"        \"threshold\": 28800000",
							"      }",
							"    ],",
							"    \"bands\": [",
							"      {",
							"        \"subRuleRef\": \".01\",",
							"        \"lowerLimit\": 5,",
							"        \"outcome\": true,",
							"        \"reason\": \"Transaction divergence detected on source account\"",
							"      },",
							"      {",
							"        \"subRuleRef\": \".00\",",
							"        \"upperLimit\": 5,",
							"        \"outcome\": false,",
							"        \"reason\": \"No Transaction divergence detected on source account\"",
							"      }",
							"    ]",
							"  }",
							"}",
							"]",
							"const pacs008Transactions = [{",
							"    \"TxTp\": \"pacs.008.001.10\",",
							"    \"FIToFICstmrCdt\": {",
							"        \"GrpHdr\": {",
							"            \"MsgId\": \"96ae98292ec04bf29b5d40ba99864c38\",",
							"            \"CreDtTm\": new Date(new Date(now - 10000).getTime()).toISOString(),",
							"            \"NbOfTxs\": 1,",
							"            \"SttlmInf\": {",
							"                \"SttlmMtd\": \"CLRG\"",
							"            }",
							"        },",
							"        \"CdtTrfTxInf\": {",
							"            \"PmtId\": {",
							"                \"InstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",",
							"                \"EndToEndId\": \"2c516801007642dfb892944dde1cf845\"",
							"            },",
							"            \"IntrBkSttlmAmt\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 31020.89,",
							"                    \"Ccy\": \"USD\"",
							"                }",
							"            },",
							"            \"InstdAmt\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 31020.89,",
							"                    \"Ccy\": \"USD\"",
							"                }",
							"            },",
							"            \"ChrgBr\": \"DEBT\",",
							"            \"ChrgsInf\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 307.14,",
							"                    \"Ccy\": \"USD\"",
							"                },",
							"                \"Agt\": {",
							"                    \"FinInstnId\": {",
							"                        \"ClrSysMmbId\": {",
							"                            \"MmbId\": \"dfsp001\"",
							"                        }",
							"                    }",
							"                }",
							"            },",
							"            \"InitgPty\": {",
							"                \"Nm\": \"April Blake Grant\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1968-02-01\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27730975224\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-730975224\"",
							"                }",
							"            },",
							"            \"Dbtr\": {",
							"                \"Nm\": \"April Blake Grant\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1968-02-01\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27730975224\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-730975224\"",
							"                }",
							"            },",
							"            \"DbtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"PSEUDO\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Nm\": \"April Grant\"",
							"            },",
							"            \"DbtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp001\"",
							"                    }",
							"                }",
							"            },",
							"            \"CdtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp002\"",
							"                    }",
							"                }",
							"            },",
							"            \"Cdtr\": {",
							"                \"Nm\": \"Felicia Easton Quill\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1935-05-08\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27707650428\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-707650428\"",
							"                }",
							"            },",
							"            \"CdtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"efdafefdee55c7a1e5eba4ccc0f01639dc37a020241b20495378f5a1343985b4\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"PSEUDO\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Nm\": \"Felicia Quill\"",
							"            },",
							"            \"Purp\": {",
							"                \"Cd\": \"MP2P\"",
							"            }",
							"        },",
							"        \"RgltryRptg\": {",
							"            \"Dtls\": {",
							"                \"Tp\": \"BALANCE OF PAYMENTS\",",
							"                \"Cd\": \"100\"",
							"            }",
							"        },",
							"        \"RmtInf\": {",
							"            \"Ustrd\": \"Payment of USD 30713.75 from April to Felicia\"",
							"        },",
							"        \"SplmtryData\": {",
							"            \"Envlp\": {",
							"                \"Doc\": {",
							"                    \"Xprtn\": \"2021-11-30T10:38:56.000Z\"",
							"                }",
							"            }",
							"        }",
							"    }",
							"}]",
							"",
							"const pain001Transactions = [{",
							"   \"TxTp\":\"pain.001.001.11\",",
							"   \"CstmrCdtTrfInitn\":{",
							"      \"GrpHdr\":{",
							"         \"MsgId\":\"d7baf66c-73b7-11ec-90d6-0242ac120003\",",
							"         \"CreDtTm\": new Date(new Date(now - 30000).getTime()).toISOString(),",
							"         \"NbOfTxs\":1,",
							"         \"InitgPty\":{",
							"            \"Nm\":\"Ivan Reese Russel-Klein\",",
							"            \"Id\":{",
							"               \"PrvtId\":{",
							"                  \"DtAndPlcOfBirth\":{",
							"                     \"BirthDt\":\"1967-11-23\",",
							"                     \"CityOfBirth\":\"Unknown\",",
							"                     \"CtryOfBirth\":\"ZZ\"",
							"                  },",
							"                  \"Othr\":{",
							"                     \"Id\":\"\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               }",
							"            },",
							"            \"CtctDtls\":{",
							"               \"MobNb\":\"\"",
							"            }",
							"         }",
							"      },",
							"      \"PmtInf\":{",
							"         \"PmtInfId\":\"b51ec534-ee48-4575-b6a9-ead2955b8069\",",
							"         \"PmtMtd\":\"TRA\",",
							"         \"ReqdAdvcTp\":{",
							"            \"DbtAdvc\":{",
							"               \"Cd\":\"ADWD\",",
							"               \"Prtry\":\"Advice with transaction details\"",
							"            }",
							"         },",
							"         \"ReqdExctnDt\":{",
							"            \"Dt\":\"2021-10-07\",",
							"            \"DtTm\":\"2021-10-07T09:25:31.000Z\"",
							"         },",
							"         \"Dbtr\":{",
							"            \"Nm\":\"Ivan Reese Russel-Klein\",",
							"            \"Id\":{",
							"               \"PrvtId\":{",
							"                  \"DtAndPlcOfBirth\":{",
							"                     \"BirthDt\":\"1967-11-23\",",
							"                     \"CityOfBirth\":\"Unknown\",",
							"                     \"CtryOfBirth\":\"ZZ\"",
							"                  },",
							"                  \"Othr\":{",
							"                     \"Id\":\"\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               }",
							"            },",
							"            \"CtctDtls\":{",
							"               \"MobNb\":\"\"",
							"            }",
							"         },",
							"         \"DbtrAcct\":{",
							"            \"Id\":{",
							"               \"Othr\":{",
							"                  \"Id\":\"\",",
							"                  \"SchmeNm\":{",
							"                     \"Prtry\":\"PASSPORT\"",
							"                  }",
							"               }",
							"            },",
							"            \"Nm\":\"Ivan Russel-Klein\"",
							"         },",
							"         \"DbtrAgt\":{",
							"            \"FinInstnId\":{",
							"               \"ClrSysMmbId\":{",
							"                  \"MmbId\":\"dfsp001\"",
							"               }",
							"            }",
							"         },",
							"         \"CdtTrfTxInf\":{",
							"            \"PmtId\":{",
							"               \"EndToEndId\":\"2c516801007642dfb892944dde1cf845\"",
							"            },",
							"            \"PmtTpInf\":{",
							"               \"CtgyPurp\":{",
							"                  \"Prtry\":\"TRANSFER\"",
							"               }",
							"            },",
							"            \"Amt\":{",
							"               \"InstdAmt\":{",
							"                  \"Amt\":{",
							"                     \"Amt\":\"50431891779910900\",",
							"                     \"Ccy\":\"USD\"",
							"                  }",
							"               },",
							"               \"EqvtAmt\":{",
							"                  \"Amt\":{",
							"                     \"Amt\":\"50431891779910900\",",
							"                     \"Ccy\":\"USD\"",
							"                  },",
							"                  \"CcyOfTrf\":\"USD\"",
							"               }",
							"            },",
							"            \"ChrgBr\":\"DEBT\",",
							"            \"CdtrAgt\":{",
							"               \"FinInstnId\":{",
							"                  \"ClrSysMmbId\":{",
							"                     \"MmbId\":\"dfsp002\"",
							"                  }",
							"               }",
							"            },",
							"            \"Cdtr\":{",
							"               \"Nm\":\"\",",
							"               \"Id\":{",
							"                  \"PrvtId\":{",
							"                     \"DtAndPlcOfBirth\":{",
							"                        \"BirthDt\":\"1923-04-26\",",
							"                        \"CityOfBirth\":\"\",",
							"                        \"CtryOfBirth\":\"\"",
							"                     },",
							"                     \"Othr\":{",
							"                        \"Id\":\"\",",
							"                        \"SchmeNm\":{",
							"                           \"Prtry\":\"MSISDN\"",
							"                        }",
							"                     }",
							"                  }",
							"               },",
							"               \"CtctDtls\":{",
							"                  \"MobNb\":\"\"",
							"               }",
							"            },",
							"            \"CdtrAcct\":{",
							"               \"Id\":{",
							"                  \"Othr\":{",
							"                     \"Id\":\"03aeae97e5e2263c8c22bc0dec615b13ee6c90b6cf2dc0ffee72bcce9c66a14c\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               },",
							"               \"Nm\":\"April Adamson\"",
							"            },",
							"            \"Purp\":{",
							"               \"Cd\":\"MP2P\"",
							"            },",
							"            \"RgltryRptg\":{",
							"               \"Dtls\":{",
							"                  \"Tp\":\"BALANCE OF PAYMENTS\",",
							"                  \"Cd\":\"100\"",
							"               }",
							"            },",
							"            \"RmtInf\":{",
							"               \"Ustrd\":\"Payment of USD 49932566118723700.89 from Ivan to April\"",
							"            },",
							"            \"SplmtryData\":{",
							"               \"Envlp\":{",
							"                  \"Doc\":{",
							"                     \"Cdtr\":{",
							"                        \"FrstNm\":\"Ivan\",",
							"                        \"MddlNm\":\"Reese\",",
							"                        \"LastNm\":\"Russel-Klein\",",
							"                        \"MrchntClssfctnCd\":\"BLANK\"",
							"                     },",
							"                     \"Dbtr\":{",
							"                        \"FrstNm\":\"\",",
							"                        \"MddlNm\":\"\",",
							"                        \"LastNm\":\"\",",
							"                        \"MrchntClssfctnCd\":\"BLANK\"",
							"                     },",
							"                     \"DbtrFinSvcsPrvdrFees\":{",
							"                        \"Ccy\":\"USD\",",
							"                        \"Amt\":\"499325661187237\"",
							"                     },",
							"                     \"Xprtn\":\"2021-10-07T09:30:31.000Z\"",
							"                  }",
							"               }",
							"            }",
							"         }",
							"      },",
							"      \"SplmtryData\":{",
							"         \"Envlp\":{",
							"            \"Doc\":{",
							"               \"InitgPty\":{",
							"                  \"InitrTp\":\"CONSUMER\",",
							"                  \"Glctn\":{",
							"                     \"Lat\":\"-3.1291\",",
							"                     \"Long\":\"39.0006\"",
							"                  }",
							"               }",
							"            }",
							"         }",
							"      }",
							"   }",
							"}]",
							"",
							"const pain013Transactions = [{",
							"    \"TxTp\": \"pain.013.001.09\",",
							"    \"CdtrPmtActvtnReq\": {",
							"        \"GrpHdr\": {",
							"            \"MsgId\": \"aaa50190-73b7-11ec-90d6-0242ac120003\",",
							"            \"CreDtTm\": new Date(new Date(now - 20000).getTime()).toISOString(),",
							"            \"NbOfTxs\": 1,",
							"            \"InitgPty\": {",
							"                \"Nm\": \"Horatio Sam Ford\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1981-04-11\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27721299138\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-721299138\"",
							"                }",
							"            }",
							"        },",
							"        \"PmtInf\": {",
							"            \"PmtInfId\": \"b51ec534-ee48-4575-b6a9-ead2955b8069\",",
							"            \"PmtMtd\": \"TRA\",",
							"            \"ReqdAdvcTp\": {",
							"                \"DbtAdvc\": {",
							"                    \"Cd\": \"ADWD\",",
							"                    \"Prtry\": \"Advice with transaction details\"",
							"                }",
							"            },",
							"            \"ReqdExctnDt\": {",
							"                \"DtTm\": \"2021-10-07T09:25:31.000Z\"",
							"            },",
							"            \"XpryDt\": {",
							"                \"DtTm\": \"2021-10-21\"",
							"            },",
							"            \"Dbtr\": {",
							"                \"Nm\": \"2021-10-21T14:02:54.000Z\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"2021-10-07\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"zz\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"ZZ\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"+27721299138\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-783078685\"",
							"                }",
							"            },",
							"            \"DbtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"+27-721299138\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"+27721299138\"",
							"                        },",
							"                        \"Nm\": \"PASSPORT\"",
							"                    }",
							"                }",
							"            },",
							"            \"DbtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"Horatio Ford\"",
							"                    }",
							"                }",
							"            },",
							"            \"CdtTrfTxInf\": {",
							"                \"PmtId\": {",
							"                    \"EndToEndId\": \"2c516801007642dfb892944dde1cf845\"",
							"                },",
							"                \"PmtTpInf\": {",
							"                    \"CtgyPurp\": {",
							"                        \"Prtry\": \"TRANSFER\"",
							"                    }",
							"                },",
							"                \"Amt\": {",
							"                    \"InstdAmt\": {",
							"                        \"Amt\": {",
							"                            \"Amt\": 50431891779910900,",
							"                            \"Ccy\": \"USD\"",
							"                        }",
							"                    },",
							"                    \"EqvtAmt\": {",
							"                        \"Amt\": {",
							"                            \"Amt\": 50431891779910900,",
							"                            \"Ccy\": \"USD\"",
							"                        },",
							"                        \"CcyOfTrf\": \"USD\"",
							"                    }",
							"                },",
							"                \"ChrgBr\": \"DEBT\",",
							"                \"CdtrAgt\": {",
							"                    \"FinInstnId\": {",
							"                        \"ClrSysMmbId\": {",
							"                            \"MmbId\": \"dfsp002\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Cdtr\": {",
							"                    \"Nm\": \"April Sam Adamson\",",
							"                    \"Id\": {",
							"                        \"PrvtId\": {",
							"                            \"DtAndPlcOfBirth\": {",
							"                                \"BirthDt\": \"1923-04-26\",",
							"                                \"CityOfBirth\": \"Unknown\",",
							"                                \"CtryOfBirth\": \"ZZ\"",
							"                            },",
							"                            \"Othr\": {",
							"                                \"Id\": \"+27782722305\",",
							"                                \"SchmeNm\": {",
							"                                    \"Prtry\": \"MSISDN\"",
							"                                }",
							"                            }",
							"                        }",
							"                    },",
							"                    \"CtctDtls\": {",
							"                        \"MobNb\": \"+27-782722305\"",
							"                    }",
							"                },",
							"                \"CdtrAcct\": {",
							"                    \"Id\": {",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27783078685\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    },",
							"                    \"Nm\": \"April Adamson\"",
							"                },",
							"                \"Purp\": {",
							"                    \"Cd\": \"MP2P\"",
							"                },",
							"                \"RgltryRptg\": {",
							"                    \"Dtls\": {",
							"                        \"Tp\": \"BALANCE OF PAYMENTS\",",
							"                        \"Cd\": \"100\"",
							"                    }",
							"                },",
							"                \"RmtInf\": {",
							"                    \"Ustrd\": \"Payment of USD 49932566118723700.89 from Ivan to April\"",
							"                },",
							"                \"SplmtryData\": {",
							"                    \"Envlp\": {",
							"                        \"Doc\": {",
							"                            \"PyeeRcvAmt\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 4906747824834590.33,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            },",
							"                            \"PyeeFinSvcsPrvdrFee\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 49067478248345.9,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            },",
							"                            \"PyeeFinSvcsPrvdrComssn\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 0,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            }",
							"                        }",
							"                    }",
							"                }",
							"            }",
							"        },",
							"        \"SplmtryData\": {",
							"            \"Envlp\": {",
							"                \"Doc\": {",
							"                    \"InitgPty\": {",
							"                        \"Glctn\": {",
							"                            \"Lat\": \"-3.1675\",",
							"                            \"Long\": \"39.059\"",
							"                        }",
							"                    }",
							"                }",
							"            }",
							"        }",
							"    }",
							"}]",
							"const transactionGraph = [{",
							"    _key: \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _from: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    _to: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    TxTp: \"pacs.002.001.12\",",
							"    TxSts: \"ACCC\",",
							"    CreDtTm: new Date(new Date(now - 120000).getTime()).toISOString(),",
							"    PmtInfId: \"2f68ae16-467a-4ac4-ba32-eb518646aa1d\",",
							"    EndToEndId: \"5cb8a2db-5c32-41bb-ac27-2597125d50fd\"",
							"}",
							"]",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pacs008Transactions)}",
							"                    INSERT {_key: transaction.FIToFICstmrCdt.GrpHdr.MsgId, TxTp: transaction.TxTp, FIToFICstmrCdt: transaction.FIToFICstmrCdt} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pain013Transactions)}",
							"                    INSERT {_key: transaction.CdtrPmtActvtnReq.GrpHdr.MsgId, TxTp: transaction.TxTp, CdtrPmtActvtnReq: transaction.CdtrPmtActvtnReq} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pain001Transactions)}",
							"                    INSERT {_key: transaction.CstmrCdtTrfInitn.GrpHdr.MsgId, TxTp: transaction.TxTp, CstmrCdtTrfInitn: transaction.CstmrCdtTrfInitn} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/pseudonyms/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(transactionGraph)}",
							"                    INSERT transaction INTO transactionRelationship",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/Configuration/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR config IN ${JSON.stringify(ruleConfig)}",
							"                    INSERT {_key: \"017\", id: config.id, cfg: config.cfg, config: config.config} INTO configuration",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"const jsonData = pm.response.json();",
							"const req = JSON.parse(request.data);",
							"const arangourl = pm.environment.get('arangourl');",
							"",
							"const transactions = [\"96ae98292ec04bf29b5d40ba99864c38\", \"d7baf66c-73b7-11ec-90d6-0242ac120003\", \"aaa50190-73b7-11ec-90d6-0242ac120003\"]",
							"const graphTransactions = [\"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\"]",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"should have rule result of false for less than 5 successful transaction\", function () {",
							"    pm.expect(jsonData.ruleResult.result).to.be.eql(false);",
							"});",
							"",
							"pm.test(\"Remove Seed Data from DB\", function () {",
							"    pm.sendRequest({",
							"        url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"        method: 'POST',",
							"        header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"        body: {",
							"            mode: 'raw',",
							"            raw: JSON.stringify({",
							"                query: `FOR transaction IN ${JSON.stringify(transactions)}",
							"                        REMOVE { _key: transaction } IN transactionHistory",
							"                        OPTIONS { ignoreErrors: true }`",
							"            })",
							"        }",
							"    })",
							"});",
							"",
							"pm.test(\"Remove Seed Data from transactionGraph\", function () {",
							"    pm.sendRequest({",
							"        url: `${arangourl}/_db/pseudonyms/_api/cursor`,",
							"        method: 'POST',",
							"        header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"        body: {",
							"            mode: 'raw',",
							"            raw: JSON.stringify({",
							"                query: `FOR transaction IN ${JSON.stringify(graphTransactions)}",
							"                        REMOVE { _key: transaction } IN transactionRelationship",
							"                        OPTIONS { ignoreErrors: true }`",
							"            })",
							"        }",
							"    })",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"transaction\": {\n        \"TxTp\": \"pacs.002.001.12\",\n        \"FIToFIPmtSts\": {\n            \"GrpHdr\": {\n                \"MsgId\": \"6b444365119746c5be7dfb5516ba67c4\",\n                \"CreDtTm\": \"{{now}}\"\n            },\n            \"TxInfAndSts\": {\n                \"OrgnlInstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",\n                \"OrgnlEndToEndId\": \"2c516801007642dfb892944dde1cf845\",\n                \"TxSts\": \"ACCC\",\n                \"ChrgsInf\": [\n                    {\n                        \"Amt\": {\n                            \"Amt\": 307.14,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp001\"\n                                }\n                            }\n                        }\n                    },\n                    {\n                        \"Amt\": {\n                            \"Amt\": 153.57,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp001\"\n                                }\n                            }\n                        }\n                    },\n                    {\n                        \"Amt\": {\n                            \"Amt\": 30.71,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp002\"\n                                }\n                            }\n                        }\n                    }\n                ],\n                \"AccptncDtTm\": \"2021-12-03T15:36:16.000Z\",\n                \"InstgAgt\": {\n                    \"FinInstnId\": {\n                        \"ClrSysMmbId\": {\n                            \"MmbId\": \"dfsp001\"\n                        }\n                    }\n                },\n                \"InstdAgt\": {\n                    \"FinInstnId\": {\n                        \"ClrSysMmbId\": {\n                            \"MmbId\": \"dfsp002\"\n                        }\n                    }\n                }\n            }\n        }\n    },\n    \"networkMap\": {\n        \"messages\": [\n            {\n                \"id\": \"004@1.0.0\",\n                \"host\": \"http://gateway.openfaas:8080/function/off-transaction-aggregation-decisioning-processor-rel-1-1-0\",\n                \"cfg\": \"1.0.0\",\n                \"txTp\": \"pacs.002.001.12\",\n                \"channels\": [\n                    {\n                        \"id\": \"001@1.0.0\",\n                        \"host\": \"http://gateway.openfaas:8080/function/off-channel-aggregation-decisioning-processor-rel-1-1-0\",\n                        \"cfg\": \"1.0.0\",\n                        \"typologies\": [\n                            {\n                                \"id\": \"028@1.0.0\",\n                                \"host\": \"http://gateway.openfaas:8080/function/off-typology-processor-rel-1-0-0\",\n                                \"cfg\": \"1.0.0\",\n                                \"rules\": [\n                                    {\n                                        \"id\": \"017@1.0.0\",\n                                        \"host\": \"http://gateway.openfaas:8080/function/off-rule-017-rel-1-0-0\",\n                                        \"cfg\": \"1.0.0\"\n                                    }\n                                ]\n                            }\n                        ]\n                    }\n                ]\n            }\n        ]\n    }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{baseUrl}}/function/off-rule-017{{version}}/execute",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"function",
						"off-rule-017{{version}}",
						"execute"
					]
				}
			},
			"response": []
		},
		{
			"name": "Test Scenario 1.1",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"pm.globals.set(\"now\", new Date().toISOString());",
							"",
							"const now = new Date().getTime();",
							"const arangourl = pm.environment.get('arangourl');",
							"",
							"const ruleConfig = [",
							"    {",
							"  \"id\": \"017@1.0.0\",",
							"  \"cfg\": \"1.0.1\",",
							"  \"config\": {",
							"    \"timeframes\": [",
							"      {",
							"        \"threshold\": 28800000",
							"      }",
							"    ],",
							"    \"bands\": [",
							"      {",
							"        \"subRuleRef\": \".01\",",
							"        \"lowerLimit\": 5,",
							"        \"outcome\": true,",
							"        \"reason\": \"Transaction divergence detected on source account\"",
							"      },",
							"      {",
							"        \"subRuleRef\": \".00\",",
							"        \"upperLimit\": 5,",
							"        \"outcome\": false,",
							"        \"reason\": \"No Transaction divergence detected on source account\"",
							"      }",
							"    ]",
							"  }",
							"}",
							"]",
							"const pacs008Transactions = [{",
							"    \"TxTp\": \"pacs.008.001.10\",",
							"    \"FIToFICstmrCdt\": {",
							"        \"GrpHdr\": {",
							"            \"MsgId\": \"96ae98292ec04bf29b5d40ba99864c38\",",
							"            \"CreDtTm\": new Date(new Date(now - 10000).getTime()).toISOString(),",
							"            \"NbOfTxs\": 1,",
							"            \"SttlmInf\": {",
							"                \"SttlmMtd\": \"CLRG\"",
							"            }",
							"        },",
							"        \"CdtTrfTxInf\": {",
							"            \"PmtId\": {",
							"                \"InstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",",
							"                \"EndToEndId\": \"11114rtyuijhgf944dde1cf845\"",
							"            },",
							"            \"IntrBkSttlmAmt\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 31020.89,",
							"                    \"Ccy\": \"USD\"",
							"                }",
							"            },",
							"            \"InstdAmt\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 31020.89,",
							"                    \"Ccy\": \"USD\"",
							"                }",
							"            },",
							"            \"ChrgBr\": \"DEBT\",",
							"            \"ChrgsInf\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 307.14,",
							"                    \"Ccy\": \"USD\"",
							"                },",
							"                \"Agt\": {",
							"                    \"FinInstnId\": {",
							"                        \"ClrSysMmbId\": {",
							"                            \"MmbId\": \"dfsp001\"",
							"                        }",
							"                    }",
							"                }",
							"            },",
							"            \"InitgPty\": {",
							"                \"Nm\": \"April Blake Grant\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1968-02-01\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27730975224\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-730975224\"",
							"                }",
							"            },",
							"            \"Dbtr\": {",
							"                \"Nm\": \"April Blake Grant\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1968-02-01\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27730975224\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-730975224\"",
							"                }",
							"            },",
							"            \"DbtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"e2fa05b6a56ceedb37581703b98590b44194a8c0d274567uhjngf\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"PSEUDO\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Nm\": \"April Grant\"",
							"            },",
							"            \"DbtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp001\"",
							"                    }",
							"                }",
							"            },",
							"            \"CdtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp002\"",
							"                    }",
							"                }",
							"            },",
							"            \"Cdtr\": {",
							"                \"Nm\": \"Felicia Easton Quill\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1935-05-08\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27707650428\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-707650428\"",
							"                }",
							"            },",
							"            \"CdtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"efdafefdee55c7a1e5eba4ccc0f01639dc37a020241b20495378f5a1343985b4\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"PSEUDO\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Nm\": \"Felicia Quill\"",
							"            },",
							"            \"Purp\": {",
							"                \"Cd\": \"MP2P\"",
							"            }",
							"        },",
							"        \"RgltryRptg\": {",
							"            \"Dtls\": {",
							"                \"Tp\": \"BALANCE OF PAYMENTS\",",
							"                \"Cd\": \"100\"",
							"            }",
							"        },",
							"        \"RmtInf\": {",
							"            \"Ustrd\": \"Payment of USD 30713.75 from April to Felicia\"",
							"        },",
							"        \"SplmtryData\": {",
							"            \"Envlp\": {",
							"                \"Doc\": {",
							"                    \"Xprtn\": \"2021-11-30T10:38:56.000Z\"",
							"                }",
							"            }",
							"        }",
							"    }",
							"}]",
							"",
							"const pain001Transactions = [{",
							"   \"TxTp\":\"pain.001.001.11\",",
							"   \"CstmrCdtTrfInitn\":{",
							"      \"GrpHdr\":{",
							"         \"MsgId\":\"d7baf66c-73b7-11ec-90d6-0242ac120003\",",
							"         \"CreDtTm\": new Date(new Date(now - 30000).getTime()).toISOString(),",
							"         \"NbOfTxs\":1,",
							"         \"InitgPty\":{",
							"            \"Nm\":\"Ivan Reese Russel-Klein\",",
							"            \"Id\":{",
							"               \"PrvtId\":{",
							"                  \"DtAndPlcOfBirth\":{",
							"                     \"BirthDt\":\"1967-11-23\",",
							"                     \"CityOfBirth\":\"Unknown\",",
							"                     \"CtryOfBirth\":\"ZZ\"",
							"                  },",
							"                  \"Othr\":{",
							"                     \"Id\":\"\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               }",
							"            },",
							"            \"CtctDtls\":{",
							"               \"MobNb\":\"\"",
							"            }",
							"         }",
							"      },",
							"      \"PmtInf\":{",
							"         \"PmtInfId\":\"b51ec534-ee48-4575-b6a9-ead2955b8069\",",
							"         \"PmtMtd\":\"TRA\",",
							"         \"ReqdAdvcTp\":{",
							"            \"DbtAdvc\":{",
							"               \"Cd\":\"ADWD\",",
							"               \"Prtry\":\"Advice with transaction details\"",
							"            }",
							"         },",
							"         \"ReqdExctnDt\":{",
							"            \"Dt\":\"2021-10-07\",",
							"            \"DtTm\":\"2021-10-07T09:25:31.000Z\"",
							"         },",
							"         \"Dbtr\":{",
							"            \"Nm\":\"Ivan Reese Russel-Klein\",",
							"            \"Id\":{",
							"               \"PrvtId\":{",
							"                  \"DtAndPlcOfBirth\":{",
							"                     \"BirthDt\":\"1967-11-23\",",
							"                     \"CityOfBirth\":\"Unknown\",",
							"                     \"CtryOfBirth\":\"ZZ\"",
							"                  },",
							"                  \"Othr\":{",
							"                     \"Id\":\"\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               }",
							"            },",
							"            \"CtctDtls\":{",
							"               \"MobNb\":\"\"",
							"            }",
							"         },",
							"         \"DbtrAcct\":{",
							"            \"Id\":{",
							"               \"Othr\":{",
							"                  \"Id\":\"\",",
							"                  \"SchmeNm\":{",
							"                     \"Prtry\":\"PASSPORT\"",
							"                  }",
							"               }",
							"            },",
							"            \"Nm\":\"Ivan Russel-Klein\"",
							"         },",
							"         \"DbtrAgt\":{",
							"            \"FinInstnId\":{",
							"               \"ClrSysMmbId\":{",
							"                  \"MmbId\":\"dfsp001\"",
							"               }",
							"            }",
							"         },",
							"         \"CdtTrfTxInf\":{",
							"            \"PmtId\":{",
							"               \"EndToEndId\":\"11114rtyuijhgf944dde1cf845\"",
							"            },",
							"            \"PmtTpInf\":{",
							"               \"CtgyPurp\":{",
							"                  \"Prtry\":\"TRANSFER\"",
							"               }",
							"            },",
							"            \"Amt\":{",
							"               \"InstdAmt\":{",
							"                  \"Amt\":{",
							"                     \"Amt\":\"50431891779910900\",",
							"                     \"Ccy\":\"USD\"",
							"                  }",
							"               },",
							"               \"EqvtAmt\":{",
							"                  \"Amt\":{",
							"                     \"Amt\":\"50431891779910900\",",
							"                     \"Ccy\":\"USD\"",
							"                  },",
							"                  \"CcyOfTrf\":\"USD\"",
							"               }",
							"            },",
							"            \"ChrgBr\":\"DEBT\",",
							"            \"CdtrAgt\":{",
							"               \"FinInstnId\":{",
							"                  \"ClrSysMmbId\":{",
							"                     \"MmbId\":\"dfsp002\"",
							"                  }",
							"               }",
							"            },",
							"            \"Cdtr\":{",
							"               \"Nm\":\"\",",
							"               \"Id\":{",
							"                  \"PrvtId\":{",
							"                     \"DtAndPlcOfBirth\":{",
							"                        \"BirthDt\":\"1923-04-26\",",
							"                        \"CityOfBirth\":\"\",",
							"                        \"CtryOfBirth\":\"\"",
							"                     },",
							"                     \"Othr\":{",
							"                        \"Id\":\"\",",
							"                        \"SchmeNm\":{",
							"                           \"Prtry\":\"MSISDN\"",
							"                        }",
							"                     }",
							"                  }",
							"               },",
							"               \"CtctDtls\":{",
							"                  \"MobNb\":\"\"",
							"               }",
							"            },",
							"            \"CdtrAcct\":{",
							"               \"Id\":{",
							"                  \"Othr\":{",
							"                     \"Id\":\"03aeae97e5e2263c8c22bc0dec615b13ee6c90b6cf2dc0ffee72bcce9c66a14c\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               },",
							"               \"Nm\":\"April Adamson\"",
							"            },",
							"            \"Purp\":{",
							"               \"Cd\":\"MP2P\"",
							"            },",
							"            \"RgltryRptg\":{",
							"               \"Dtls\":{",
							"                  \"Tp\":\"BALANCE OF PAYMENTS\",",
							"                  \"Cd\":\"100\"",
							"               }",
							"            },",
							"            \"RmtInf\":{",
							"               \"Ustrd\":\"Payment of USD 49932566118723700.89 from Ivan to April\"",
							"            },",
							"            \"SplmtryData\":{",
							"               \"Envlp\":{",
							"                  \"Doc\":{",
							"                     \"Cdtr\":{",
							"                        \"FrstNm\":\"Ivan\",",
							"                        \"MddlNm\":\"Reese\",",
							"                        \"LastNm\":\"Russel-Klein\",",
							"                        \"MrchntClssfctnCd\":\"BLANK\"",
							"                     },",
							"                     \"Dbtr\":{",
							"                        \"FrstNm\":\"\",",
							"                        \"MddlNm\":\"\",",
							"                        \"LastNm\":\"\",",
							"                        \"MrchntClssfctnCd\":\"BLANK\"",
							"                     },",
							"                     \"DbtrFinSvcsPrvdrFees\":{",
							"                        \"Ccy\":\"USD\",",
							"                        \"Amt\":\"499325661187237\"",
							"                     },",
							"                     \"Xprtn\":\"2021-10-07T09:30:31.000Z\"",
							"                  }",
							"               }",
							"            }",
							"         }",
							"      },",
							"      \"SplmtryData\":{",
							"         \"Envlp\":{",
							"            \"Doc\":{",
							"               \"InitgPty\":{",
							"                  \"InitrTp\":\"CONSUMER\",",
							"                  \"Glctn\":{",
							"                     \"Lat\":\"-3.1291\",",
							"                     \"Long\":\"39.0006\"",
							"                  }",
							"               }",
							"            }",
							"         }",
							"      }",
							"   }",
							"}]",
							"",
							"const pain013Transactions = [{",
							"    \"TxTp\": \"pain.013.001.09\",",
							"    \"CdtrPmtActvtnReq\": {",
							"        \"GrpHdr\": {",
							"            \"MsgId\": \"aaa50190-73b7-11ec-90d6-0242ac120003\",",
							"            \"CreDtTm\": new Date(new Date(now - 20000).getTime()).toISOString(),",
							"            \"NbOfTxs\": 1,",
							"            \"InitgPty\": {",
							"                \"Nm\": \"Horatio Sam Ford\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1981-04-11\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27721299138\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-721299138\"",
							"                }",
							"            }",
							"        },",
							"        \"PmtInf\": {",
							"            \"PmtInfId\": \"b51ec534-ee48-4575-b6a9-ead2955b8069\",",
							"            \"PmtMtd\": \"TRA\",",
							"            \"ReqdAdvcTp\": {",
							"                \"DbtAdvc\": {",
							"                    \"Cd\": \"ADWD\",",
							"                    \"Prtry\": \"Advice with transaction details\"",
							"                }",
							"            },",
							"            \"ReqdExctnDt\": {",
							"                \"DtTm\": \"2021-10-07T09:25:31.000Z\"",
							"            },",
							"            \"XpryDt\": {",
							"                \"DtTm\": \"2021-10-21\"",
							"            },",
							"            \"Dbtr\": {",
							"                \"Nm\": \"2021-10-21T14:02:54.000Z\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"2021-10-07\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"zz\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"ZZ\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"+27721299138\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-783078685\"",
							"                }",
							"            },",
							"            \"DbtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"+27-721299138\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"+27721299138\"",
							"                        },",
							"                        \"Nm\": \"PASSPORT\"",
							"                    }",
							"                }",
							"            },",
							"            \"DbtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"Horatio Ford\"",
							"                    }",
							"                }",
							"            },",
							"            \"CdtTrfTxInf\": {",
							"                \"PmtId\": {",
							"                    \"EndToEndId\": \"11114rtyuijhgf944dde1cf845\"",
							"                },",
							"                \"PmtTpInf\": {",
							"                    \"CtgyPurp\": {",
							"                        \"Prtry\": \"TRANSFER\"",
							"                    }",
							"                },",
							"                \"Amt\": {",
							"                    \"InstdAmt\": {",
							"                        \"Amt\": {",
							"                            \"Amt\": 50431891779910900,",
							"                            \"Ccy\": \"USD\"",
							"                        }",
							"                    },",
							"                    \"EqvtAmt\": {",
							"                        \"Amt\": {",
							"                            \"Amt\": 50431891779910900,",
							"                            \"Ccy\": \"USD\"",
							"                        },",
							"                        \"CcyOfTrf\": \"USD\"",
							"                    }",
							"                },",
							"                \"ChrgBr\": \"DEBT\",",
							"                \"CdtrAgt\": {",
							"                    \"FinInstnId\": {",
							"                        \"ClrSysMmbId\": {",
							"                            \"MmbId\": \"dfsp002\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Cdtr\": {",
							"                    \"Nm\": \"April Sam Adamson\",",
							"                    \"Id\": {",
							"                        \"PrvtId\": {",
							"                            \"DtAndPlcOfBirth\": {",
							"                                \"BirthDt\": \"1923-04-26\",",
							"                                \"CityOfBirth\": \"Unknown\",",
							"                                \"CtryOfBirth\": \"ZZ\"",
							"                            },",
							"                            \"Othr\": {",
							"                                \"Id\": \"+27782722305\",",
							"                                \"SchmeNm\": {",
							"                                    \"Prtry\": \"MSISDN\"",
							"                                }",
							"                            }",
							"                        }",
							"                    },",
							"                    \"CtctDtls\": {",
							"                        \"MobNb\": \"+27-782722305\"",
							"                    }",
							"                },",
							"                \"CdtrAcct\": {",
							"                    \"Id\": {",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27783078685\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    },",
							"                    \"Nm\": \"April Adamson\"",
							"                },",
							"                \"Purp\": {",
							"                    \"Cd\": \"MP2P\"",
							"                },",
							"                \"RgltryRptg\": {",
							"                    \"Dtls\": {",
							"                        \"Tp\": \"BALANCE OF PAYMENTS\",",
							"                        \"Cd\": \"100\"",
							"                    }",
							"                },",
							"                \"RmtInf\": {",
							"                    \"Ustrd\": \"Payment of USD 49932566118723700.89 from Ivan to April\"",
							"                },",
							"                \"SplmtryData\": {",
							"                    \"Envlp\": {",
							"                        \"Doc\": {",
							"                            \"PyeeRcvAmt\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 4906747824834590.33,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            },",
							"                            \"PyeeFinSvcsPrvdrFee\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 49067478248345.9,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            },",
							"                            \"PyeeFinSvcsPrvdrComssn\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 0,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            }",
							"                        }",
							"                    }",
							"                }",
							"            }",
							"        },",
							"        \"SplmtryData\": {",
							"            \"Envlp\": {",
							"                \"Doc\": {",
							"                    \"InitgPty\": {",
							"                        \"Glctn\": {",
							"                            \"Lat\": \"-3.1675\",",
							"                            \"Long\": \"39.059\"",
							"                        }",
							"                    }",
							"                }",
							"            }",
							"        }",
							"    }",
							"}]",
							"const transactionGraph = [{",
							"    _key: \"e2fa05b6a56ceedb37581703b98590b44194a8c0d274567uhjngf\",",
							"    _from: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d274567uhjngf\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d274567uhjngf\",",
							"    TxTp: \"pacs.002.001.12\",",
							"    TxSts: \"ACCC\",",
							"    CreDtTm: new Date(new Date(now - 120000).getTime()).toISOString(),",
							"    PmtInfId: \"2f68ae16-467a-4ac4-ba32-eb518646aa1d\",",
							"    EndToEndId: \"5cb8a2db-5c32-41bb-ac27-2597125d50fd\"",
							"},",
							"{",
							"    _key: \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189ccccccc\",",
							"    _from: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d274567uhjngf\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d274567uhjngf\",",
							"    TxTp: \"pacs.002.001.12\",",
							"    TxSts: \"ACCC\",",
							"    CreDtTm: new Date(new Date(now - 3600000).getTime()).toISOString(),",
							"    PmtInfId: \"2f68ae16-467a-4ac4-ba32-eb518646aa1d\",",
							"    EndToEndId: \"5cb8a2db-5c32-41bb-ac27-2597125d50fd\"",
							"},",
							"{",
							"    _key: \"af36cfd29dd05eb483358899055a552af93cd7ae3609383218zzzzzmmm\",",
							"    _from: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d274567uhjngf\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d274567uhjngf\",",
							"    TxTp: \"pacs.002.001.12\",",
							"    TxSts: \"ACCC\",",
							"    CreDtTm: new Date(new Date(now - 21600000).getTime()).toISOString(),",
							"    PmtInfId: \"2f68ae16-467a-4ac4-ba32-eb518646aa1d\",",
							"    EndToEndId: \"5cb8a2db-5c32-41bb-ac27-2597125d50fd\"",
							"},",
							"{",
							"    _key: \"af36cfd29dd05eb483358899055a552af93cd7a999jjjuiiyfvvvvv\",",
							"    _from: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d274567uhjngf\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d274567uhjngf\",",
							"    TxTp: \"pacs.002.001.12\",",
							"    TxSts: \"ACCC\",",
							"    CreDtTm: new Date(new Date(now - 900000).getTime()).toISOString(),",
							"    PmtInfId: \"2f68ae16-467a-4ac4-ba32-eb518646aa1d\",",
							"    EndToEndId: \"5cb8a2db-5c32-41bb-ac27-2597125d50fd\"",
							"},",
							"{",
							"    _key: \"af36cfd29dd05eb483358899055a552af93cd7a999jjjuiiyfyyyyy\",",
							"    _from: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d274567uhjngf\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d274567uhjngf\",",
							"    TxTp: \"pacs.002.001.12\",",
							"    TxSts: \"ACCC\",",
							"    CreDtTm: new Date(new Date(now).getTime()).toISOString(),",
							"    PmtInfId: \"2f68ae16-467a-4ac4-ba32-eb518646aa1d\",",
							"    EndToEndId: \"5cb8a2db-5c32-41bb-ac27-2597125d50fd\"",
							"}",
							"]",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pacs008Transactions)}",
							"                    INSERT {_key: transaction.FIToFICstmrCdt.GrpHdr.MsgId, TxTp: transaction.TxTp, FIToFICstmrCdt: transaction.FIToFICstmrCdt} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pain013Transactions)}",
							"                    INSERT {_key: transaction.CdtrPmtActvtnReq.GrpHdr.MsgId, TxTp: transaction.TxTp, CdtrPmtActvtnReq: transaction.CdtrPmtActvtnReq} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pain001Transactions)}",
							"                    INSERT {_key: transaction.CstmrCdtTrfInitn.GrpHdr.MsgId, TxTp: transaction.TxTp, CstmrCdtTrfInitn: transaction.CstmrCdtTrfInitn} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/pseudonyms/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(transactionGraph)}",
							"                    INSERT transaction INTO transactionRelationship",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/Configuration/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR config IN ${JSON.stringify(ruleConfig)}",
							"                    INSERT {_key: \"017\", id: config.id, cfg: config.cfg, config: config.config} INTO configuration",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"const jsonData = pm.response.json();",
							"const req = JSON.parse(request.data);",
							"const arangourl = pm.environment.get('arangourl');",
							"",
							"const transactions = [\"96ae98292ec04bf29b5d40ba99864c38\", \"d7baf66c-73b7-11ec-90d6-0242ac120003\", \"aaa50190-73b7-11ec-90d6-0242ac120003\"]",
							"const graphTransactions = [\"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189ccccccc\", \"af36cfd29dd05eb483358899055a552af93cd7ae3609383218zzzzzmmm\",\"af36cfd29dd05eb483358899055a552af93cd7a999jjjuiiyfvvvvv\", \"af36cfd29dd05eb483358899055a552af93cd7a999jjjuiiyfyyyyy\"]",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"should have rule result of false for less than 5 successful transaction\", function () {",
							"    pm.expect(jsonData.ruleResult.result).to.be.eql(true);",
							"    pm.expect(jsonData.ruleResult.reason).to.be.eql('Transaction divergence detected on source account');",
							"});",
							"",
							"pm.test(\"Remove Seed Data from DB\", function () {",
							"    pm.sendRequest({",
							"        url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"        method: 'POST',",
							"        header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"        body: {",
							"            mode: 'raw',",
							"            raw: JSON.stringify({",
							"                query: `FOR transaction IN ${JSON.stringify(transactions)}",
							"                        REMOVE { _key: transaction } IN transactionHistory",
							"                        OPTIONS { ignoreErrors: true }`",
							"            })",
							"        }",
							"    })",
							"});",
							"",
							"pm.test(\"Remove Seed Data from transactionGraph\", function () {",
							"    pm.sendRequest({",
							"        url: `${arangourl}/_db/pseudonyms/_api/cursor`,",
							"        method: 'POST',",
							"        header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"        body: {",
							"            mode: 'raw',",
							"            raw: JSON.stringify({",
							"                query: `FOR transaction IN ${JSON.stringify(graphTransactions)}",
							"                        REMOVE { _key: transaction } IN transactionRelationship",
							"                        OPTIONS { ignoreErrors: true }`",
							"            })",
							"        }",
							"    })",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"transaction\": {\n        \"TxTp\": \"pacs.002.001.12\",\n        \"FIToFIPmtSts\": {\n            \"GrpHdr\": {\n                \"MsgId\": \"6b444365119746c5be7dfb5516ba67c4\",\n                \"CreDtTm\": \"{{now}}\"\n            },\n            \"TxInfAndSts\": {\n                \"OrgnlInstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",\n                \"OrgnlEndToEndId\": \"11114rtyuijhgf944dde1cf845\",\n                \"TxSts\": \"ACCC\",\n                \"ChrgsInf\": [\n                    {\n                        \"Amt\": {\n                            \"Amt\": 307.14,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp001\"\n                                }\n                            }\n                        }\n                    },\n                    {\n                        \"Amt\": {\n                            \"Amt\": 153.57,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp001\"\n                                }\n                            }\n                        }\n                    },\n                    {\n                        \"Amt\": {\n                            \"Amt\": 30.71,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp002\"\n                                }\n                            }\n                        }\n                    }\n                ],\n                \"AccptncDtTm\": \"2021-12-03T15:36:16.000Z\",\n                \"InstgAgt\": {\n                    \"FinInstnId\": {\n                        \"ClrSysMmbId\": {\n                            \"MmbId\": \"dfsp001\"\n                        }\n                    }\n                },\n                \"InstdAgt\": {\n                    \"FinInstnId\": {\n                        \"ClrSysMmbId\": {\n                            \"MmbId\": \"dfsp002\"\n                        }\n                    }\n                }\n            }\n        }\n    },\n    \"networkMap\": {\n        \"messages\": [\n            {\n            \"id\": \"004_017@1.0.0\",\n            \"host\": \"http://gateway.openfaas:8080/function/off-transaction-aggregation-decisioning-processor-rel-1-0-0\",\n            \"cfg\": \"1.0.0\",\n            \"txTp\": \"pacs.002.001.12\",\n            \"channels\": [\n                {\n                    \"id\": \"001@1.0.0\",\n                    \"host\": \"http://gateway.openfaas:8080/function/off-channel-aggregation-decisioning-processor-rel-1-0-0\",\n                    \"cfg\": \"1.0.0\",\n                    \"typologies\": [\n                        {\n                            \"id\": \"999_017@1.0.0\",\n                            \"host\": \"http://gateway.openfaas:8080/function/off-typology-processor-rel-1-0-0\",\n                            \"cfg\": \"1.0.0\",\n                            \"rules\": [\n                                {\n                                    \"id\": \"017@1.0.0\",\n                                    \"host\": \"http://gateway.openfaas:8080/function/off-rule-017-rel-1-0-0\",\n                                    \"cfg\": \"1.0.1\"\n                                }\n                            ]\n                        }\n                    ]\n                }\n            ]\n        }\n        ]\n    }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{baseUrl}}/function/off-rule-017{{version}}/execute",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"function",
						"off-rule-017{{version}}",
						"execute"
					]
				}
			},
			"response": []
		},
		{
			"name": "Test Scenario 2",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"pm.globals.set(\"now\", new Date().toISOString());",
							"",
							"const now = new Date().getTime();",
							"const arangourl = pm.environment.get('arangourl');",
							"",
							"const ruleConfig = [",
							"    {",
							"  \"id\": \"017@1.0.0\",",
							"  \"cfg\": \"1.0.0\",",
							"  \"config\": {",
							"    \"timeframes\": [",
							"      {",
							"        \"threshold\": 28800000",
							"      }",
							"    ],",
							"    \"bands\": [",
							"      {",
							"        \"subRuleRef\": \".01\",",
							"        \"lowerLimit\": 5,",
							"        \"outcome\": true,",
							"        \"reason\": \"Transaction divergence detected on source account\"",
							"      },",
							"      {",
							"        \"subRuleRef\": \".00\",",
							"        \"upperLimit\": 5,",
							"        \"outcome\": false,",
							"        \"reason\": \"No Transaction divergence detected on source account\"",
							"      }",
							"    ]",
							"  }",
							"}",
							"]",
							"const pacs008Transactions = [{",
							"    \"TxTp\": \"pacs.008.001.10\",",
							"    \"FIToFICstmrCdt\": {",
							"        \"GrpHdr\": {",
							"            \"MsgId\": \"96ae98292ec04bf29b5d40ba99864c38\",",
							"            \"CreDtTm\": new Date(new Date(now - 10000).getTime()).toISOString(),",
							"            \"NbOfTxs\": 1,",
							"            \"SttlmInf\": {",
							"                \"SttlmMtd\": \"CLRG\"",
							"            }",
							"        },",
							"        \"CdtTrfTxInf\": {",
							"            \"PmtId\": {",
							"                \"InstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",",
							"                \"EndToEndId\": \"2c516801007642dfb892944dde1cf845\"",
							"            },",
							"            \"IntrBkSttlmAmt\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 31020.89,",
							"                    \"Ccy\": \"USD\"",
							"                }",
							"            },",
							"            \"InstdAmt\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 31020.89,",
							"                    \"Ccy\": \"USD\"",
							"                }",
							"            },",
							"            \"ChrgBr\": \"DEBT\",",
							"            \"ChrgsInf\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 307.14,",
							"                    \"Ccy\": \"USD\"",
							"                },",
							"                \"Agt\": {",
							"                    \"FinInstnId\": {",
							"                        \"ClrSysMmbId\": {",
							"                            \"MmbId\": \"dfsp001\"",
							"                        }",
							"                    }",
							"                }",
							"            },",
							"            \"InitgPty\": {",
							"                \"Nm\": \"April Blake Grant\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1968-02-01\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27730975224\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-730975224\"",
							"                }",
							"            },",
							"            \"Dbtr\": {",
							"                \"Nm\": \"April Blake Grant\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1968-02-01\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27730975224\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-730975224\"",
							"                }",
							"            },",
							"            \"DbtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"PSEUDO\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Nm\": \"April Grant\"",
							"            },",
							"            \"DbtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp001\"",
							"                    }",
							"                }",
							"            },",
							"            \"CdtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp002\"",
							"                    }",
							"                }",
							"            },",
							"            \"Cdtr\": {",
							"                \"Nm\": \"Felicia Easton Quill\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1935-05-08\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27707650428\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-707650428\"",
							"                }",
							"            },",
							"            \"CdtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"efdafefdee55c7a1e5eba4ccc0f01639dc37a020241b20495378f5a1343985b4\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"PSEUDO\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Nm\": \"Felicia Quill\"",
							"            },",
							"            \"Purp\": {",
							"                \"Cd\": \"MP2P\"",
							"            }",
							"        },",
							"        \"RgltryRptg\": {",
							"            \"Dtls\": {",
							"                \"Tp\": \"BALANCE OF PAYMENTS\",",
							"                \"Cd\": \"100\"",
							"            }",
							"        },",
							"        \"RmtInf\": {",
							"            \"Ustrd\": \"Payment of USD 30713.75 from April to Felicia\"",
							"        },",
							"        \"SplmtryData\": {",
							"            \"Envlp\": {",
							"                \"Doc\": {",
							"                    \"Xprtn\": \"2021-11-30T10:38:56.000Z\"",
							"                }",
							"            }",
							"        }",
							"    }",
							"}]",
							"",
							"const pain001Transactions = [{",
							"   \"TxTp\":\"pain.001.001.11\",",
							"   \"CstmrCdtTrfInitn\":{",
							"      \"GrpHdr\":{",
							"         \"MsgId\":\"d7baf66c-73b7-11ec-90d6-0242ac120003\",",
							"         \"CreDtTm\": new Date(new Date(now - 30000).getTime()).toISOString(),",
							"         \"NbOfTxs\":1,",
							"         \"InitgPty\":{",
							"            \"Nm\":\"Ivan Reese Russel-Klein\",",
							"            \"Id\":{",
							"               \"PrvtId\":{",
							"                  \"DtAndPlcOfBirth\":{",
							"                     \"BirthDt\":\"1967-11-23\",",
							"                     \"CityOfBirth\":\"Unknown\",",
							"                     \"CtryOfBirth\":\"ZZ\"",
							"                  },",
							"                  \"Othr\":{",
							"                     \"Id\":\"\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               }",
							"            },",
							"            \"CtctDtls\":{",
							"               \"MobNb\":\"\"",
							"            }",
							"         }",
							"      },",
							"      \"PmtInf\":{",
							"         \"PmtInfId\":\"b51ec534-ee48-4575-b6a9-ead2955b8069\",",
							"         \"PmtMtd\":\"TRA\",",
							"         \"ReqdAdvcTp\":{",
							"            \"DbtAdvc\":{",
							"               \"Cd\":\"ADWD\",",
							"               \"Prtry\":\"Advice with transaction details\"",
							"            }",
							"         },",
							"         \"ReqdExctnDt\":{",
							"            \"Dt\":\"2021-10-07\",",
							"            \"DtTm\":\"2021-10-07T09:25:31.000Z\"",
							"         },",
							"         \"Dbtr\":{",
							"            \"Nm\":\"Ivan Reese Russel-Klein\",",
							"            \"Id\":{",
							"               \"PrvtId\":{",
							"                  \"DtAndPlcOfBirth\":{",
							"                     \"BirthDt\":\"1967-11-23\",",
							"                     \"CityOfBirth\":\"Unknown\",",
							"                     \"CtryOfBirth\":\"ZZ\"",
							"                  },",
							"                  \"Othr\":{",
							"                     \"Id\":\"\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               }",
							"            },",
							"            \"CtctDtls\":{",
							"               \"MobNb\":\"\"",
							"            }",
							"         },",
							"         \"DbtrAcct\":{",
							"            \"Id\":{",
							"               \"Othr\":{",
							"                  \"Id\":\"\",",
							"                  \"SchmeNm\":{",
							"                     \"Prtry\":\"PASSPORT\"",
							"                  }",
							"               }",
							"            },",
							"            \"Nm\":\"Ivan Russel-Klein\"",
							"         },",
							"         \"DbtrAgt\":{",
							"            \"FinInstnId\":{",
							"               \"ClrSysMmbId\":{",
							"                  \"MmbId\":\"dfsp001\"",
							"               }",
							"            }",
							"         },",
							"         \"CdtTrfTxInf\":{",
							"            \"PmtId\":{",
							"               \"EndToEndId\":\"2c516801007642dfb892944dde1cf845\"",
							"            },",
							"            \"PmtTpInf\":{",
							"               \"CtgyPurp\":{",
							"                  \"Prtry\":\"TRANSFER\"",
							"               }",
							"            },",
							"            \"Amt\":{",
							"               \"InstdAmt\":{",
							"                  \"Amt\":{",
							"                     \"Amt\":\"50431891779910900\",",
							"                     \"Ccy\":\"USD\"",
							"                  }",
							"               },",
							"               \"EqvtAmt\":{",
							"                  \"Amt\":{",
							"                     \"Amt\":\"50431891779910900\",",
							"                     \"Ccy\":\"USD\"",
							"                  },",
							"                  \"CcyOfTrf\":\"USD\"",
							"               }",
							"            },",
							"            \"ChrgBr\":\"DEBT\",",
							"            \"CdtrAgt\":{",
							"               \"FinInstnId\":{",
							"                  \"ClrSysMmbId\":{",
							"                     \"MmbId\":\"dfsp002\"",
							"                  }",
							"               }",
							"            },",
							"            \"Cdtr\":{",
							"               \"Nm\":\"\",",
							"               \"Id\":{",
							"                  \"PrvtId\":{",
							"                     \"DtAndPlcOfBirth\":{",
							"                        \"BirthDt\":\"1923-04-26\",",
							"                        \"CityOfBirth\":\"\",",
							"                        \"CtryOfBirth\":\"\"",
							"                     },",
							"                     \"Othr\":{",
							"                        \"Id\":\"\",",
							"                        \"SchmeNm\":{",
							"                           \"Prtry\":\"MSISDN\"",
							"                        }",
							"                     }",
							"                  }",
							"               },",
							"               \"CtctDtls\":{",
							"                  \"MobNb\":\"\"",
							"               }",
							"            },",
							"            \"CdtrAcct\":{",
							"               \"Id\":{",
							"                  \"Othr\":{",
							"                     \"Id\":\"03aeae97e5e2263c8c22bc0dec615b13ee6c90b6cf2dc0ffee72bcce9c66a14c\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               },",
							"               \"Nm\":\"April Adamson\"",
							"            },",
							"            \"Purp\":{",
							"               \"Cd\":\"MP2P\"",
							"            },",
							"            \"RgltryRptg\":{",
							"               \"Dtls\":{",
							"                  \"Tp\":\"BALANCE OF PAYMENTS\",",
							"                  \"Cd\":\"100\"",
							"               }",
							"            },",
							"            \"RmtInf\":{",
							"               \"Ustrd\":\"Payment of USD 49932566118723700.89 from Ivan to April\"",
							"            },",
							"            \"SplmtryData\":{",
							"               \"Envlp\":{",
							"                  \"Doc\":{",
							"                     \"Cdtr\":{",
							"                        \"FrstNm\":\"Ivan\",",
							"                        \"MddlNm\":\"Reese\",",
							"                        \"LastNm\":\"Russel-Klein\",",
							"                        \"MrchntClssfctnCd\":\"BLANK\"",
							"                     },",
							"                     \"Dbtr\":{",
							"                        \"FrstNm\":\"\",",
							"                        \"MddlNm\":\"\",",
							"                        \"LastNm\":\"\",",
							"                        \"MrchntClssfctnCd\":\"BLANK\"",
							"                     },",
							"                     \"DbtrFinSvcsPrvdrFees\":{",
							"                        \"Ccy\":\"USD\",",
							"                        \"Amt\":\"499325661187237\"",
							"                     },",
							"                     \"Xprtn\":\"2021-10-07T09:30:31.000Z\"",
							"                  }",
							"               }",
							"            }",
							"         }",
							"      },",
							"      \"SplmtryData\":{",
							"         \"Envlp\":{",
							"            \"Doc\":{",
							"               \"InitgPty\":{",
							"                  \"InitrTp\":\"CONSUMER\",",
							"                  \"Glctn\":{",
							"                     \"Lat\":\"-3.1291\",",
							"                     \"Long\":\"39.0006\"",
							"                  }",
							"               }",
							"            }",
							"         }",
							"      }",
							"   }",
							"}]",
							"",
							"const pain013Transactions = [{",
							"    \"TxTp\": \"pain.013.001.09\",",
							"    \"CdtrPmtActvtnReq\": {",
							"        \"GrpHdr\": {",
							"            \"MsgId\": \"aaa50190-73b7-11ec-90d6-0242ac120003\",",
							"            \"CreDtTm\": new Date(new Date(now - 20000).getTime()).toISOString(),",
							"            \"NbOfTxs\": 1,",
							"            \"InitgPty\": {",
							"                \"Nm\": \"Horatio Sam Ford\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1981-04-11\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27721299138\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-721299138\"",
							"                }",
							"            }",
							"        },",
							"        \"PmtInf\": {",
							"            \"PmtInfId\": \"b51ec534-ee48-4575-b6a9-ead2955b8069\",",
							"            \"PmtMtd\": \"TRA\",",
							"            \"ReqdAdvcTp\": {",
							"                \"DbtAdvc\": {",
							"                    \"Cd\": \"ADWD\",",
							"                    \"Prtry\": \"Advice with transaction details\"",
							"                }",
							"            },",
							"            \"ReqdExctnDt\": {",
							"                \"DtTm\": \"2021-10-07T09:25:31.000Z\"",
							"            },",
							"            \"XpryDt\": {",
							"                \"DtTm\": \"2021-10-21\"",
							"            },",
							"            \"Dbtr\": {",
							"                \"Nm\": \"2021-10-21T14:02:54.000Z\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"2021-10-07\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"zz\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"ZZ\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"+27721299138\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-783078685\"",
							"                }",
							"            },",
							"            \"DbtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"+27-721299138\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"+27721299138\"",
							"                        },",
							"                        \"Nm\": \"PASSPORT\"",
							"                    }",
							"                }",
							"            },",
							"            \"DbtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"Horatio Ford\"",
							"                    }",
							"                }",
							"            },",
							"            \"CdtTrfTxInf\": {",
							"                \"PmtId\": {",
							"                    \"EndToEndId\": \"2c516801007642dfb892944dde1cf845\"",
							"                },",
							"                \"PmtTpInf\": {",
							"                    \"CtgyPurp\": {",
							"                        \"Prtry\": \"TRANSFER\"",
							"                    }",
							"                },",
							"                \"Amt\": {",
							"                    \"InstdAmt\": {",
							"                        \"Amt\": {",
							"                            \"Amt\": 50431891779910900,",
							"                            \"Ccy\": \"USD\"",
							"                        }",
							"                    },",
							"                    \"EqvtAmt\": {",
							"                        \"Amt\": {",
							"                            \"Amt\": 50431891779910900,",
							"                            \"Ccy\": \"USD\"",
							"                        },",
							"                        \"CcyOfTrf\": \"USD\"",
							"                    }",
							"                },",
							"                \"ChrgBr\": \"DEBT\",",
							"                \"CdtrAgt\": {",
							"                    \"FinInstnId\": {",
							"                        \"ClrSysMmbId\": {",
							"                            \"MmbId\": \"dfsp002\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Cdtr\": {",
							"                    \"Nm\": \"April Sam Adamson\",",
							"                    \"Id\": {",
							"                        \"PrvtId\": {",
							"                            \"DtAndPlcOfBirth\": {",
							"                                \"BirthDt\": \"1923-04-26\",",
							"                                \"CityOfBirth\": \"Unknown\",",
							"                                \"CtryOfBirth\": \"ZZ\"",
							"                            },",
							"                            \"Othr\": {",
							"                                \"Id\": \"+27782722305\",",
							"                                \"SchmeNm\": {",
							"                                    \"Prtry\": \"MSISDN\"",
							"                                }",
							"                            }",
							"                        }",
							"                    },",
							"                    \"CtctDtls\": {",
							"                        \"MobNb\": \"+27-782722305\"",
							"                    }",
							"                },",
							"                \"CdtrAcct\": {",
							"                    \"Id\": {",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27783078685\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    },",
							"                    \"Nm\": \"April Adamson\"",
							"                },",
							"                \"Purp\": {",
							"                    \"Cd\": \"MP2P\"",
							"                },",
							"                \"RgltryRptg\": {",
							"                    \"Dtls\": {",
							"                        \"Tp\": \"BALANCE OF PAYMENTS\",",
							"                        \"Cd\": \"100\"",
							"                    }",
							"                },",
							"                \"RmtInf\": {",
							"                    \"Ustrd\": \"Payment of USD 49932566118723700.89 from Ivan to April\"",
							"                },",
							"                \"SplmtryData\": {",
							"                    \"Envlp\": {",
							"                        \"Doc\": {",
							"                            \"PyeeRcvAmt\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 4906747824834590.33,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            },",
							"                            \"PyeeFinSvcsPrvdrFee\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 49067478248345.9,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            },",
							"                            \"PyeeFinSvcsPrvdrComssn\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 0,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            }",
							"                        }",
							"                    }",
							"                }",
							"            }",
							"        },",
							"        \"SplmtryData\": {",
							"            \"Envlp\": {",
							"                \"Doc\": {",
							"                    \"InitgPty\": {",
							"                        \"Glctn\": {",
							"                            \"Lat\": \"-3.1675\",",
							"                            \"Long\": \"39.059\"",
							"                        }",
							"                    }",
							"                }",
							"            }",
							"        }",
							"    }",
							"}]",
							"const transactionGraph = [{",
							"    _key: \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: \"pacs.002.001.12\",",
							"    TxSts: \"ACCC\",",
							"    CreDtTm: new Date(new Date(now - 120000)).toISOString(),",
							"    PmtInfId: \"2f68ae16-467a-4ac4-ba32-eb518646aa1d\",",
							"    EndToEndId: \"5cb8a2db-5c32-41bb-ac27-2597125d50fd\"",
							"},",
							" {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e',",
							"    _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 3600000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50de',",
							"  },",
							"  {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954',",
							"     _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 21600000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50u4',",
							"  },",
							"  {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab195',",
							"     _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 64800000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50vm',",
							"  },",
							"  {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab',",
							"    _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 900000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50vm',",
							"  },",
							"  {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093',",
							"    _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(now).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50vm',",
							"  }",
							"]",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pacs008Transactions)}",
							"                    INSERT {_key: transaction.FIToFICstmrCdt.GrpHdr.MsgId, TxTp: transaction.TxTp, FIToFICstmrCdt: transaction.FIToFICstmrCdt} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pain013Transactions)}",
							"                    INSERT {_key: transaction.CdtrPmtActvtnReq.GrpHdr.MsgId, TxTp: transaction.TxTp, CdtrPmtActvtnReq: transaction.CdtrPmtActvtnReq} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pain001Transactions)}",
							"                    INSERT {_key: transaction.CstmrCdtTrfInitn.GrpHdr.MsgId, TxTp: transaction.TxTp, CstmrCdtTrfInitn: transaction.CstmrCdtTrfInitn} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/pseudonyms/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(transactionGraph)}",
							"                    INSERT transaction INTO transactionRelationship",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/Configuration/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR config IN ${JSON.stringify(ruleConfig)}",
							"                    INSERT {_key: \"017\", id: config.id, cfg: config.cfg, config: config.config} INTO configuration",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"const jsonData = pm.response.json();",
							"const req = JSON.parse(request.data);",
							"const arangourl = pm.environment.get('arangourl');",
							"",
							"const transactions = [\"96ae98292ec04bf29b5d40ba99864c38\", \"d7baf66c-73b7-11ec-90d6-0242ac120003\", \"aaa50190-73b7-11ec-90d6-0242ac120003\"]",
							"const graphTransactions = [\"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab195\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093\"]",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"should have rule result of true\", function () {",
							"    pm.expect(jsonData.ruleResult.result).to.be.eql(true);",
							"});",
							"",
							"pm.test(\"Remove Seed Data from DB\", function () {",
							"    pm.sendRequest({",
							"        url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"        method: 'POST',",
							"        header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"        body: {",
							"            mode: 'raw',",
							"            raw: JSON.stringify({",
							"                query: `FOR transaction IN ${JSON.stringify(transactions)}",
							"                        REMOVE { _key: transaction } IN transactionHistory",
							"                        OPTIONS { ignoreErrors: true }`",
							"            })",
							"        }",
							"    })",
							"});",
							"",
							"pm.test(\"Remove Seed Data from transactionGraph\", function () {",
							"    pm.sendRequest({",
							"        url: `${arangourl}/_db/pseudonyms/_api/cursor`,",
							"        method: 'POST',",
							"        header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"        body: {",
							"            mode: 'raw',",
							"            raw: JSON.stringify({",
							"                query: `FOR transaction IN ${JSON.stringify(graphTransactions)}",
							"                        REMOVE { _key: transaction } IN transactionRelationship",
							"                        OPTIONS { ignoreErrors: true }`",
							"            })",
							"        }",
							"    })",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"transaction\": {\n        \"TxTp\": \"pacs.002.001.12\",\n        \"FIToFIPmtSts\": {\n            \"GrpHdr\": {\n                \"MsgId\": \"6b444365119746c5be7dfb5516ba67c4\",\n                \"CreDtTm\": \"{{now}}\"\n            },\n            \"TxInfAndSts\": {\n                \"OrgnlInstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",\n                \"OrgnlEndToEndId\": \"2c516801007642dfb892944dde1cf845\",\n                \"TxSts\": \"ACCC\",\n                \"ChrgsInf\": [\n                    {\n                        \"Amt\": {\n                            \"Amt\": 307.14,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp001\"\n                                }\n                            }\n                        }\n                    },\n                    {\n                        \"Amt\": {\n                            \"Amt\": 153.57,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp001\"\n                                }\n                            }\n                        }\n                    },\n                    {\n                        \"Amt\": {\n                            \"Amt\": 30.71,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp002\"\n                                }\n                            }\n                        }\n                    }\n                ],\n                \"AccptncDtTm\": \"2021-12-03T15:36:16.000Z\",\n                \"InstgAgt\": {\n                    \"FinInstnId\": {\n                        \"ClrSysMmbId\": {\n                            \"MmbId\": \"dfsp001\"\n                        }\n                    }\n                },\n                \"InstdAgt\": {\n                    \"FinInstnId\": {\n                        \"ClrSysMmbId\": {\n                            \"MmbId\": \"dfsp002\"\n                        }\n                    }\n                }\n            }\n        }\n    },\n    \"networkMap\": {\n        \"messages\": [\n            {\n                \"id\": \"004@1.0.0\",\n                \"host\": \"http://gateway.openfaas:8080/function/off-transaction-aggregation-decisioning-processor-rel-1-1-0\",\n                \"cfg\": \"1.0.0\",\n                \"txTp\": \"pacs.002.001.12\",\n                \"channels\": [\n                    {\n                        \"id\": \"001@1.0.0\",\n                        \"host\": \"http://gateway.openfaas:8080/function/off-channel-aggregation-decisioning-processor-rel-1-1-0\",\n                        \"cfg\": \"1.0.0\",\n                        \"typologies\": [\n                            {\n                                \"id\": \"028@1.0.0\",\n                                \"host\": \"http://gateway.openfaas:8080/function/off-typology-processor-rel-1-0-0\",\n                                \"cfg\": \"1.0.0\",\n                                \"rules\": [\n                                    {\n                                        \"id\": \"017@1.0.0\",\n                                        \"host\": \"http://gateway.openfaas:8080/function/off-rule-017-rel-1-0-0\",\n                                        \"cfg\": \"1.0.0\"\n                                    }\n                                ]\n                            }\n                        ]\n                    }\n                ]\n            }\n        ]\n    }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{baseUrl}}/function/off-rule-017{{version}}/execute",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"function",
						"off-rule-017{{version}}",
						"execute"
					]
				}
			},
			"response": []
		},
		{
			"name": "Test Scenario 3",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"pm.globals.set(\"now\", new Date().toISOString());",
							"const arangourl = pm.environment.get('arangourl');",
							"",
							"const now = new Date().getTime();",
							"",
							"const pacs008Transactions = [{",
							"    \"TxTp\": \"pacs.008.001.10\",",
							"    \"FIToFICstmrCdt\": {",
							"        \"GrpHdr\": {",
							"            \"MsgId\": \"96ae98292ec04bf29b5d40ba99864c38\",",
							"            \"CreDtTm\": new Date(new Date(now - 10000).getTime()).toISOString(),",
							"            \"NbOfTxs\": 1,",
							"            \"SttlmInf\": {",
							"                \"SttlmMtd\": \"CLRG\"",
							"            }",
							"        },",
							"        \"CdtTrfTxInf\": {",
							"            \"PmtId\": {",
							"                \"InstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",",
							"                \"EndToEndId\": \"2c516801007642dfb892944dde1cf845\"",
							"            },",
							"            \"IntrBkSttlmAmt\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 31020.89,",
							"                    \"Ccy\": \"USD\"",
							"                }",
							"            },",
							"            \"InstdAmt\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 31020.89,",
							"                    \"Ccy\": \"USD\"",
							"                }",
							"            },",
							"            \"ChrgBr\": \"DEBT\",",
							"            \"ChrgsInf\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 307.14,",
							"                    \"Ccy\": \"USD\"",
							"                },",
							"                \"Agt\": {",
							"                    \"FinInstnId\": {",
							"                        \"ClrSysMmbId\": {",
							"                            \"MmbId\": \"dfsp001\"",
							"                        }",
							"                    }",
							"                }",
							"            },",
							"            \"InitgPty\": {",
							"                \"Nm\": \"April Blake Grant\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1968-02-01\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27730975224\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-730975224\"",
							"                }",
							"            },",
							"            \"Dbtr\": {",
							"                \"Nm\": \"April Blake Grant\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1968-02-01\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27730975224\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-730975224\"",
							"                }",
							"            },",
							"            \"DbtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"PSEUDO\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Nm\": \"April Grant\"",
							"            },",
							"            \"DbtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp001\"",
							"                    }",
							"                }",
							"            },",
							"            \"CdtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp002\"",
							"                    }",
							"                }",
							"            },",
							"            \"Cdtr\": {",
							"                \"Nm\": \"Felicia Easton Quill\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1935-05-08\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27707650428\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-707650428\"",
							"                }",
							"            },",
							"            \"CdtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"efdafefdee55c7a1e5eba4ccc0f01639dc37a020241b20495378f5a1343985b4\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"PSEUDO\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Nm\": \"Felicia Quill\"",
							"            },",
							"            \"Purp\": {",
							"                \"Cd\": \"MP2P\"",
							"            }",
							"        },",
							"        \"RgltryRptg\": {",
							"            \"Dtls\": {",
							"                \"Tp\": \"BALANCE OF PAYMENTS\",",
							"                \"Cd\": \"100\"",
							"            }",
							"        },",
							"        \"RmtInf\": {",
							"            \"Ustrd\": \"Payment of USD 30713.75 from April to Felicia\"",
							"        },",
							"        \"SplmtryData\": {",
							"            \"Envlp\": {",
							"                \"Doc\": {",
							"                    \"Xprtn\": \"2021-11-30T10:38:56.000Z\"",
							"                }",
							"            }",
							"        }",
							"    }",
							"}]",
							"",
							"const pain001Transactions = [{",
							"   \"TxTp\":\"pain.001.001.11\",",
							"   \"CstmrCdtTrfInitn\":{",
							"      \"GrpHdr\":{",
							"         \"MsgId\":\"d7baf66c-73b7-11ec-90d6-0242ac120003\",",
							"         \"CreDtTm\": new Date(new Date(now - 30000).getTime()).toISOString(),",
							"         \"NbOfTxs\":1,",
							"         \"InitgPty\":{",
							"            \"Nm\":\"Ivan Reese Russel-Klein\",",
							"            \"Id\":{",
							"               \"PrvtId\":{",
							"                  \"DtAndPlcOfBirth\":{",
							"                     \"BirthDt\":\"1967-11-23\",",
							"                     \"CityOfBirth\":\"Unknown\",",
							"                     \"CtryOfBirth\":\"ZZ\"",
							"                  },",
							"                  \"Othr\":{",
							"                     \"Id\":\"\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               }",
							"            },",
							"            \"CtctDtls\":{",
							"               \"MobNb\":\"\"",
							"            }",
							"         }",
							"      },",
							"      \"PmtInf\":{",
							"         \"PmtInfId\":\"b51ec534-ee48-4575-b6a9-ead2955b8069\",",
							"         \"PmtMtd\":\"TRA\",",
							"         \"ReqdAdvcTp\":{",
							"            \"DbtAdvc\":{",
							"               \"Cd\":\"ADWD\",",
							"               \"Prtry\":\"Advice with transaction details\"",
							"            }",
							"         },",
							"         \"ReqdExctnDt\":{",
							"            \"Dt\":\"2021-10-07\",",
							"            \"DtTm\":\"2021-10-07T09:25:31.000Z\"",
							"         },",
							"         \"Dbtr\":{",
							"            \"Nm\":\"Ivan Reese Russel-Klein\",",
							"            \"Id\":{",
							"               \"PrvtId\":{",
							"                  \"DtAndPlcOfBirth\":{",
							"                     \"BirthDt\":\"1967-11-23\",",
							"                     \"CityOfBirth\":\"Unknown\",",
							"                     \"CtryOfBirth\":\"ZZ\"",
							"                  },",
							"                  \"Othr\":{",
							"                     \"Id\":\"\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               }",
							"            },",
							"            \"CtctDtls\":{",
							"               \"MobNb\":\"\"",
							"            }",
							"         },",
							"         \"DbtrAcct\":{",
							"            \"Id\":{",
							"               \"Othr\":{",
							"                  \"Id\":\"\",",
							"                  \"SchmeNm\":{",
							"                     \"Prtry\":\"PASSPORT\"",
							"                  }",
							"               }",
							"            },",
							"            \"Nm\":\"Ivan Russel-Klein\"",
							"         },",
							"         \"DbtrAgt\":{",
							"            \"FinInstnId\":{",
							"               \"ClrSysMmbId\":{",
							"                  \"MmbId\":\"dfsp001\"",
							"               }",
							"            }",
							"         },",
							"         \"CdtTrfTxInf\":{",
							"            \"PmtId\":{",
							"               \"EndToEndId\":\"2c516801007642dfb892944dde1cf845\"",
							"            },",
							"            \"PmtTpInf\":{",
							"               \"CtgyPurp\":{",
							"                  \"Prtry\":\"TRANSFER\"",
							"               }",
							"            },",
							"            \"Amt\":{",
							"               \"InstdAmt\":{",
							"                  \"Amt\":{",
							"                     \"Amt\":\"50431891779910900\",",
							"                     \"Ccy\":\"USD\"",
							"                  }",
							"               },",
							"               \"EqvtAmt\":{",
							"                  \"Amt\":{",
							"                     \"Amt\":\"50431891779910900\",",
							"                     \"Ccy\":\"USD\"",
							"                  },",
							"                  \"CcyOfTrf\":\"USD\"",
							"               }",
							"            },",
							"            \"ChrgBr\":\"DEBT\",",
							"            \"CdtrAgt\":{",
							"               \"FinInstnId\":{",
							"                  \"ClrSysMmbId\":{",
							"                     \"MmbId\":\"dfsp002\"",
							"                  }",
							"               }",
							"            },",
							"            \"Cdtr\":{",
							"               \"Nm\":\"\",",
							"               \"Id\":{",
							"                  \"PrvtId\":{",
							"                     \"DtAndPlcOfBirth\":{",
							"                        \"BirthDt\":\"1923-04-26\",",
							"                        \"CityOfBirth\":\"\",",
							"                        \"CtryOfBirth\":\"\"",
							"                     },",
							"                     \"Othr\":{",
							"                        \"Id\":\"\",",
							"                        \"SchmeNm\":{",
							"                           \"Prtry\":\"MSISDN\"",
							"                        }",
							"                     }",
							"                  }",
							"               },",
							"               \"CtctDtls\":{",
							"                  \"MobNb\":\"\"",
							"               }",
							"            },",
							"            \"CdtrAcct\":{",
							"               \"Id\":{",
							"                  \"Othr\":{",
							"                     \"Id\":\"03aeae97e5e2263c8c22bc0dec615b13ee6c90b6cf2dc0ffee72bcce9c66a14c\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               },",
							"               \"Nm\":\"April Adamson\"",
							"            },",
							"            \"Purp\":{",
							"               \"Cd\":\"MP2P\"",
							"            },",
							"            \"RgltryRptg\":{",
							"               \"Dtls\":{",
							"                  \"Tp\":\"BALANCE OF PAYMENTS\",",
							"                  \"Cd\":\"100\"",
							"               }",
							"            },",
							"            \"RmtInf\":{",
							"               \"Ustrd\":\"Payment of USD 49932566118723700.89 from Ivan to April\"",
							"            },",
							"            \"SplmtryData\":{",
							"               \"Envlp\":{",
							"                  \"Doc\":{",
							"                     \"Cdtr\":{",
							"                        \"FrstNm\":\"Ivan\",",
							"                        \"MddlNm\":\"Reese\",",
							"                        \"LastNm\":\"Russel-Klein\",",
							"                        \"MrchntClssfctnCd\":\"BLANK\"",
							"                     },",
							"                     \"Dbtr\":{",
							"                        \"FrstNm\":\"\",",
							"                        \"MddlNm\":\"\",",
							"                        \"LastNm\":\"\",",
							"                        \"MrchntClssfctnCd\":\"BLANK\"",
							"                     },",
							"                     \"DbtrFinSvcsPrvdrFees\":{",
							"                        \"Ccy\":\"USD\",",
							"                        \"Amt\":\"499325661187237\"",
							"                     },",
							"                     \"Xprtn\":\"2021-10-07T09:30:31.000Z\"",
							"                  }",
							"               }",
							"            }",
							"         }",
							"      },",
							"      \"SplmtryData\":{",
							"         \"Envlp\":{",
							"            \"Doc\":{",
							"               \"InitgPty\":{",
							"                  \"InitrTp\":\"CONSUMER\",",
							"                  \"Glctn\":{",
							"                     \"Lat\":\"-3.1291\",",
							"                     \"Long\":\"39.0006\"",
							"                  }",
							"               }",
							"            }",
							"         }",
							"      }",
							"   }",
							"}]",
							"",
							"const pain013Transactions = [{",
							"    \"TxTp\": \"pain.013.001.09\",",
							"    \"CdtrPmtActvtnReq\": {",
							"        \"GrpHdr\": {",
							"            \"MsgId\": \"aaa50190-73b7-11ec-90d6-0242ac120003\",",
							"            \"CreDtTm\": new Date(new Date(now - 20000).getTime()).toISOString(),",
							"            \"NbOfTxs\": 1,",
							"            \"InitgPty\": {",
							"                \"Nm\": \"Horatio Sam Ford\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1981-04-11\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27721299138\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-721299138\"",
							"                }",
							"            }",
							"        },",
							"        \"PmtInf\": {",
							"            \"PmtInfId\": \"b51ec534-ee48-4575-b6a9-ead2955b8069\",",
							"            \"PmtMtd\": \"TRA\",",
							"            \"ReqdAdvcTp\": {",
							"                \"DbtAdvc\": {",
							"                    \"Cd\": \"ADWD\",",
							"                    \"Prtry\": \"Advice with transaction details\"",
							"                }",
							"            },",
							"            \"ReqdExctnDt\": {",
							"                \"DtTm\": \"2021-10-07T09:25:31.000Z\"",
							"            },",
							"            \"XpryDt\": {",
							"                \"DtTm\": \"2021-10-21\"",
							"            },",
							"            \"Dbtr\": {",
							"                \"Nm\": \"2021-10-21T14:02:54.000Z\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"2021-10-07\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"zz\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"ZZ\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"+27721299138\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-783078685\"",
							"                }",
							"            },",
							"            \"DbtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"+27-721299138\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"+27721299138\"",
							"                        },",
							"                        \"Nm\": \"PASSPORT\"",
							"                    }",
							"                }",
							"            },",
							"            \"DbtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"Horatio Ford\"",
							"                    }",
							"                }",
							"            },",
							"            \"CdtTrfTxInf\": {",
							"                \"PmtId\": {",
							"                    \"EndToEndId\": \"2c516801007642dfb892944dde1cf845\"",
							"                },",
							"                \"PmtTpInf\": {",
							"                    \"CtgyPurp\": {",
							"                        \"Prtry\": \"TRANSFER\"",
							"                    }",
							"                },",
							"                \"Amt\": {",
							"                    \"InstdAmt\": {",
							"                        \"Amt\": {",
							"                            \"Amt\": 50431891779910900,",
							"                            \"Ccy\": \"USD\"",
							"                        }",
							"                    },",
							"                    \"EqvtAmt\": {",
							"                        \"Amt\": {",
							"                            \"Amt\": 50431891779910900,",
							"                            \"Ccy\": \"USD\"",
							"                        },",
							"                        \"CcyOfTrf\": \"USD\"",
							"                    }",
							"                },",
							"                \"ChrgBr\": \"DEBT\",",
							"                \"CdtrAgt\": {",
							"                    \"FinInstnId\": {",
							"                        \"ClrSysMmbId\": {",
							"                            \"MmbId\": \"dfsp002\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Cdtr\": {",
							"                    \"Nm\": \"April Sam Adamson\",",
							"                    \"Id\": {",
							"                        \"PrvtId\": {",
							"                            \"DtAndPlcOfBirth\": {",
							"                                \"BirthDt\": \"1923-04-26\",",
							"                                \"CityOfBirth\": \"Unknown\",",
							"                                \"CtryOfBirth\": \"ZZ\"",
							"                            },",
							"                            \"Othr\": {",
							"                                \"Id\": \"+27782722305\",",
							"                                \"SchmeNm\": {",
							"                                    \"Prtry\": \"MSISDN\"",
							"                                }",
							"                            }",
							"                        }",
							"                    },",
							"                    \"CtctDtls\": {",
							"                        \"MobNb\": \"+27-782722305\"",
							"                    }",
							"                },",
							"                \"CdtrAcct\": {",
							"                    \"Id\": {",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27783078685\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    },",
							"                    \"Nm\": \"April Adamson\"",
							"                },",
							"                \"Purp\": {",
							"                    \"Cd\": \"MP2P\"",
							"                },",
							"                \"RgltryRptg\": {",
							"                    \"Dtls\": {",
							"                        \"Tp\": \"BALANCE OF PAYMENTS\",",
							"                        \"Cd\": \"100\"",
							"                    }",
							"                },",
							"                \"RmtInf\": {",
							"                    \"Ustrd\": \"Payment of USD 49932566118723700.89 from Ivan to April\"",
							"                },",
							"                \"SplmtryData\": {",
							"                    \"Envlp\": {",
							"                        \"Doc\": {",
							"                            \"PyeeRcvAmt\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 4906747824834590.33,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            },",
							"                            \"PyeeFinSvcsPrvdrFee\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 49067478248345.9,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            },",
							"                            \"PyeeFinSvcsPrvdrComssn\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 0,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            }",
							"                        }",
							"                    }",
							"                }",
							"            }",
							"        },",
							"        \"SplmtryData\": {",
							"            \"Envlp\": {",
							"                \"Doc\": {",
							"                    \"InitgPty\": {",
							"                        \"Glctn\": {",
							"                            \"Lat\": \"-3.1675\",",
							"                            \"Long\": \"39.059\"",
							"                        }",
							"                    }",
							"                }",
							"            }",
							"        }",
							"    }",
							"}]",
							"const transactionGraph = [{",
							"    _key: \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: \"pacs.002.001.12\",",
							"    TxSts: \"ACCC\",",
							"    CreDtTm: new Date(new Date(now - 120000)).toISOString(),",
							"    PmtInfId: \"2f68ae16-467a-4ac4-ba32-eb518646aa1d\",",
							"    EndToEndId: \"5cb8a2db-5c32-41bb-ac27-2597125d50fd\"",
							"},",
							" {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e',",
							"    _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 3600000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50de',",
							"  },",
							"  {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954',",
							"     _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 3600000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50u4',",
							"  },",
							"  {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab195',",
							"     _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 120000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50vm',",
							"  },",
							"  {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab',",
							"    _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 64800000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50vm',",
							"  },",
							"  {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093',",
							"    _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'RJCT',",
							"    CreDtTm: new Date(new Date(now - 3600000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50vm',",
							"  }",
							"]",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pacs008Transactions)}",
							"                    INSERT {_key: transaction.FIToFICstmrCdt.GrpHdr.MsgId, TxTp: transaction.TxTp, FIToFICstmrCdt: transaction.FIToFICstmrCdt} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pain013Transactions)}",
							"                    INSERT {_key: transaction.CdtrPmtActvtnReq.GrpHdr.MsgId, TxTp: transaction.TxTp, CdtrPmtActvtnReq: transaction.CdtrPmtActvtnReq} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pain001Transactions)}",
							"                    INSERT {_key: transaction.CstmrCdtTrfInitn.GrpHdr.MsgId, TxTp: transaction.TxTp, CstmrCdtTrfInitn: transaction.CstmrCdtTrfInitn} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/pseudonyms/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(transactionGraph)}",
							"                    INSERT transaction INTO transactionRelationship",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"const jsonData = pm.response.json();",
							"const req = JSON.parse(request.data);",
							"const arangourl = pm.environment.get('arangourl');",
							"",
							"const transactions = [\"96ae98292ec04bf29b5d40ba99864c38\", \"d7baf66c-73b7-11ec-90d6-0242ac120003\", \"aaa50190-73b7-11ec-90d6-0242ac120003\"]",
							"const graphTransactions = [\"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab195\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093\"]",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"should have rule result of false for 5 or more transaction including one unsuccessful one\", function () {",
							"    pm.expect(jsonData.ruleResult.result).to.be.eql(false);",
							"});",
							"",
							"pm.test(\"Remove Seed Data from DB\", function () {",
							"    pm.sendRequest({",
							"        url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"        method: 'POST',",
							"        header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"        body: {",
							"            mode: 'raw',",
							"            raw: JSON.stringify({",
							"                query: `FOR transaction IN ${JSON.stringify(transactions)}",
							"                        REMOVE { _key: transaction } IN transactionHistory",
							"                        OPTIONS { ignoreErrors: true }`",
							"            })",
							"        }",
							"    })",
							"});",
							"",
							"pm.test(\"Remove Seed Data from transactionGraph\", function () {",
							"    pm.sendRequest({",
							"        url: `${arangourl}/_db/pseudonyms/_api/cursor`,",
							"        method: 'POST',",
							"        header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"        body: {",
							"            mode: 'raw',",
							"            raw: JSON.stringify({",
							"                query: `FOR transaction IN ${JSON.stringify(graphTransactions)}",
							"                        REMOVE { _key: transaction } IN transactionRelationship",
							"                        OPTIONS { ignoreErrors: true }`",
							"            })",
							"        }",
							"    })",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"transaction\": {\n        \"TxTp\": \"pacs.002.001.12\",\n        \"FIToFIPmtSts\": {\n            \"GrpHdr\": {\n                \"MsgId\": \"6b444365119746c5be7dfb5516ba67c4\",\n                \"CreDtTm\": \"{{now}}\"\n            },\n            \"TxInfAndSts\": {\n                \"OrgnlInstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",\n                \"OrgnlEndToEndId\": \"2c516801007642dfb892944dde1cf845\",\n                \"TxSts\": \"ACCC\",\n                \"ChrgsInf\": [\n                    {\n                        \"Amt\": {\n                            \"Amt\": 307.14,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp001\"\n                                }\n                            }\n                        }\n                    },\n                    {\n                        \"Amt\": {\n                            \"Amt\": 153.57,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp001\"\n                                }\n                            }\n                        }\n                    },\n                    {\n                        \"Amt\": {\n                            \"Amt\": 30.71,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp002\"\n                                }\n                            }\n                        }\n                    }\n                ],\n                \"AccptncDtTm\": \"2021-12-03T15:36:16.000Z\",\n                \"InstgAgt\": {\n                    \"FinInstnId\": {\n                        \"ClrSysMmbId\": {\n                            \"MmbId\": \"dfsp001\"\n                        }\n                    }\n                },\n                \"InstdAgt\": {\n                    \"FinInstnId\": {\n                        \"ClrSysMmbId\": {\n                            \"MmbId\": \"dfsp002\"\n                        }\n                    }\n                }\n            }\n        }\n    },\n    \"networkMap\": {\n        \"messages\": [\n            {\n                \"id\": \"004@1.0.0\",\n                \"host\": \"http://gateway.openfaas:8080/function/off-transaction-aggregation-decisioning-processor-rel-1-1-0\",\n                \"cfg\": \"1.0.0\",\n                \"txTp\": \"pacs.002.001.12\",\n                \"channels\": [\n                    {\n                        \"id\": \"001@1.0.0\",\n                        \"host\": \"http://gateway.openfaas:8080/function/off-channel-aggregation-decisioning-processor-rel-1-1-0\",\n                        \"cfg\": \"1.0.0\",\n                        \"typologies\": [\n                            {\n                                \"id\": \"028@1.0.0\",\n                                \"host\": \"http://gateway.openfaas:8080/function/off-typology-processor-rel-1-0-0\",\n                                \"cfg\": \"1.0.0\",\n                                \"rules\": [\n                                    {\n                                        \"id\": \"017@1.0.0\",\n                                        \"host\": \"http://gateway.openfaas:8080/function/off-rule-017-rel-1-0-0\",\n                                        \"cfg\": \"1.0.0\"\n                                    }\n                                ]\n                            }\n                        ]\n                    }\n                ]\n            }\n        ]\n    }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{baseUrl}}/function/off-rule-017{{version}}/execute",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"function",
						"off-rule-017{{version}}",
						"execute"
					]
				}
			},
			"response": []
		},
		{
			"name": "Test Scenario 4",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"pm.globals.set(\"now\", new Date().toISOString());",
							"const arangourl = pm.environment.get('arangourl');",
							"",
							"const now = new Date().getTime();",
							"",
							"const ruleConfig = [",
							"    {",
							"  \"id\": \"017@1.0.0\",",
							"  \"cfg\": \"1.0.0\",",
							"  \"config\": {",
							"    \"timeframes\": [",
							"      {",
							"        \"threshold\": 172800000",
							"      }",
							"    ],",
							"    \"bands\": [",
							"      {",
							"        \"subRuleRef\": \".01\",",
							"        \"lowerLimit\": 6,",
							"        \"outcome\": true,",
							"        \"reason\": \"Transaction divergence detected on source account\"",
							"      },",
							"      {",
							"        \"subRuleRef\": \".00\",",
							"        \"upperLimit\": 6,",
							"        \"outcome\": false,",
							"        \"reason\": \"No Transaction divergence detected on source account\"",
							"      }",
							"    ]",
							"  }",
							"}",
							"]",
							"const pacs008Transactions = [{",
							"    \"TxTp\": \"pacs.008.001.10\",",
							"    \"FIToFICstmrCdt\": {",
							"        \"GrpHdr\": {",
							"            \"MsgId\": \"96ae98292ec04bf29b5d40ba99864c38\",",
							"            \"CreDtTm\": new Date(new Date(now - 10000).getTime()).toISOString(),",
							"            \"NbOfTxs\": 1,",
							"            \"SttlmInf\": {",
							"                \"SttlmMtd\": \"CLRG\"",
							"            }",
							"        },",
							"        \"CdtTrfTxInf\": {",
							"            \"PmtId\": {",
							"                \"InstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",",
							"                \"EndToEndId\": \"2c516801007642dfb892944dde1cf845\"",
							"            },",
							"            \"IntrBkSttlmAmt\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 31020.89,",
							"                    \"Ccy\": \"USD\"",
							"                }",
							"            },",
							"            \"InstdAmt\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 31020.89,",
							"                    \"Ccy\": \"USD\"",
							"                }",
							"            },",
							"            \"ChrgBr\": \"DEBT\",",
							"            \"ChrgsInf\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 307.14,",
							"                    \"Ccy\": \"USD\"",
							"                },",
							"                \"Agt\": {",
							"                    \"FinInstnId\": {",
							"                        \"ClrSysMmbId\": {",
							"                            \"MmbId\": \"dfsp001\"",
							"                        }",
							"                    }",
							"                }",
							"            },",
							"            \"InitgPty\": {",
							"                \"Nm\": \"April Blake Grant\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1968-02-01\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27730975224\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-730975224\"",
							"                }",
							"            },",
							"            \"Dbtr\": {",
							"                \"Nm\": \"April Blake Grant\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1968-02-01\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27730975224\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-730975224\"",
							"                }",
							"            },",
							"            \"DbtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"PSEUDO\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Nm\": \"April Grant\"",
							"            },",
							"            \"DbtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp001\"",
							"                    }",
							"                }",
							"            },",
							"            \"CdtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp002\"",
							"                    }",
							"                }",
							"            },",
							"            \"Cdtr\": {",
							"                \"Nm\": \"Felicia Easton Quill\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1935-05-08\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27707650428\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-707650428\"",
							"                }",
							"            },",
							"            \"CdtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"efdafefdee55c7a1e5eba4ccc0f01639dc37a020241b20495378f5a1343985b4\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"PSEUDO\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Nm\": \"Felicia Quill\"",
							"            },",
							"            \"Purp\": {",
							"                \"Cd\": \"MP2P\"",
							"            }",
							"        },",
							"        \"RgltryRptg\": {",
							"            \"Dtls\": {",
							"                \"Tp\": \"BALANCE OF PAYMENTS\",",
							"                \"Cd\": \"100\"",
							"            }",
							"        },",
							"        \"RmtInf\": {",
							"            \"Ustrd\": \"Payment of USD 30713.75 from April to Felicia\"",
							"        },",
							"        \"SplmtryData\": {",
							"            \"Envlp\": {",
							"                \"Doc\": {",
							"                    \"Xprtn\": \"2021-11-30T10:38:56.000Z\"",
							"                }",
							"            }",
							"        }",
							"    }",
							"}]",
							"",
							"const pain001Transactions = [{",
							"   \"TxTp\":\"pain.001.001.11\",",
							"   \"CstmrCdtTrfInitn\":{",
							"      \"GrpHdr\":{",
							"         \"MsgId\":\"d7baf66c-73b7-11ec-90d6-0242ac120003\",",
							"         \"CreDtTm\": new Date(new Date(now - 30000).getTime()).toISOString(),",
							"         \"NbOfTxs\":1,",
							"         \"InitgPty\":{",
							"            \"Nm\":\"Ivan Reese Russel-Klein\",",
							"            \"Id\":{",
							"               \"PrvtId\":{",
							"                  \"DtAndPlcOfBirth\":{",
							"                     \"BirthDt\":\"1967-11-23\",",
							"                     \"CityOfBirth\":\"Unknown\",",
							"                     \"CtryOfBirth\":\"ZZ\"",
							"                  },",
							"                  \"Othr\":{",
							"                     \"Id\":\"\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               }",
							"            },",
							"            \"CtctDtls\":{",
							"               \"MobNb\":\"\"",
							"            }",
							"         }",
							"      },",
							"      \"PmtInf\":{",
							"         \"PmtInfId\":\"b51ec534-ee48-4575-b6a9-ead2955b8069\",",
							"         \"PmtMtd\":\"TRA\",",
							"         \"ReqdAdvcTp\":{",
							"            \"DbtAdvc\":{",
							"               \"Cd\":\"ADWD\",",
							"               \"Prtry\":\"Advice with transaction details\"",
							"            }",
							"         },",
							"         \"ReqdExctnDt\":{",
							"            \"Dt\":\"2021-10-07\",",
							"            \"DtTm\":\"2021-10-07T09:25:31.000Z\"",
							"         },",
							"         \"Dbtr\":{",
							"            \"Nm\":\"Ivan Reese Russel-Klein\",",
							"            \"Id\":{",
							"               \"PrvtId\":{",
							"                  \"DtAndPlcOfBirth\":{",
							"                     \"BirthDt\":\"1967-11-23\",",
							"                     \"CityOfBirth\":\"Unknown\",",
							"                     \"CtryOfBirth\":\"ZZ\"",
							"                  },",
							"                  \"Othr\":{",
							"                     \"Id\":\"\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               }",
							"            },",
							"            \"CtctDtls\":{",
							"               \"MobNb\":\"\"",
							"            }",
							"         },",
							"         \"DbtrAcct\":{",
							"            \"Id\":{",
							"               \"Othr\":{",
							"                  \"Id\":\"\",",
							"                  \"SchmeNm\":{",
							"                     \"Prtry\":\"PASSPORT\"",
							"                  }",
							"               }",
							"            },",
							"            \"Nm\":\"Ivan Russel-Klein\"",
							"         },",
							"         \"DbtrAgt\":{",
							"            \"FinInstnId\":{",
							"               \"ClrSysMmbId\":{",
							"                  \"MmbId\":\"dfsp001\"",
							"               }",
							"            }",
							"         },",
							"         \"CdtTrfTxInf\":{",
							"            \"PmtId\":{",
							"               \"EndToEndId\":\"2c516801007642dfb892944dde1cf845\"",
							"            },",
							"            \"PmtTpInf\":{",
							"               \"CtgyPurp\":{",
							"                  \"Prtry\":\"TRANSFER\"",
							"               }",
							"            },",
							"            \"Amt\":{",
							"               \"InstdAmt\":{",
							"                  \"Amt\":{",
							"                     \"Amt\":\"50431891779910900\",",
							"                     \"Ccy\":\"USD\"",
							"                  }",
							"               },",
							"               \"EqvtAmt\":{",
							"                  \"Amt\":{",
							"                     \"Amt\":\"50431891779910900\",",
							"                     \"Ccy\":\"USD\"",
							"                  },",
							"                  \"CcyOfTrf\":\"USD\"",
							"               }",
							"            },",
							"            \"ChrgBr\":\"DEBT\",",
							"            \"CdtrAgt\":{",
							"               \"FinInstnId\":{",
							"                  \"ClrSysMmbId\":{",
							"                     \"MmbId\":\"dfsp002\"",
							"                  }",
							"               }",
							"            },",
							"            \"Cdtr\":{",
							"               \"Nm\":\"\",",
							"               \"Id\":{",
							"                  \"PrvtId\":{",
							"                     \"DtAndPlcOfBirth\":{",
							"                        \"BirthDt\":\"1923-04-26\",",
							"                        \"CityOfBirth\":\"\",",
							"                        \"CtryOfBirth\":\"\"",
							"                     },",
							"                     \"Othr\":{",
							"                        \"Id\":\"\",",
							"                        \"SchmeNm\":{",
							"                           \"Prtry\":\"MSISDN\"",
							"                        }",
							"                     }",
							"                  }",
							"               },",
							"               \"CtctDtls\":{",
							"                  \"MobNb\":\"\"",
							"               }",
							"            },",
							"            \"CdtrAcct\":{",
							"               \"Id\":{",
							"                  \"Othr\":{",
							"                     \"Id\":\"03aeae97e5e2263c8c22bc0dec615b13ee6c90b6cf2dc0ffee72bcce9c66a14c\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               },",
							"               \"Nm\":\"April Adamson\"",
							"            },",
							"            \"Purp\":{",
							"               \"Cd\":\"MP2P\"",
							"            },",
							"            \"RgltryRptg\":{",
							"               \"Dtls\":{",
							"                  \"Tp\":\"BALANCE OF PAYMENTS\",",
							"                  \"Cd\":\"100\"",
							"               }",
							"            },",
							"            \"RmtInf\":{",
							"               \"Ustrd\":\"Payment of USD 49932566118723700.89 from Ivan to April\"",
							"            },",
							"            \"SplmtryData\":{",
							"               \"Envlp\":{",
							"                  \"Doc\":{",
							"                     \"Cdtr\":{",
							"                        \"FrstNm\":\"Ivan\",",
							"                        \"MddlNm\":\"Reese\",",
							"                        \"LastNm\":\"Russel-Klein\",",
							"                        \"MrchntClssfctnCd\":\"BLANK\"",
							"                     },",
							"                     \"Dbtr\":{",
							"                        \"FrstNm\":\"\",",
							"                        \"MddlNm\":\"\",",
							"                        \"LastNm\":\"\",",
							"                        \"MrchntClssfctnCd\":\"BLANK\"",
							"                     },",
							"                     \"DbtrFinSvcsPrvdrFees\":{",
							"                        \"Ccy\":\"USD\",",
							"                        \"Amt\":\"499325661187237\"",
							"                     },",
							"                     \"Xprtn\":\"2021-10-07T09:30:31.000Z\"",
							"                  }",
							"               }",
							"            }",
							"         }",
							"      },",
							"      \"SplmtryData\":{",
							"         \"Envlp\":{",
							"            \"Doc\":{",
							"               \"InitgPty\":{",
							"                  \"InitrTp\":\"CONSUMER\",",
							"                  \"Glctn\":{",
							"                     \"Lat\":\"-3.1291\",",
							"                     \"Long\":\"39.0006\"",
							"                  }",
							"               }",
							"            }",
							"         }",
							"      }",
							"   }",
							"}]",
							"",
							"const pain013Transactions = [{",
							"    \"TxTp\": \"pain.013.001.09\",",
							"    \"CdtrPmtActvtnReq\": {",
							"        \"GrpHdr\": {",
							"            \"MsgId\": \"aaa50190-73b7-11ec-90d6-0242ac120003\",",
							"            \"CreDtTm\": new Date(new Date(now - 20000).getTime()).toISOString(),",
							"            \"NbOfTxs\": 1,",
							"            \"InitgPty\": {",
							"                \"Nm\": \"Horatio Sam Ford\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1981-04-11\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27721299138\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-721299138\"",
							"                }",
							"            }",
							"        },",
							"        \"PmtInf\": {",
							"            \"PmtInfId\": \"b51ec534-ee48-4575-b6a9-ead2955b8069\",",
							"            \"PmtMtd\": \"TRA\",",
							"            \"ReqdAdvcTp\": {",
							"                \"DbtAdvc\": {",
							"                    \"Cd\": \"ADWD\",",
							"                    \"Prtry\": \"Advice with transaction details\"",
							"                }",
							"            },",
							"            \"ReqdExctnDt\": {",
							"                \"DtTm\": \"2021-10-07T09:25:31.000Z\"",
							"            },",
							"            \"XpryDt\": {",
							"                \"DtTm\": \"2021-10-21\"",
							"            },",
							"            \"Dbtr\": {",
							"                \"Nm\": \"2021-10-21T14:02:54.000Z\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"2021-10-07\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"zz\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"ZZ\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"+27721299138\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-783078685\"",
							"                }",
							"            },",
							"            \"DbtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"+27-721299138\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"+27721299138\"",
							"                        },",
							"                        \"Nm\": \"PASSPORT\"",
							"                    }",
							"                }",
							"            },",
							"            \"DbtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"Horatio Ford\"",
							"                    }",
							"                }",
							"            },",
							"            \"CdtTrfTxInf\": {",
							"                \"PmtId\": {",
							"                    \"EndToEndId\": \"2c516801007642dfb892944dde1cf845\"",
							"                },",
							"                \"PmtTpInf\": {",
							"                    \"CtgyPurp\": {",
							"                        \"Prtry\": \"TRANSFER\"",
							"                    }",
							"                },",
							"                \"Amt\": {",
							"                    \"InstdAmt\": {",
							"                        \"Amt\": {",
							"                            \"Amt\": 50431891779910900,",
							"                            \"Ccy\": \"USD\"",
							"                        }",
							"                    },",
							"                    \"EqvtAmt\": {",
							"                        \"Amt\": {",
							"                            \"Amt\": 50431891779910900,",
							"                            \"Ccy\": \"USD\"",
							"                        },",
							"                        \"CcyOfTrf\": \"USD\"",
							"                    }",
							"                },",
							"                \"ChrgBr\": \"DEBT\",",
							"                \"CdtrAgt\": {",
							"                    \"FinInstnId\": {",
							"                        \"ClrSysMmbId\": {",
							"                            \"MmbId\": \"dfsp002\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Cdtr\": {",
							"                    \"Nm\": \"April Sam Adamson\",",
							"                    \"Id\": {",
							"                        \"PrvtId\": {",
							"                            \"DtAndPlcOfBirth\": {",
							"                                \"BirthDt\": \"1923-04-26\",",
							"                                \"CityOfBirth\": \"Unknown\",",
							"                                \"CtryOfBirth\": \"ZZ\"",
							"                            },",
							"                            \"Othr\": {",
							"                                \"Id\": \"+27782722305\",",
							"                                \"SchmeNm\": {",
							"                                    \"Prtry\": \"MSISDN\"",
							"                                }",
							"                            }",
							"                        }",
							"                    },",
							"                    \"CtctDtls\": {",
							"                        \"MobNb\": \"+27-782722305\"",
							"                    }",
							"                },",
							"                \"CdtrAcct\": {",
							"                    \"Id\": {",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27783078685\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    },",
							"                    \"Nm\": \"April Adamson\"",
							"                },",
							"                \"Purp\": {",
							"                    \"Cd\": \"MP2P\"",
							"                },",
							"                \"RgltryRptg\": {",
							"                    \"Dtls\": {",
							"                        \"Tp\": \"BALANCE OF PAYMENTS\",",
							"                        \"Cd\": \"100\"",
							"                    }",
							"                },",
							"                \"RmtInf\": {",
							"                    \"Ustrd\": \"Payment of USD 49932566118723700.89 from Ivan to April\"",
							"                },",
							"                \"SplmtryData\": {",
							"                    \"Envlp\": {",
							"                        \"Doc\": {",
							"                            \"PyeeRcvAmt\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 4906747824834590.33,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            },",
							"                            \"PyeeFinSvcsPrvdrFee\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 49067478248345.9,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            },",
							"                            \"PyeeFinSvcsPrvdrComssn\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 0,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            }",
							"                        }",
							"                    }",
							"                }",
							"            }",
							"        },",
							"        \"SplmtryData\": {",
							"            \"Envlp\": {",
							"                \"Doc\": {",
							"                    \"InitgPty\": {",
							"                        \"Glctn\": {",
							"                            \"Lat\": \"-3.1675\",",
							"                            \"Long\": \"39.059\"",
							"                        }",
							"                    }",
							"                }",
							"            }",
							"        }",
							"    }",
							"}]",
							"const transactionGraph = [{",
							"    _key: \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: \"pacs.002.001.12\",",
							"    TxSts: \"ACCC\",",
							"    CreDtTm: new Date(new Date(now - 120000)).toISOString(),",
							"    PmtInfId: \"2f68ae16-467a-4ac4-ba32-eb518646aa1d\",",
							"    EndToEndId: \"5cb8a2db-5c32-41bb-ac27-2597125d50fd\"",
							"},",
							" {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e',",
							"    _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 3600000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50de',",
							"  },",
							"  {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954',",
							"     _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 21600000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50u4',",
							"  },",
							"  {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab195',",
							"     _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 900000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50vm',",
							"  },",
							"  {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab',",
							"    _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 64800000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50vm',",
							"  },",
							"  {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093',",
							"    _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(now).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50vm',",
							"  }",
							"]",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pacs008Transactions)}",
							"                    INSERT {_key: transaction.FIToFICstmrCdt.GrpHdr.MsgId, TxTp: transaction.TxTp, FIToFICstmrCdt: transaction.FIToFICstmrCdt} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pain013Transactions)}",
							"                    INSERT {_key: transaction.CdtrPmtActvtnReq.GrpHdr.MsgId, TxTp: transaction.TxTp, CdtrPmtActvtnReq: transaction.CdtrPmtActvtnReq} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pain001Transactions)}",
							"                    INSERT {_key: transaction.CstmrCdtTrfInitn.GrpHdr.MsgId, TxTp: transaction.TxTp, CstmrCdtTrfInitn: transaction.CstmrCdtTrfInitn} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/pseudonyms/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(transactionGraph)}",
							"                    INSERT transaction INTO transactionRelationship",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/Configuration/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR config IN ${JSON.stringify(ruleConfig)}",
							"                    INSERT {_key: \"017\", id: config.id, cfg: config.cfg, config: config.config} INTO configuration",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"const jsonData = pm.response.json();",
							"const req = JSON.parse(request.data);",
							"const arangourl = pm.environment.get('arangourl');",
							"",
							"const transactions = [\"96ae98292ec04bf29b5d40ba99864c38\", \"d7baf66c-73b7-11ec-90d6-0242ac120003\", \"aaa50190-73b7-11ec-90d6-0242ac120003\"]",
							"const graphTransactions = [\"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab195\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093\"]",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"should have rule result of true\", function () {",
							"    pm.expect(jsonData.ruleResult.result).to.be.eql(true);",
							"});",
							"",
							"pm.test(\"Remove Seed Data from DB\", function () {",
							"    pm.sendRequest({",
							"        url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"        method: 'POST',",
							"        header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"        body: {",
							"            mode: 'raw',",
							"            raw: JSON.stringify({",
							"                query: `FOR transaction IN ${JSON.stringify(transactions)}",
							"                        REMOVE { _key: transaction } IN transactionHistory",
							"                        OPTIONS { ignoreErrors: true }`",
							"            })",
							"        }",
							"    })",
							"});",
							"",
							"pm.test(\"Remove Seed Data from transactionGraph\", function () {",
							"    pm.sendRequest({",
							"        url: `${arangourl}/_db/pseudonyms/_api/cursor`,",
							"        method: 'POST',",
							"        header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"        body: {",
							"            mode: 'raw',",
							"            raw: JSON.stringify({",
							"                query: `FOR transaction IN ${JSON.stringify(graphTransactions)}",
							"                        REMOVE { _key: transaction } IN transactionRelationship",
							"                        OPTIONS { ignoreErrors: true }`",
							"            })",
							"        }",
							"    })",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"transaction\": {\n        \"TxTp\": \"pacs.002.001.12\",\n        \"FIToFIPmtSts\": {\n            \"GrpHdr\": {\n                \"MsgId\": \"6b444365119746c5be7dfb5516ba67c4\",\n                \"CreDtTm\": \"{{now}}\"\n            },\n            \"TxInfAndSts\": {\n                \"OrgnlInstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",\n                \"OrgnlEndToEndId\": \"2c516801007642dfb892944dde1cf845\",\n                \"TxSts\": \"ACCC\",\n                \"ChrgsInf\": [\n                    {\n                        \"Amt\": {\n                            \"Amt\": 307.14,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp001\"\n                                }\n                            }\n                        }\n                    },\n                    {\n                        \"Amt\": {\n                            \"Amt\": 153.57,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp001\"\n                                }\n                            }\n                        }\n                    },\n                    {\n                        \"Amt\": {\n                            \"Amt\": 30.71,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp002\"\n                                }\n                            }\n                        }\n                    }\n                ],\n                \"AccptncDtTm\": \"2021-12-03T15:36:16.000Z\",\n                \"InstgAgt\": {\n                    \"FinInstnId\": {\n                        \"ClrSysMmbId\": {\n                            \"MmbId\": \"dfsp001\"\n                        }\n                    }\n                },\n                \"InstdAgt\": {\n                    \"FinInstnId\": {\n                        \"ClrSysMmbId\": {\n                            \"MmbId\": \"dfsp002\"\n                        }\n                    }\n                }\n            }\n        }\n    },\n    \"networkMap\": {\n        \"messages\": [\n            {\n                \"id\": \"004@1.0.0\",\n                \"host\": \"http://gateway.openfaas:8080/function/off-transaction-aggregation-decisioning-processor-rel-1-1-0\",\n                \"cfg\": \"1.0.0\",\n                \"txTp\": \"pacs.002.001.12\",\n                \"channels\": [\n                    {\n                        \"id\": \"001@1.0.0\",\n                        \"host\": \"http://gateway.openfaas:8080/function/off-channel-aggregation-decisioning-processor-rel-1-1-0\",\n                        \"cfg\": \"1.0.0\",\n                        \"typologies\": [\n                            {\n                                \"id\": \"028@1.0.0\",\n                                \"host\": \"http://gateway.openfaas:8080/function/off-typology-processor-rel-1-0-0\",\n                                \"cfg\": \"1.0.0\",\n                                \"rules\": [\n                                    {\n                                        \"id\": \"017@1.0.0\",\n                                        \"host\": \"http://gateway.openfaas:8080/function/off-rule-017-rel-1-0-0\",\n                                        \"cfg\": \"1.0.0\"\n                                    }\n                                ]\n                            }\n                        ]\n                    }\n                ]\n            }\n        ]\n    }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{baseUrl}}/function/off-rule-017{{version}}/execute",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"function",
						"off-rule-017{{version}}",
						"execute"
					]
				}
			},
			"response": []
		},
		{
			"name": "Test Scenario 5",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"pm.globals.set(\"now\", new Date().toISOString());",
							"",
							"const now = new Date().getTime();",
							"const arangourl = pm.environment.get('arangourl');",
							"",
							"const ruleConfig = [",
							"    {",
							"  \"id\": \"017@1.0.0\",",
							"  \"cfg\": \"1.0.0\",",
							"  \"config\": {",
							"    \"timeframes\": [",
							"      {",
							"        \"threshold\": 28800000",
							"      }",
							"    ],",
							"    \"bands\": [",
							"      {",
							"        \"subRuleRef\": \".01\",",
							"        \"lowerLimit\": 6,",
							"        \"outcome\": true,",
							"        \"reason\": \"Transaction divergence detected on source account\"",
							"      },",
							"      {",
							"        \"subRuleRef\": \".00\",",
							"        \"upperLimit\": 6,",
							"        \"outcome\": false,",
							"        \"reason\": \"No Transaction divergence detected on source account\"",
							"      }",
							"    ]",
							"  }",
							"}",
							"]",
							"",
							"const pacs008Transactions = [{",
							"    \"TxTp\": \"pacs.008.001.10\",",
							"    \"FIToFICstmrCdt\": {",
							"        \"GrpHdr\": {",
							"            \"MsgId\": \"96ae98292ec04bf29b5d40ba99864c38\",",
							"            \"CreDtTm\": new Date(new Date(now - 10000).getTime()).toISOString(),",
							"            \"NbOfTxs\": 1,",
							"            \"SttlmInf\": {",
							"                \"SttlmMtd\": \"CLRG\"",
							"            }",
							"        },",
							"        \"CdtTrfTxInf\": {",
							"            \"PmtId\": {",
							"                \"InstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",",
							"                \"EndToEndId\": \"2c516801007642dfb892944dde1cf845\"",
							"            },",
							"            \"IntrBkSttlmAmt\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 31020.89,",
							"                    \"Ccy\": \"USD\"",
							"                }",
							"            },",
							"            \"InstdAmt\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 31020.89,",
							"                    \"Ccy\": \"USD\"",
							"                }",
							"            },",
							"            \"ChrgBr\": \"DEBT\",",
							"            \"ChrgsInf\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 307.14,",
							"                    \"Ccy\": \"USD\"",
							"                },",
							"                \"Agt\": {",
							"                    \"FinInstnId\": {",
							"                        \"ClrSysMmbId\": {",
							"                            \"MmbId\": \"dfsp001\"",
							"                        }",
							"                    }",
							"                }",
							"            },",
							"            \"InitgPty\": {",
							"                \"Nm\": \"April Blake Grant\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1968-02-01\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27730975224\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-730975224\"",
							"                }",
							"            },",
							"            \"Dbtr\": {",
							"                \"Nm\": \"April Blake Grant\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1968-02-01\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27730975224\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-730975224\"",
							"                }",
							"            },",
							"            \"DbtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"PSEUDO\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Nm\": \"April Grant\"",
							"            },",
							"            \"DbtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp001\"",
							"                    }",
							"                }",
							"            },",
							"            \"CdtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp002\"",
							"                    }",
							"                }",
							"            },",
							"            \"Cdtr\": {",
							"                \"Nm\": \"Felicia Easton Quill\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1935-05-08\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27707650428\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-707650428\"",
							"                }",
							"            },",
							"            \"CdtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"efdafefdee55c7a1e5eba4ccc0f01639dc37a020241b20495378f5a1343985b4\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"PSEUDO\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Nm\": \"Felicia Quill\"",
							"            },",
							"            \"Purp\": {",
							"                \"Cd\": \"MP2P\"",
							"            }",
							"        },",
							"        \"RgltryRptg\": {",
							"            \"Dtls\": {",
							"                \"Tp\": \"BALANCE OF PAYMENTS\",",
							"                \"Cd\": \"100\"",
							"            }",
							"        },",
							"        \"RmtInf\": {",
							"            \"Ustrd\": \"Payment of USD 30713.75 from April to Felicia\"",
							"        },",
							"        \"SplmtryData\": {",
							"            \"Envlp\": {",
							"                \"Doc\": {",
							"                    \"Xprtn\": \"2021-11-30T10:38:56.000Z\"",
							"                }",
							"            }",
							"        }",
							"    }",
							"}]",
							"",
							"const pain001Transactions = [{",
							"   \"TxTp\":\"pain.001.001.11\",",
							"   \"CstmrCdtTrfInitn\":{",
							"      \"GrpHdr\":{",
							"         \"MsgId\":\"d7baf66c-73b7-11ec-90d6-0242ac120003\",",
							"         \"CreDtTm\": new Date(new Date(now - 30000).getTime()).toISOString(),",
							"         \"NbOfTxs\":1,",
							"         \"InitgPty\":{",
							"            \"Nm\":\"Ivan Reese Russel-Klein\",",
							"            \"Id\":{",
							"               \"PrvtId\":{",
							"                  \"DtAndPlcOfBirth\":{",
							"                     \"BirthDt\":\"1967-11-23\",",
							"                     \"CityOfBirth\":\"Unknown\",",
							"                     \"CtryOfBirth\":\"ZZ\"",
							"                  },",
							"                  \"Othr\":{",
							"                     \"Id\":\"\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               }",
							"            },",
							"            \"CtctDtls\":{",
							"               \"MobNb\":\"\"",
							"            }",
							"         }",
							"      },",
							"      \"PmtInf\":{",
							"         \"PmtInfId\":\"b51ec534-ee48-4575-b6a9-ead2955b8069\",",
							"         \"PmtMtd\":\"TRA\",",
							"         \"ReqdAdvcTp\":{",
							"            \"DbtAdvc\":{",
							"               \"Cd\":\"ADWD\",",
							"               \"Prtry\":\"Advice with transaction details\"",
							"            }",
							"         },",
							"         \"ReqdExctnDt\":{",
							"            \"Dt\":\"2021-10-07\",",
							"            \"DtTm\":\"2021-10-07T09:25:31.000Z\"",
							"         },",
							"         \"Dbtr\":{",
							"            \"Nm\":\"Ivan Reese Russel-Klein\",",
							"            \"Id\":{",
							"               \"PrvtId\":{",
							"                  \"DtAndPlcOfBirth\":{",
							"                     \"BirthDt\":\"1967-11-23\",",
							"                     \"CityOfBirth\":\"Unknown\",",
							"                     \"CtryOfBirth\":\"ZZ\"",
							"                  },",
							"                  \"Othr\":{",
							"                     \"Id\":\"\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               }",
							"            },",
							"            \"CtctDtls\":{",
							"               \"MobNb\":\"\"",
							"            }",
							"         },",
							"         \"DbtrAcct\":{",
							"            \"Id\":{",
							"               \"Othr\":{",
							"                  \"Id\":\"\",",
							"                  \"SchmeNm\":{",
							"                     \"Prtry\":\"PASSPORT\"",
							"                  }",
							"               }",
							"            },",
							"            \"Nm\":\"Ivan Russel-Klein\"",
							"         },",
							"         \"DbtrAgt\":{",
							"            \"FinInstnId\":{",
							"               \"ClrSysMmbId\":{",
							"                  \"MmbId\":\"dfsp001\"",
							"               }",
							"            }",
							"         },",
							"         \"CdtTrfTxInf\":{",
							"            \"PmtId\":{",
							"               \"EndToEndId\":\"2c516801007642dfb892944dde1cf845\"",
							"            },",
							"            \"PmtTpInf\":{",
							"               \"CtgyPurp\":{",
							"                  \"Prtry\":\"TRANSFER\"",
							"               }",
							"            },",
							"            \"Amt\":{",
							"               \"InstdAmt\":{",
							"                  \"Amt\":{",
							"                     \"Amt\":\"50431891779910900\",",
							"                     \"Ccy\":\"USD\"",
							"                  }",
							"               },",
							"               \"EqvtAmt\":{",
							"                  \"Amt\":{",
							"                     \"Amt\":\"50431891779910900\",",
							"                     \"Ccy\":\"USD\"",
							"                  },",
							"                  \"CcyOfTrf\":\"USD\"",
							"               }",
							"            },",
							"            \"ChrgBr\":\"DEBT\",",
							"            \"CdtrAgt\":{",
							"               \"FinInstnId\":{",
							"                  \"ClrSysMmbId\":{",
							"                     \"MmbId\":\"dfsp002\"",
							"                  }",
							"               }",
							"            },",
							"            \"Cdtr\":{",
							"               \"Nm\":\"\",",
							"               \"Id\":{",
							"                  \"PrvtId\":{",
							"                     \"DtAndPlcOfBirth\":{",
							"                        \"BirthDt\":\"1923-04-26\",",
							"                        \"CityOfBirth\":\"\",",
							"                        \"CtryOfBirth\":\"\"",
							"                     },",
							"                     \"Othr\":{",
							"                        \"Id\":\"\",",
							"                        \"SchmeNm\":{",
							"                           \"Prtry\":\"MSISDN\"",
							"                        }",
							"                     }",
							"                  }",
							"               },",
							"               \"CtctDtls\":{",
							"                  \"MobNb\":\"\"",
							"               }",
							"            },",
							"            \"CdtrAcct\":{",
							"               \"Id\":{",
							"                  \"Othr\":{",
							"                     \"Id\":\"03aeae97e5e2263c8c22bc0dec615b13ee6c90b6cf2dc0ffee72bcce9c66a14c\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               },",
							"               \"Nm\":\"April Adamson\"",
							"            },",
							"            \"Purp\":{",
							"               \"Cd\":\"MP2P\"",
							"            },",
							"            \"RgltryRptg\":{",
							"               \"Dtls\":{",
							"                  \"Tp\":\"BALANCE OF PAYMENTS\",",
							"                  \"Cd\":\"100\"",
							"               }",
							"            },",
							"            \"RmtInf\":{",
							"               \"Ustrd\":\"Payment of USD 49932566118723700.89 from Ivan to April\"",
							"            },",
							"            \"SplmtryData\":{",
							"               \"Envlp\":{",
							"                  \"Doc\":{",
							"                     \"Cdtr\":{",
							"                        \"FrstNm\":\"Ivan\",",
							"                        \"MddlNm\":\"Reese\",",
							"                        \"LastNm\":\"Russel-Klein\",",
							"                        \"MrchntClssfctnCd\":\"BLANK\"",
							"                     },",
							"                     \"Dbtr\":{",
							"                        \"FrstNm\":\"\",",
							"                        \"MddlNm\":\"\",",
							"                        \"LastNm\":\"\",",
							"                        \"MrchntClssfctnCd\":\"BLANK\"",
							"                     },",
							"                     \"DbtrFinSvcsPrvdrFees\":{",
							"                        \"Ccy\":\"USD\",",
							"                        \"Amt\":\"499325661187237\"",
							"                     },",
							"                     \"Xprtn\":\"2021-10-07T09:30:31.000Z\"",
							"                  }",
							"               }",
							"            }",
							"         }",
							"      },",
							"      \"SplmtryData\":{",
							"         \"Envlp\":{",
							"            \"Doc\":{",
							"               \"InitgPty\":{",
							"                  \"InitrTp\":\"CONSUMER\",",
							"                  \"Glctn\":{",
							"                     \"Lat\":\"-3.1291\",",
							"                     \"Long\":\"39.0006\"",
							"                  }",
							"               }",
							"            }",
							"         }",
							"      }",
							"   }",
							"}]",
							"",
							"const pain013Transactions = [{",
							"    \"TxTp\": \"pain.013.001.09\",",
							"    \"CdtrPmtActvtnReq\": {",
							"        \"GrpHdr\": {",
							"            \"MsgId\": \"aaa50190-73b7-11ec-90d6-0242ac120003\",",
							"            \"CreDtTm\": new Date(new Date(now - 20000).getTime()).toISOString(),",
							"            \"NbOfTxs\": 1,",
							"            \"InitgPty\": {",
							"                \"Nm\": \"Horatio Sam Ford\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1981-04-11\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27721299138\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-721299138\"",
							"                }",
							"            }",
							"        },",
							"        \"PmtInf\": {",
							"            \"PmtInfId\": \"b51ec534-ee48-4575-b6a9-ead2955b8069\",",
							"            \"PmtMtd\": \"TRA\",",
							"            \"ReqdAdvcTp\": {",
							"                \"DbtAdvc\": {",
							"                    \"Cd\": \"ADWD\",",
							"                    \"Prtry\": \"Advice with transaction details\"",
							"                }",
							"            },",
							"            \"ReqdExctnDt\": {",
							"                \"DtTm\": \"2021-10-07T09:25:31.000Z\"",
							"            },",
							"            \"XpryDt\": {",
							"                \"DtTm\": \"2021-10-21\"",
							"            },",
							"            \"Dbtr\": {",
							"                \"Nm\": \"2021-10-21T14:02:54.000Z\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"2021-10-07\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"zz\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"ZZ\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"+27721299138\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-783078685\"",
							"                }",
							"            },",
							"            \"DbtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"+27-721299138\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"+27721299138\"",
							"                        },",
							"                        \"Nm\": \"PASSPORT\"",
							"                    }",
							"                }",
							"            },",
							"            \"DbtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"Horatio Ford\"",
							"                    }",
							"                }",
							"            },",
							"            \"CdtTrfTxInf\": {",
							"                \"PmtId\": {",
							"                    \"EndToEndId\": \"2c516801007642dfb892944dde1cf845\"",
							"                },",
							"                \"PmtTpInf\": {",
							"                    \"CtgyPurp\": {",
							"                        \"Prtry\": \"TRANSFER\"",
							"                    }",
							"                },",
							"                \"Amt\": {",
							"                    \"InstdAmt\": {",
							"                        \"Amt\": {",
							"                            \"Amt\": 50431891779910900,",
							"                            \"Ccy\": \"USD\"",
							"                        }",
							"                    },",
							"                    \"EqvtAmt\": {",
							"                        \"Amt\": {",
							"                            \"Amt\": 50431891779910900,",
							"                            \"Ccy\": \"USD\"",
							"                        },",
							"                        \"CcyOfTrf\": \"USD\"",
							"                    }",
							"                },",
							"                \"ChrgBr\": \"DEBT\",",
							"                \"CdtrAgt\": {",
							"                    \"FinInstnId\": {",
							"                        \"ClrSysMmbId\": {",
							"                            \"MmbId\": \"dfsp002\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Cdtr\": {",
							"                    \"Nm\": \"April Sam Adamson\",",
							"                    \"Id\": {",
							"                        \"PrvtId\": {",
							"                            \"DtAndPlcOfBirth\": {",
							"                                \"BirthDt\": \"1923-04-26\",",
							"                                \"CityOfBirth\": \"Unknown\",",
							"                                \"CtryOfBirth\": \"ZZ\"",
							"                            },",
							"                            \"Othr\": {",
							"                                \"Id\": \"+27782722305\",",
							"                                \"SchmeNm\": {",
							"                                    \"Prtry\": \"MSISDN\"",
							"                                }",
							"                            }",
							"                        }",
							"                    },",
							"                    \"CtctDtls\": {",
							"                        \"MobNb\": \"+27-782722305\"",
							"                    }",
							"                },",
							"                \"CdtrAcct\": {",
							"                    \"Id\": {",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27783078685\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    },",
							"                    \"Nm\": \"April Adamson\"",
							"                },",
							"                \"Purp\": {",
							"                    \"Cd\": \"MP2P\"",
							"                },",
							"                \"RgltryRptg\": {",
							"                    \"Dtls\": {",
							"                        \"Tp\": \"BALANCE OF PAYMENTS\",",
							"                        \"Cd\": \"100\"",
							"                    }",
							"                },",
							"                \"RmtInf\": {",
							"                    \"Ustrd\": \"Payment of USD 49932566118723700.89 from Ivan to April\"",
							"                },",
							"                \"SplmtryData\": {",
							"                    \"Envlp\": {",
							"                        \"Doc\": {",
							"                            \"PyeeRcvAmt\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 4906747824834590.33,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            },",
							"                            \"PyeeFinSvcsPrvdrFee\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 49067478248345.9,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            },",
							"                            \"PyeeFinSvcsPrvdrComssn\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 0,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            }",
							"                        }",
							"                    }",
							"                }",
							"            }",
							"        },",
							"        \"SplmtryData\": {",
							"            \"Envlp\": {",
							"                \"Doc\": {",
							"                    \"InitgPty\": {",
							"                        \"Glctn\": {",
							"                            \"Lat\": \"-3.1675\",",
							"                            \"Long\": \"39.059\"",
							"                        }",
							"                    }",
							"                }",
							"            }",
							"        }",
							"    }",
							"}]",
							"const transactionGraph = [{",
							"    _key: \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: \"pacs.002.001.12\",",
							"    TxSts: \"ACCC\",",
							"    CreDtTm: new Date(new Date(now - 120000)).toISOString(),",
							"    PmtInfId: \"2f68ae16-467a-4ac4-ba32-eb518646aa1d\",",
							"    EndToEndId: \"5cb8a2db-5c32-41bb-ac27-2597125d50fd\"",
							"},",
							" {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e',",
							"    _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 3600000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50de',",
							"  },",
							"  {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954',",
							"     _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 3600000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50u4',",
							"  },",
							"  {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab195',",
							"     _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 120000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50vm',",
							"  },",
							"  {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab',",
							"    _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 64800000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50vm',",
							"  },",
							"  {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093',",
							"    _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 3600000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50vm',",
							"  }",
							"]",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pacs008Transactions)}",
							"                    INSERT {_key: transaction.FIToFICstmrCdt.GrpHdr.MsgId, TxTp: transaction.TxTp, FIToFICstmrCdt: transaction.FIToFICstmrCdt} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pain013Transactions)}",
							"                    INSERT {_key: transaction.CdtrPmtActvtnReq.GrpHdr.MsgId, TxTp: transaction.TxTp, CdtrPmtActvtnReq: transaction.CdtrPmtActvtnReq} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pain001Transactions)}",
							"                    INSERT {_key: transaction.CstmrCdtTrfInitn.GrpHdr.MsgId, TxTp: transaction.TxTp, CstmrCdtTrfInitn: transaction.CstmrCdtTrfInitn} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/pseudonyms/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(transactionGraph)}",
							"                    INSERT transaction INTO transactionRelationship",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/Configuration/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR config IN ${JSON.stringify(ruleConfig)}",
							"                    INSERT {_key: \"017\", id: config.id, cfg: config.cfg, config: config.config} INTO configuration",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"const jsonData = pm.response.json();",
							"const req = JSON.parse(request.data);",
							"const arangourl = pm.environment.get('arangourl');",
							"",
							"const transactions = [\"96ae98292ec04bf29b5d40ba99864c38\", \"d7baf66c-73b7-11ec-90d6-0242ac120003\", \"aaa50190-73b7-11ec-90d6-0242ac120003\"]",
							"const graphTransactions = [\"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab195\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093\"]",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"should have rule result of true\", function () {",
							"    pm.expect(jsonData.ruleResult.result).to.be.eql(false);",
							"});",
							"",
							"pm.test(\"Remove Seed Data from DB\", function () {",
							"    pm.sendRequest({",
							"        url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"        method: 'POST',",
							"        header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"        body: {",
							"            mode: 'raw',",
							"            raw: JSON.stringify({",
							"                query: `FOR transaction IN ${JSON.stringify(transactions)}",
							"                        REMOVE { _key: transaction } IN transactionHistory",
							"                        OPTIONS { ignoreErrors: true }`",
							"            })",
							"        }",
							"    })",
							"});",
							"",
							"pm.test(\"Remove Seed Data from transactionGraph\", function () {",
							"    pm.sendRequest({",
							"        url: `${arangourl}/_db/pseudonyms/_api/cursor`,",
							"        method: 'POST',",
							"        header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"        body: {",
							"            mode: 'raw',",
							"            raw: JSON.stringify({",
							"                query: `FOR transaction IN ${JSON.stringify(graphTransactions)}",
							"                        REMOVE { _key: transaction } IN transactionRelationship",
							"                        OPTIONS { ignoreErrors: true }`",
							"            })",
							"        }",
							"    })",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"transaction\": {\n        \"TxTp\": \"pacs.002.001.12\",\n        \"FIToFIPmtSts\": {\n            \"GrpHdr\": {\n                \"MsgId\": \"6b444365119746c5be7dfb5516ba67c4\",\n                \"CreDtTm\": \"{{now}}\"\n            },\n            \"TxInfAndSts\": {\n                \"OrgnlInstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",\n                \"OrgnlEndToEndId\": \"2c516801007642dfb892944dde1cf845\",\n                \"TxSts\": \"ACCC\",\n                \"ChrgsInf\": [\n                    {\n                        \"Amt\": {\n                            \"Amt\": 307.14,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp001\"\n                                }\n                            }\n                        }\n                    },\n                    {\n                        \"Amt\": {\n                            \"Amt\": 153.57,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp001\"\n                                }\n                            }\n                        }\n                    },\n                    {\n                        \"Amt\": {\n                            \"Amt\": 30.71,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp002\"\n                                }\n                            }\n                        }\n                    }\n                ],\n                \"AccptncDtTm\": \"2021-12-03T15:36:16.000Z\",\n                \"InstgAgt\": {\n                    \"FinInstnId\": {\n                        \"ClrSysMmbId\": {\n                            \"MmbId\": \"dfsp001\"\n                        }\n                    }\n                },\n                \"InstdAgt\": {\n                    \"FinInstnId\": {\n                        \"ClrSysMmbId\": {\n                            \"MmbId\": \"dfsp002\"\n                        }\n                    }\n                }\n            }\n        }\n    },\n    \"networkMap\": {\n        \"messages\": [\n            {\n                \"id\": \"004@1.0.0\",\n                \"host\": \"http://gateway.openfaas:8080/function/off-transaction-aggregation-decisioning-processor-rel-1-1-0\",\n                \"cfg\": \"1.0.0\",\n                \"txTp\": \"pacs.002.001.12\",\n                \"channels\": [\n                    {\n                        \"id\": \"001@1.0.0\",\n                        \"host\": \"http://gateway.openfaas:8080/function/off-channel-aggregation-decisioning-processor-rel-1-1-0\",\n                        \"cfg\": \"1.0.0\",\n                        \"typologies\": [\n                            {\n                                \"id\": \"028@1.0.0\",\n                                \"host\": \"http://gateway.openfaas:8080/function/off-typology-processor-rel-1-0-0\",\n                                \"cfg\": \"1.0.0\",\n                                \"rules\": [\n                                    {\n                                        \"id\": \"017@1.0.0\",\n                                        \"host\": \"http://gateway.openfaas:8080/function/off-rule-017-rel-1-0-0\",\n                                        \"cfg\": \"1.0.0\"\n                                    }\n                                ]\n                            }\n                        ]\n                    }\n                ]\n            }\n        ]\n    }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{baseUrl}}/function/off-rule-017{{version}}/execute",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"function",
						"off-rule-017{{version}}",
						"execute"
					]
				}
			},
			"response": []
		},
		{
			"name": "Test Scenario 5.1",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"pm.globals.set(\"now\", new Date().toISOString());",
							"const arangourl = pm.environment.get('arangourl');",
							"",
							"const now = new Date().getTime();",
							"",
							"const ruleConfig = [",
							"    {",
							"  \"id\": \"017@1.0.0\",",
							"  \"cfg\": \"1.0.2\",",
							"  \"config\": {",
							"    \"timeframes\": [",
							"      {",
							"        \"threshold\": 28800000",
							"      }",
							"    ],",
							"    \"bands\": [",
							"      {",
							"        \"subRuleRef\": \".01\",",
							"        \"lowerLimit\": 6,",
							"        \"outcome\": true,",
							"        \"reason\": \"Transaction divergence detected on source account\"",
							"      },",
							"      {",
							"        \"subRuleRef\": \".00\",",
							"        \"upperLimit\": 6,",
							"        \"outcome\": false,",
							"        \"reason\": \"No Transaction divergence detected on source account\"",
							"      }",
							"    ]",
							"  }",
							"}",
							"]",
							"",
							"const pacs008Transactions = [{",
							"    \"TxTp\": \"pacs.008.001.10\",",
							"    \"FIToFICstmrCdt\": {",
							"        \"GrpHdr\": {",
							"            \"MsgId\": \"96ae98292ec04bf29b5d40ba99864c38\",",
							"            \"CreDtTm\": new Date(new Date(now - 10000).getTime()).toISOString(),",
							"            \"NbOfTxs\": 1,",
							"            \"SttlmInf\": {",
							"                \"SttlmMtd\": \"CLRG\"",
							"            }",
							"        },",
							"        \"CdtTrfTxInf\": {",
							"            \"PmtId\": {",
							"                \"InstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",",
							"                \"EndToEndId\": \"2c516801007642dfb892944dde1cf845\"",
							"            },",
							"            \"IntrBkSttlmAmt\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 31020.89,",
							"                    \"Ccy\": \"USD\"",
							"                }",
							"            },",
							"            \"InstdAmt\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 31020.89,",
							"                    \"Ccy\": \"USD\"",
							"                }",
							"            },",
							"            \"ChrgBr\": \"DEBT\",",
							"            \"ChrgsInf\": {",
							"                \"Amt\": {",
							"                    \"Amt\": 307.14,",
							"                    \"Ccy\": \"USD\"",
							"                },",
							"                \"Agt\": {",
							"                    \"FinInstnId\": {",
							"                        \"ClrSysMmbId\": {",
							"                            \"MmbId\": \"dfsp001\"",
							"                        }",
							"                    }",
							"                }",
							"            },",
							"            \"InitgPty\": {",
							"                \"Nm\": \"April Blake Grant\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1968-02-01\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27730975224\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-730975224\"",
							"                }",
							"            },",
							"            \"Dbtr\": {",
							"                \"Nm\": \"April Blake Grant\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1968-02-01\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27730975224\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-730975224\"",
							"                }",
							"            },",
							"            \"DbtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"PSEUDO\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Nm\": \"April Grant\"",
							"            },",
							"            \"DbtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp001\"",
							"                    }",
							"                }",
							"            },",
							"            \"CdtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"dfsp002\"",
							"                    }",
							"                }",
							"            },",
							"            \"Cdtr\": {",
							"                \"Nm\": \"Felicia Easton Quill\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1935-05-08\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27707650428\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-707650428\"",
							"                }",
							"            },",
							"            \"CdtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"efdafefdee55c7a1e5eba4ccc0f01639dc37a020241b20495378f5a1343985b4\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"PSEUDO\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Nm\": \"Felicia Quill\"",
							"            },",
							"            \"Purp\": {",
							"                \"Cd\": \"MP2P\"",
							"            }",
							"        },",
							"        \"RgltryRptg\": {",
							"            \"Dtls\": {",
							"                \"Tp\": \"BALANCE OF PAYMENTS\",",
							"                \"Cd\": \"100\"",
							"            }",
							"        },",
							"        \"RmtInf\": {",
							"            \"Ustrd\": \"Payment of USD 30713.75 from April to Felicia\"",
							"        },",
							"        \"SplmtryData\": {",
							"            \"Envlp\": {",
							"                \"Doc\": {",
							"                    \"Xprtn\": \"2021-11-30T10:38:56.000Z\"",
							"                }",
							"            }",
							"        }",
							"    }",
							"}]",
							"",
							"const pain001Transactions = [{",
							"   \"TxTp\":\"pain.001.001.11\",",
							"   \"CstmrCdtTrfInitn\":{",
							"      \"GrpHdr\":{",
							"         \"MsgId\":\"d7baf66c-73b7-11ec-90d6-0242ac120003\",",
							"         \"CreDtTm\": new Date(new Date(now - 30000).getTime()).toISOString(),",
							"         \"NbOfTxs\":1,",
							"         \"InitgPty\":{",
							"            \"Nm\":\"Ivan Reese Russel-Klein\",",
							"            \"Id\":{",
							"               \"PrvtId\":{",
							"                  \"DtAndPlcOfBirth\":{",
							"                     \"BirthDt\":\"1967-11-23\",",
							"                     \"CityOfBirth\":\"Unknown\",",
							"                     \"CtryOfBirth\":\"ZZ\"",
							"                  },",
							"                  \"Othr\":{",
							"                     \"Id\":\"\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               }",
							"            },",
							"            \"CtctDtls\":{",
							"               \"MobNb\":\"\"",
							"            }",
							"         }",
							"      },",
							"      \"PmtInf\":{",
							"         \"PmtInfId\":\"b51ec534-ee48-4575-b6a9-ead2955b8069\",",
							"         \"PmtMtd\":\"TRA\",",
							"         \"ReqdAdvcTp\":{",
							"            \"DbtAdvc\":{",
							"               \"Cd\":\"ADWD\",",
							"               \"Prtry\":\"Advice with transaction details\"",
							"            }",
							"         },",
							"         \"ReqdExctnDt\":{",
							"            \"Dt\":\"2021-10-07\",",
							"            \"DtTm\":\"2021-10-07T09:25:31.000Z\"",
							"         },",
							"         \"Dbtr\":{",
							"            \"Nm\":\"Ivan Reese Russel-Klein\",",
							"            \"Id\":{",
							"               \"PrvtId\":{",
							"                  \"DtAndPlcOfBirth\":{",
							"                     \"BirthDt\":\"1967-11-23\",",
							"                     \"CityOfBirth\":\"Unknown\",",
							"                     \"CtryOfBirth\":\"ZZ\"",
							"                  },",
							"                  \"Othr\":{",
							"                     \"Id\":\"\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               }",
							"            },",
							"            \"CtctDtls\":{",
							"               \"MobNb\":\"\"",
							"            }",
							"         },",
							"         \"DbtrAcct\":{",
							"            \"Id\":{",
							"               \"Othr\":{",
							"                  \"Id\":\"\",",
							"                  \"SchmeNm\":{",
							"                     \"Prtry\":\"PASSPORT\"",
							"                  }",
							"               }",
							"            },",
							"            \"Nm\":\"Ivan Russel-Klein\"",
							"         },",
							"         \"DbtrAgt\":{",
							"            \"FinInstnId\":{",
							"               \"ClrSysMmbId\":{",
							"                  \"MmbId\":\"dfsp001\"",
							"               }",
							"            }",
							"         },",
							"         \"CdtTrfTxInf\":{",
							"            \"PmtId\":{",
							"               \"EndToEndId\":\"2c516801007642dfb892944dde1cf845\"",
							"            },",
							"            \"PmtTpInf\":{",
							"               \"CtgyPurp\":{",
							"                  \"Prtry\":\"TRANSFER\"",
							"               }",
							"            },",
							"            \"Amt\":{",
							"               \"InstdAmt\":{",
							"                  \"Amt\":{",
							"                     \"Amt\":\"50431891779910900\",",
							"                     \"Ccy\":\"USD\"",
							"                  }",
							"               },",
							"               \"EqvtAmt\":{",
							"                  \"Amt\":{",
							"                     \"Amt\":\"50431891779910900\",",
							"                     \"Ccy\":\"USD\"",
							"                  },",
							"                  \"CcyOfTrf\":\"USD\"",
							"               }",
							"            },",
							"            \"ChrgBr\":\"DEBT\",",
							"            \"CdtrAgt\":{",
							"               \"FinInstnId\":{",
							"                  \"ClrSysMmbId\":{",
							"                     \"MmbId\":\"dfsp002\"",
							"                  }",
							"               }",
							"            },",
							"            \"Cdtr\":{",
							"               \"Nm\":\"\",",
							"               \"Id\":{",
							"                  \"PrvtId\":{",
							"                     \"DtAndPlcOfBirth\":{",
							"                        \"BirthDt\":\"1923-04-26\",",
							"                        \"CityOfBirth\":\"\",",
							"                        \"CtryOfBirth\":\"\"",
							"                     },",
							"                     \"Othr\":{",
							"                        \"Id\":\"\",",
							"                        \"SchmeNm\":{",
							"                           \"Prtry\":\"MSISDN\"",
							"                        }",
							"                     }",
							"                  }",
							"               },",
							"               \"CtctDtls\":{",
							"                  \"MobNb\":\"\"",
							"               }",
							"            },",
							"            \"CdtrAcct\":{",
							"               \"Id\":{",
							"                  \"Othr\":{",
							"                     \"Id\":\"03aeae97e5e2263c8c22bc0dec615b13ee6c90b6cf2dc0ffee72bcce9c66a14c\",",
							"                     \"SchmeNm\":{",
							"                        \"Prtry\":\"MSISDN\"",
							"                     }",
							"                  }",
							"               },",
							"               \"Nm\":\"April Adamson\"",
							"            },",
							"            \"Purp\":{",
							"               \"Cd\":\"MP2P\"",
							"            },",
							"            \"RgltryRptg\":{",
							"               \"Dtls\":{",
							"                  \"Tp\":\"BALANCE OF PAYMENTS\",",
							"                  \"Cd\":\"100\"",
							"               }",
							"            },",
							"            \"RmtInf\":{",
							"               \"Ustrd\":\"Payment of USD 49932566118723700.89 from Ivan to April\"",
							"            },",
							"            \"SplmtryData\":{",
							"               \"Envlp\":{",
							"                  \"Doc\":{",
							"                     \"Cdtr\":{",
							"                        \"FrstNm\":\"Ivan\",",
							"                        \"MddlNm\":\"Reese\",",
							"                        \"LastNm\":\"Russel-Klein\",",
							"                        \"MrchntClssfctnCd\":\"BLANK\"",
							"                     },",
							"                     \"Dbtr\":{",
							"                        \"FrstNm\":\"\",",
							"                        \"MddlNm\":\"\",",
							"                        \"LastNm\":\"\",",
							"                        \"MrchntClssfctnCd\":\"BLANK\"",
							"                     },",
							"                     \"DbtrFinSvcsPrvdrFees\":{",
							"                        \"Ccy\":\"USD\",",
							"                        \"Amt\":\"499325661187237\"",
							"                     },",
							"                     \"Xprtn\":\"2021-10-07T09:30:31.000Z\"",
							"                  }",
							"               }",
							"            }",
							"         }",
							"      },",
							"      \"SplmtryData\":{",
							"         \"Envlp\":{",
							"            \"Doc\":{",
							"               \"InitgPty\":{",
							"                  \"InitrTp\":\"CONSUMER\",",
							"                  \"Glctn\":{",
							"                     \"Lat\":\"-3.1291\",",
							"                     \"Long\":\"39.0006\"",
							"                  }",
							"               }",
							"            }",
							"         }",
							"      }",
							"   }",
							"}]",
							"",
							"const pain013Transactions = [{",
							"    \"TxTp\": \"pain.013.001.09\",",
							"    \"CdtrPmtActvtnReq\": {",
							"        \"GrpHdr\": {",
							"            \"MsgId\": \"aaa50190-73b7-11ec-90d6-0242ac120003\",",
							"            \"CreDtTm\": new Date(new Date(now - 20000).getTime()).toISOString(),",
							"            \"NbOfTxs\": 1,",
							"            \"InitgPty\": {",
							"                \"Nm\": \"Horatio Sam Ford\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"1981-04-11\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"ZZ\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27721299138\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-721299138\"",
							"                }",
							"            }",
							"        },",
							"        \"PmtInf\": {",
							"            \"PmtInfId\": \"b51ec534-ee48-4575-b6a9-ead2955b8069\",",
							"            \"PmtMtd\": \"TRA\",",
							"            \"ReqdAdvcTp\": {",
							"                \"DbtAdvc\": {",
							"                    \"Cd\": \"ADWD\",",
							"                    \"Prtry\": \"Advice with transaction details\"",
							"                }",
							"            },",
							"            \"ReqdExctnDt\": {",
							"                \"DtTm\": \"2021-10-07T09:25:31.000Z\"",
							"            },",
							"            \"XpryDt\": {",
							"                \"DtTm\": \"2021-10-21\"",
							"            },",
							"            \"Dbtr\": {",
							"                \"Nm\": \"2021-10-21T14:02:54.000Z\",",
							"                \"Id\": {",
							"                    \"PrvtId\": {",
							"                        \"DtAndPlcOfBirth\": {",
							"                            \"BirthDt\": \"2021-10-07\",",
							"                            \"CityOfBirth\": \"Unknown\",",
							"                            \"CtryOfBirth\": \"zz\"",
							"                        },",
							"                        \"Othr\": {",
							"                            \"Id\": \"ZZ\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"+27721299138\"",
							"                            }",
							"                        }",
							"                    }",
							"                },",
							"                \"CtctDtls\": {",
							"                    \"MobNb\": \"+27-783078685\"",
							"                }",
							"            },",
							"            \"DbtrAcct\": {",
							"                \"Id\": {",
							"                    \"Othr\": {",
							"                        \"Id\": \"+27-721299138\",",
							"                        \"SchmeNm\": {",
							"                            \"Prtry\": \"+27721299138\"",
							"                        },",
							"                        \"Nm\": \"PASSPORT\"",
							"                    }",
							"                }",
							"            },",
							"            \"DbtrAgt\": {",
							"                \"FinInstnId\": {",
							"                    \"ClrSysMmbId\": {",
							"                        \"MmbId\": \"Horatio Ford\"",
							"                    }",
							"                }",
							"            },",
							"            \"CdtTrfTxInf\": {",
							"                \"PmtId\": {",
							"                    \"EndToEndId\": \"2c516801007642dfb892944dde1cf845\"",
							"                },",
							"                \"PmtTpInf\": {",
							"                    \"CtgyPurp\": {",
							"                        \"Prtry\": \"TRANSFER\"",
							"                    }",
							"                },",
							"                \"Amt\": {",
							"                    \"InstdAmt\": {",
							"                        \"Amt\": {",
							"                            \"Amt\": 50431891779910900,",
							"                            \"Ccy\": \"USD\"",
							"                        }",
							"                    },",
							"                    \"EqvtAmt\": {",
							"                        \"Amt\": {",
							"                            \"Amt\": 50431891779910900,",
							"                            \"Ccy\": \"USD\"",
							"                        },",
							"                        \"CcyOfTrf\": \"USD\"",
							"                    }",
							"                },",
							"                \"ChrgBr\": \"DEBT\",",
							"                \"CdtrAgt\": {",
							"                    \"FinInstnId\": {",
							"                        \"ClrSysMmbId\": {",
							"                            \"MmbId\": \"dfsp002\"",
							"                        }",
							"                    }",
							"                },",
							"                \"Cdtr\": {",
							"                    \"Nm\": \"April Sam Adamson\",",
							"                    \"Id\": {",
							"                        \"PrvtId\": {",
							"                            \"DtAndPlcOfBirth\": {",
							"                                \"BirthDt\": \"1923-04-26\",",
							"                                \"CityOfBirth\": \"Unknown\",",
							"                                \"CtryOfBirth\": \"ZZ\"",
							"                            },",
							"                            \"Othr\": {",
							"                                \"Id\": \"+27782722305\",",
							"                                \"SchmeNm\": {",
							"                                    \"Prtry\": \"MSISDN\"",
							"                                }",
							"                            }",
							"                        }",
							"                    },",
							"                    \"CtctDtls\": {",
							"                        \"MobNb\": \"+27-782722305\"",
							"                    }",
							"                },",
							"                \"CdtrAcct\": {",
							"                    \"Id\": {",
							"                        \"Othr\": {",
							"                            \"Id\": \"+27783078685\",",
							"                            \"SchmeNm\": {",
							"                                \"Prtry\": \"MSISDN\"",
							"                            }",
							"                        }",
							"                    },",
							"                    \"Nm\": \"April Adamson\"",
							"                },",
							"                \"Purp\": {",
							"                    \"Cd\": \"MP2P\"",
							"                },",
							"                \"RgltryRptg\": {",
							"                    \"Dtls\": {",
							"                        \"Tp\": \"BALANCE OF PAYMENTS\",",
							"                        \"Cd\": \"100\"",
							"                    }",
							"                },",
							"                \"RmtInf\": {",
							"                    \"Ustrd\": \"Payment of USD 49932566118723700.89 from Ivan to April\"",
							"                },",
							"                \"SplmtryData\": {",
							"                    \"Envlp\": {",
							"                        \"Doc\": {",
							"                            \"PyeeRcvAmt\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 4906747824834590.33,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            },",
							"                            \"PyeeFinSvcsPrvdrFee\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 49067478248345.9,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            },",
							"                            \"PyeeFinSvcsPrvdrComssn\": {",
							"                                \"Amt\": {",
							"                                    \"Amt\": 0,",
							"                                    \"Ccy\": \"USD\"",
							"                                }",
							"                            }",
							"                        }",
							"                    }",
							"                }",
							"            }",
							"        },",
							"        \"SplmtryData\": {",
							"            \"Envlp\": {",
							"                \"Doc\": {",
							"                    \"InitgPty\": {",
							"                        \"Glctn\": {",
							"                            \"Lat\": \"-3.1675\",",
							"                            \"Long\": \"39.059\"",
							"                        }",
							"                    }",
							"                }",
							"            }",
							"        }",
							"    }",
							"}]",
							"const transactionGraph = [{",
							"    _key: \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: \"pacs.002.001.12\",",
							"    TxSts: \"ACCC\",",
							"    CreDtTm: new Date(new Date(now - 120000)).toISOString(),",
							"    PmtInfId: \"2f68ae16-467a-4ac4-ba32-eb518646aa1d\",",
							"    EndToEndId: \"5cb8a2db-5c32-41bb-ac27-2597125d50fd\"",
							"},",
							" {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e',",
							"    _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 3600000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50de',",
							"  },",
							"  {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954',",
							"     _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 3600000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50u4',",
							"  },",
							"  {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab195',",
							"     _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 120000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50vm',",
							"  },",
							"  {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab',",
							"    _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 64800000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50vm',",
							"  },",
							"  {",
							"    _key: 'af36cfd29dd05eb483358899055a552af93cd7ae36093',",
							"    _from: \"accounts/af36cfd29dd05eb483358899055a552af93cd7ae36093\",",
							"    _to: \"accounts/e2fa05b6a56ceedb37581703b98590b44194a8c0d2799f4319ebbece5e20ecc1\",",
							"    TxTp: 'pacs.002.001.12',",
							"    TxSts: 'ACCC',",
							"    CreDtTm: new Date(new Date(now - 3600000)).toISOString(),",
							"    PmtInfId: '2f68ae16-467a-4ac4-ba32-eb518646aa1d',",
							"    EndToEndId: '5cb8a2db-5c32-41bb-ac27-2597125d50vm',",
							"  }",
							"]",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pacs008Transactions)}",
							"                    INSERT {_key: transaction.FIToFICstmrCdt.GrpHdr.MsgId, TxTp: transaction.TxTp, FIToFICstmrCdt: transaction.FIToFICstmrCdt} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pain013Transactions)}",
							"                    INSERT {_key: transaction.CdtrPmtActvtnReq.GrpHdr.MsgId, TxTp: transaction.TxTp, CdtrPmtActvtnReq: transaction.CdtrPmtActvtnReq} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(pain001Transactions)}",
							"                    INSERT {_key: transaction.CstmrCdtTrfInitn.GrpHdr.MsgId, TxTp: transaction.TxTp, CstmrCdtTrfInitn: transaction.CstmrCdtTrfInitn} INTO transactionHistory",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/pseudonyms/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR transaction IN ${JSON.stringify(transactionGraph)}",
							"                    INSERT transaction INTO transactionRelationship",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});",
							"pm.sendRequest({",
							"    url: `${arangourl}/_db/Configuration/_api/cursor`,",
							"    method: 'POST',",
							"    header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            query: `FOR config IN ${JSON.stringify(ruleConfig)}",
							"                    INSERT {_key: \"017\", id: config.id, cfg: config.cfg, config: config.config} INTO configuration",
							"                    OPTIONS { overwrite: true }`",
							"        })",
							"    }",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"const jsonData = pm.response.json();",
							"const req = JSON.parse(request.data);",
							"const arangourl = pm.environment.get('arangourl');",
							"",
							"const transactions = [\"96ae98292ec04bf29b5d40ba99864c38\", \"d7baf66c-73b7-11ec-90d6-0242ac120003\", \"aaa50190-73b7-11ec-90d6-0242ac120003\"]",
							"const graphTransactions = [\"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e90\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954e\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab1954\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab195\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093832189e63dab\", \"af36cfd29dd05eb483358899055a552af93cd7ae36093\"]",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"should have rule result of true\", function () {",
							"    pm.expect(jsonData.ruleResult.result).to.be.eql(false);",
							"    pm.expect(jsonData.ruleResult.reason).to.be.eql('No Transaction divergence detected on source account');",
							"});",
							"",
							"pm.test(\"Remove Seed Data from DB\", function () {",
							"    pm.sendRequest({",
							"        url: `${arangourl}/_db/transactionHistory/_api/cursor`,",
							"        method: 'POST',",
							"        header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"        body: {",
							"            mode: 'raw',",
							"            raw: JSON.stringify({",
							"                query: `FOR transaction IN ${JSON.stringify(transactions)}",
							"                        REMOVE { _key: transaction } IN transactionHistory",
							"                        OPTIONS { ignoreErrors: true }`",
							"            })",
							"        }",
							"    })",
							"});",
							"",
							"pm.test(\"Remove Seed Data from transactionGraph\", function () {",
							"    pm.sendRequest({",
							"        url: `${arangourl}/_db/pseudonyms/_api/cursor`,",
							"        method: 'POST',",
							"        header: { 'Authorization': `Bearer ${pm.globals.get(\"arangoToken\")}` },",
							"        body: {",
							"            mode: 'raw',",
							"            raw: JSON.stringify({",
							"                query: `FOR transaction IN ${JSON.stringify(graphTransactions)}",
							"                        REMOVE { _key: transaction } IN transactionRelationship",
							"                        OPTIONS { ignoreErrors: true }`",
							"            })",
							"        }",
							"    })",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"transaction\": {\n        \"TxTp\": \"pacs.002.001.12\",\n        \"FIToFIPmtSts\": {\n            \"GrpHdr\": {\n                \"MsgId\": \"6b444365119746c5be7dfb5516ba67c4\",\n                \"CreDtTm\": \"{{now}}\"\n            },\n            \"TxInfAndSts\": {\n                \"OrgnlInstrId\": \"5ab4fc7355de4ef8a75b78b00a681ed2\",\n                \"OrgnlEndToEndId\": \"2c516801007642dfb892944dde1cf845\",\n                \"TxSts\": \"ACCC\",\n                \"ChrgsInf\": [\n                    {\n                        \"Amt\": {\n                            \"Amt\": 307.14,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp001\"\n                                }\n                            }\n                        }\n                    },\n                    {\n                        \"Amt\": {\n                            \"Amt\": 153.57,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp001\"\n                                }\n                            }\n                        }\n                    },\n                    {\n                        \"Amt\": {\n                            \"Amt\": 30.71,\n                            \"Ccy\": \"USD\"\n                        },\n                        \"Agt\": {\n                            \"FinInstnId\": {\n                                \"ClrSysMmbId\": {\n                                    \"MmbId\": \"dfsp002\"\n                                }\n                            }\n                        }\n                    }\n                ],\n                \"AccptncDtTm\": \"2021-12-03T15:36:16.000Z\",\n                \"InstgAgt\": {\n                    \"FinInstnId\": {\n                        \"ClrSysMmbId\": {\n                            \"MmbId\": \"dfsp001\"\n                        }\n                    }\n                },\n                \"InstdAgt\": {\n                    \"FinInstnId\": {\n                        \"ClrSysMmbId\": {\n                            \"MmbId\": \"dfsp002\"\n                        }\n                    }\n                }\n            }\n        }\n    },\n    \"networkMap\": {\n        \"messages\": [\n            {\n                \"id\": \"004_017@1.0.0\",\n                \"host\": \"http://gateway.openfaas:8080/function/off-transaction-aggregation-decisioning-processor-rel-1-0-0\",\n                \"cfg\": \"1.0.0\",\n                \"txTp\": \"pacs.002.001.12\",\n                \"channels\": [\n                    {\n                        \"id\": \"001@1.0.0\",\n                        \"host\": \"http://gateway.openfaas:8080/function/off-channel-aggregation-decisioning-processor-rel-1-0-0\",\n                        \"cfg\": \"1.0.0\",\n                        \"typologies\": [\n                            {\n                                \"id\": \"999_017@1.0.0\",\n                                \"host\": \"http://gateway.openfaas:8080/function/off-typology-processor-rel-1-0-0\",\n                                \"cfg\": \"1.0.0\",\n                                \"rules\": [\n                                    {\n                                        \"id\": \"017@1.0.0\",\n                                        \"host\": \"http://gateway.openfaas:8080/function/off-rule-017-rel-1-0-0\",\n                                        \"cfg\": \"1.0.2\"\n                                    }\n                                ]\n                            }\n                        ]\n                    }\n                ]\n            }\n        ]\n    }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{baseUrl}}/function/off-rule-017{{version}}/execute",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"function",
						"off-rule-017{{version}}",
						"execute"
					]
				}
			},
			"response": []
		}
	],
	"variable": [
		{
			"key": "transactionID",
			"value": ""
		},
		{
			"key": "EndToEndId",
			"value": ""
		}
	]
}